"use strict";(self.webpackChunkdockview_docs=self.webpackChunkdockview_docs||[]).push([[6475],{6475:(e,t,n)=>{n.d(t,{Pg:()=>g,O4:()=>r.O4,tu:()=>w,$R:()=>E,g1:()=>r.g1,i5:()=>r.i5,Vm:()=>O,TU:()=>_,M:()=>r.M,UM:()=>r.UM,Zc:()=>r.Zc,Hx:()=>r.Hx,MV:()=>r.MV,Qp:()=>r.Qp,Lt:()=>r.Lt,TR:()=>r.TR,ZS:()=>r.ZS});var r=n(6701),o=n(6204),a=n(2457);const i=(e,t)=>{const[n,r]=o.useState(),a=o.useRef(e.componentProps);return o.useImperativeHandle(t,(()=>({update:e=>{a.current=Object.assign(Object.assign({},a.current),e),r(Date.now())}})),[]),o.createElement(e.component,a.current)};i.displayName="DockviewReactJsBridge";const s=(()=>{let e=1;return{next:()=>`dockview_react_portal_key_${(e++).toString()}`}})(),c=o.createContext({});class p{constructor(e,t,n,r,o){this.parent=e,this.portalStore=t,this.component=n,this.parameters=r,this.context=o,this._initialProps={},this.disposed=!1,this.createPortal()}update(e){if(this.disposed)throw new Error("invalid operation: resource is already disposed");this.componentInstance?this.componentInstance.update(e):this._initialProps=Object.assign(Object.assign({},this._initialProps),e)}createPortal(){if(this.disposed)throw new Error("invalid operation: resource is already disposed");if("function"!=typeof(e=this.component)&&!(null==e?void 0:e.$$typeof))throw new Error("Dockview: Only React.memo(...), React.ForwardRef(...) and functional components are accepted as components");var e;const t=o.createElement(o.forwardRef(i),{component:this.component,componentProps:this.parameters,ref:e=>{this.componentInstance=e,Object.keys(this._initialProps).length>0&&(this.componentInstance.update(this._initialProps),this._initialProps={})}}),n=this.context?o.createElement(c.Provider,{value:this.context},t):t,r=a.createPortal(n,this.parent,s.next());this.ref={portal:r,disposable:this.portalStore.addPortal(r)}}dispose(){var e;null===(e=this.ref)||void 0===e||e.disposable.dispose(),this.disposed=!0}}const l=()=>{const[e,t]=o.useState([]);o.useDebugValue(`Portal count: ${e.length}`);return[e,o.useCallback((e=>{t((t=>[...t,e]));let n=!1;return r.GW.from((()=>{if(n)throw new Error("invalid operation: resource already disposed");n=!0,t((t=>t.filter((t=>t!==e))))}))}),[])]};class u{get element(){return this._element}constructor(e,t,n){this.id=e,this.component=t,this.reactPortalStore=n,this._onDidFocus=new r.O4,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new r.O4,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new p(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi})}update(e){var t;null===(t=this.part)||void 0===t||t.update({params:e.params})}layout(e,t){}dispose(){var e;this._onDidFocus.dispose(),this._onDidBlur.dispose(),null===(e=this.part)||void 0===e||e.dispose()}}class d{get element(){return this._element}constructor(e,t,n){this.id=e,this.component=t,this.reactPortalStore=n,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new p(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi,tabLocation:e.tabLocation})}update(e){var t;null===(t=this.part)||void 0===t||t.update({params:e.params})}layout(e,t){}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}class m{get element(){return this._element}constructor(e,t,n){this.id=e,this.component=t,this.reactPortalStore=n,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new p(this.element,this.reactPortalStore,this.component,{group:e.group,containerApi:e.containerApi})}focus(){}update(e){var t,n,r;this.parameters&&(this.parameters.params=e.params),null===(t=this.part)||void 0===t||t.update({params:null!==(r=null===(n=this.parameters)||void 0===n?void 0:n.params)&&void 0!==r?r:{}})}layout(e,t){}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}class h{get element(){return this._element}get part(){return this._part}constructor(e,t,n){this.component=e,this.reactPortalStore=t,this._group=n,this.mutableDisposable=new r.Gi,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.mutableDisposable.value=new r.KU(this._group.model.onDidAddPanel((()=>{this.updatePanels()})),this._group.model.onDidRemovePanel((()=>{this.updatePanels()})),this._group.model.onDidActivePanelChange((()=>{this.updateActivePanel()})),e.api.onDidActiveChange((()=>{this.updateGroupActive()}))),this._part=new p(this.element,this.reactPortalStore,this.component,{api:e.api,containerApi:e.containerApi,panels:this._group.model.panels,activePanel:this._group.model.activePanel,isGroupActive:this._group.api.isActive,group:this._group})}dispose(){var e;this.mutableDisposable.dispose(),null===(e=this._part)||void 0===e||e.dispose()}update(e){var t;null===(t=this._part)||void 0===t||t.update(e.params)}updatePanels(){this.update({params:{panels:this._group.model.panels}})}updateActivePanel(){this.update({params:{activePanel:this._group.model.activePanel}})}updateGroupActive(){this.update({params:{isGroupActive:this._group.api.isActive}})}}function f(e,t){return e?n=>new h(e,t,n):void 0}const v="props.defaultTabComponent";const w=o.forwardRef(((e,t)=>{const n=o.useRef(null),a=o.useRef(),[i,s]=l();o.useImperativeHandle(t,(()=>n.current),[]);const c=o.useRef({});return o.useEffect((()=>{const t={};r.gq.forEach((n=>{const r=n,o=e[r];r in e&&o!==c.current[r]&&(t[r]=o)})),a.current&&a.current.updateOptions(t),c.current=e}),r.gq.map((t=>e[t]))),o.useEffect((()=>{var t;if(!n.current)return;const o=null!==(t=e.tabComponents)&&void 0!==t?t:{};e.defaultTabComponent&&(o[v]=e.defaultTabComponent);const i={createLeftHeaderActionComponent:f(e.leftHeaderActionsComponent,{addPortal:s}),createRightHeaderActionComponent:f(e.rightHeaderActionsComponent,{addPortal:s}),createPrefixHeaderActionComponent:f(e.prefixHeaderActionsComponent,{addPortal:s}),createComponent:t=>new u(t.id,e.components[t.name],{addPortal:s}),createTabComponent:e=>new d(e.id,o[e.name],{addPortal:s}),createWatermarkComponent:e.watermarkComponent?()=>new m("watermark",e.watermarkComponent,{addPortal:s}):void 0,defaultTabComponent:e.defaultTabComponent?v:void 0},c=(0,r.lT)(n.current,Object.assign(Object.assign({},function(e){return r.gq.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}(e)),i)),{clientWidth:p,clientHeight:l}=n.current;return c.layout(p,l),e.onReady&&e.onReady({api:c}),a.current=c,()=>{a.current=void 0,c.dispose()}}),[]),o.useEffect((()=>{if(!a.current)return()=>{};const t=a.current.onDidDrop((t=>{e.onDidDrop&&e.onDidDrop(t)}));return()=>{t.dispose()}}),[e.onDidDrop]),o.useEffect((()=>{if(!a.current)return()=>{};const t=a.current.onWillDrop((t=>{e.onWillDrop&&e.onWillDrop(t)}));return()=>{t.dispose()}}),[e.onWillDrop]),o.useEffect((()=>{a.current&&a.current.updateOptions({createComponent:t=>new u(t.id,e.components[t.name],{addPortal:s})})}),[e.components]),o.useEffect((()=>{var t;if(!a.current)return;const n=null!==(t=e.tabComponents)&&void 0!==t?t:{};e.defaultTabComponent&&(n[v]=e.defaultTabComponent),a.current.updateOptions({defaultTabComponent:e.defaultTabComponent?v:void 0,createTabComponent:e=>new d(e.id,n[e.name],{addPortal:s})})}),[e.tabComponents,e.defaultTabComponent]),o.useEffect((()=>{a.current&&a.current.updateOptions({createWatermarkComponent:e.watermarkComponent?()=>new m("watermark",e.watermarkComponent,{addPortal:s}):void 0})}),[e.watermarkComponent]),o.useEffect((()=>{a.current&&a.current.updateOptions({createRightHeaderActionComponent:f(e.rightHeaderActionsComponent,{addPortal:s})})}),[e.rightHeaderActionsComponent]),o.useEffect((()=>{a.current&&a.current.updateOptions({createLeftHeaderActionComponent:f(e.leftHeaderActionsComponent,{addPortal:s})})}),[e.leftHeaderActionsComponent]),o.useEffect((()=>{a.current&&a.current.updateOptions({createPrefixHeaderActionComponent:f(e.prefixHeaderActionsComponent,{addPortal:s})})}),[e.prefixHeaderActionsComponent]),o.createElement("div",{style:{height:"100%",width:"100%"},ref:n},i)}));w.displayName="DockviewComponent";const P=()=>o.createElement("svg",{height:"11",width:"11",viewBox:"0 0 28 28","aria-hidden":"false",focusable:!1,className:"dv-svg"},o.createElement("path",{d:"M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z"}));var C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const g=e=>{var{api:t,containerApi:n,params:r,hideClose:a,closeActionOverride:i,onPointerDown:s,onPointerUp:c,onPointerLeave:p,tabLocation:l}=e,u=C(e,["api","containerApi","params","hideClose","closeActionOverride","onPointerDown","onPointerUp","onPointerLeave","tabLocation"]);const d=function(e){const[t,n]=o.useState(e.title);return o.useEffect((()=>{const r=e.onDidTitleChange((e=>{n(e.title)}));return t!==e.title&&n(e.title),()=>{r.dispose()}}),[e]),t}(t),m=o.useRef(!1),h=o.useCallback((e=>{e.preventDefault(),i?i():t.close()}),[t,i]),f=o.useCallback((e=>{e.preventDefault()}),[]),v=o.useCallback((e=>{m.current=1===e.button,null==s||s(e)}),[s]),w=o.useCallback((e=>{m&&1===e.button&&!a&&(m.current=!1,h(e)),null==c||c(e)}),[c,h,a]),g=o.useCallback((e=>{m.current=!1,null==p||p(e)}),[p]);return o.createElement("div",Object.assign({"data-testid":"dockview-dv-default-tab"},u,{onPointerDown:v,onPointerUp:w,onPointerLeave:g,className:"dv-default-tab"}),o.createElement("span",{className:"dv-default-tab-content"},d),!a&&o.createElement("div",{className:"dv-default-tab-action",onPointerDown:f,onClick:h},o.createElement(P,null)))};class b extends r.hJ{constructor(e,t,n,r){super(e,t),this.reactComponent=n,this.reactPortalStore=r}getComponent(){var e,t;return new p(this.element,this.reactPortalStore,this.reactComponent,{params:null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{},api:this.api,containerApi:new r.fX(this._params.accessor)})}}const _=o.forwardRef(((e,t)=>{const n=o.useRef(null),a=o.useRef(),[i,s]=l();o.useImperativeHandle(t,(()=>n.current),[]);const c=o.useRef({});return o.useEffect((()=>{const t={};r.mH.forEach((n=>{const r=n,o=e[r];r in e&&o!==c.current[r]&&(t[r]=o)})),a.current&&a.current.updateOptions(t),c.current=e}),r.mH.map((t=>e[t]))),o.useEffect((()=>{if(!n.current)return()=>{};const t={createComponent:t=>new b(t.id,t.name,e.components[t.name],{addPortal:s})},o=(0,r.cO)(n.current,Object.assign(Object.assign({},function(e){return r.mH.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}(e)),t)),{clientWidth:i,clientHeight:c}=n.current;return o.layout(i,c),e.onReady&&e.onReady({api:o}),a.current=o,()=>{a.current=void 0,o.dispose()}}),[]),o.useEffect((()=>{a.current&&a.current.updateOptions({createComponent:t=>new b(t.id,t.name,e.components[t.name],{addPortal:s})})}),[e.components]),o.createElement("div",{style:{height:"100%",width:"100%"},ref:n},i)}));_.displayName="SplitviewComponent";class y extends r.Tg{constructor(e,t,n,r){super(e,t),this.reactComponent=n,this.reactPortalStore=r}getComponent(){var e,t;return new p(this.element,this.reactPortalStore,this.reactComponent,{params:null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{},api:this.api,containerApi:new r.Tn(this._params.accessor)})}}const E=o.forwardRef(((e,t)=>{const n=o.useRef(null),a=o.useRef(),[i,s]=l();o.useImperativeHandle(t,(()=>n.current),[]);const c=o.useRef({});return o.useEffect((()=>{const t={};r.kQ.forEach((n=>{const r=n,o=e[r];r in e&&o!==c.current[r]&&(t[r]=o)})),a.current&&a.current.updateOptions(t),c.current=e}),r.kQ.map((t=>e[t]))),o.useEffect((()=>{if(!n.current)return()=>{};const t={createComponent:t=>new y(t.id,t.name,e.components[t.name],{addPortal:s})},o=(0,r.rc)(n.current,Object.assign(Object.assign({},function(e){return r.kQ.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}(e)),t)),{clientWidth:i,clientHeight:c}=n.current;return o.layout(i,c),e.onReady&&e.onReady({api:o}),a.current=o,()=>{a.current=void 0,o.dispose()}}),[]),o.useEffect((()=>{a.current&&a.current.updateOptions({createComponent:t=>new y(t.id,t.name,e.components[t.name],{addPortal:s})})}),[e.components]),o.createElement("div",{style:{height:"100%",width:"100%"},ref:n},i)}));E.displayName="GridviewComponent";class D{get element(){return this._element}constructor(e,t,n){this.id=e,this.component=t,this.reactPortalStore=n,this._element=document.createElement("div"),this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new p(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,title:e.title,containerApi:e.containerApi})}toJSON(){return{id:this.id}}update(e){var t;null===(t=this.part)||void 0===t||t.update(e.params)}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}const O=o.forwardRef(((e,t)=>{const n=o.useRef(null),a=o.useRef(),[i,s]=l();o.useImperativeHandle(t,(()=>n.current),[]);const c=o.useRef({});return o.useEffect((()=>{const t={};r.jl.forEach((n=>{const r=n,o=e[r];r in e&&o!==c.current[r]&&(t[r]=o)})),a.current&&a.current.updateOptions(t),c.current=e}),r.jl.map((t=>e[t]))),o.useEffect((()=>{var t;if(!n.current)return()=>{};const o=null!==(t=e.headerComponents)&&void 0!==t?t:{},i={createComponent:t=>new D(t.id,e.components[t.name],{addPortal:s}),createHeaderComponent:e=>new D(e.id,o[e.name],{addPortal:s})},c=(0,r.iz)(n.current,Object.assign(Object.assign({},function(e){return r.jl.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}(e)),i)),{clientWidth:p,clientHeight:l}=n.current;return c.layout(p,l),e.onReady&&e.onReady({api:c}),a.current=c,()=>{a.current=void 0,c.dispose()}}),[]),o.useEffect((()=>{a.current&&a.current.updateOptions({createComponent:t=>new D(t.id,e.components[t.name],{addPortal:s})})}),[e.components]),o.useEffect((()=>{var t;if(!a.current)return;const n=null!==(t=e.headerComponents)&&void 0!==t?t:{};a.current.updateOptions({createHeaderComponent:e=>new D(e.id,n[e.name],{addPortal:s})})}),[e.headerComponents]),o.useEffect((()=>{if(!a.current)return()=>{};const t=a.current.onDidDrop((t=>{e.onDidDrop&&e.onDidDrop(t)}));return()=>{t.dispose()}}),[e.onDidDrop]),o.createElement("div",{style:{height:"100%",width:"100%"},ref:n},i)}));O.displayName="PaneviewComponent"}}]);
//# sourceMappingURL=6475.9ed1489c.js.map