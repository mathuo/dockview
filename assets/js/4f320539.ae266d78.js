(self.webpackChunkdockview_docs=self.webpackChunkdockview_docs||[]).push([[4660],{4284:(e,t,i)=>{"use strict";i.d(t,{CJ:()=>Et,KU:()=>f,GW:()=>l,O4:()=>v,Gi:()=>_,Tn:()=>pe,Tg:()=>Ze,g1:()=>F,i5:()=>j,gq:()=>je,kQ:()=>se,jl:()=>be,mH:()=>$,fX:()=>de,hJ:()=>Lt,lT:()=>Tt,rc:()=>Mt,iz:()=>Wt,cO:()=>Rt,M:()=>we,UM:()=>tt,Zc:()=>st,Hx:()=>Ke,MV:()=>it,Qp:()=>Qe,Lt:()=>ot,TR:()=>nt,ZS:()=>et});class n{}class s extends n{constructor(e,t,i){super(),this.viewId=e,this.groupId=t,this.panelId=i}}class o extends n{constructor(e,t){super(),this.viewId=e,this.paneId=t}}class r{constructor(){}static getInstance(){return r.INSTANCE}hasData(e){return e&&e===this.proto}clearData(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}getData(e){if(this.hasData(e))return this.data}setData(e,t){t&&(this.data=e,this.proto=t)}}function a(){const e=r.getInstance();if(e.hasData(s.prototype))return e.getData(s.prototype)[0]}function h(){const e=r.getInstance();if(e.hasData(o.prototype))return e.getData(o.prototype)[0]}var d,l;r.INSTANCE=new r,function(e){e.any=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{const i=t.map((t=>t(e)));return{dispose:()=>{i.forEach((e=>{e.dispose()}))}}}}}(d||(d={}));class p{constructor(){this._defaultPrevented=!1}get defaultPrevented(){return this._defaultPrevented}preventDefault(){this._defaultPrevented=!0}}class c{constructor(){this._isAccepted=!1}get isAccepted(){return this._isAccepted}accept(){this._isAccepted=!0}}class u{static create(){var e;return new u(null!==(e=(new Error).stack)&&void 0!==e?e:"")}constructor(e){this.value=e}print(){console.warn("dockview: stacktrace",this.value)}}class m{constructor(e,t){this.callback=e,this.stacktrace=t}}class v{static setLeakageMonitorEnabled(e){e!==v.ENABLE_TRACKING&&v.MEMORY_LEAK_WATCHER.clear(),v.ENABLE_TRACKING=e}get value(){return this._last}constructor(e){this.options=e,this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>{var t;(null===(t=this.options)||void 0===t?void 0:t.replay)&&void 0!==this._last&&e(this._last);const i=new m(e,v.ENABLE_TRACKING?u.create():void 0);return this._listeners.push(i),{dispose:()=>{const e=this._listeners.indexOf(i);e>-1?this._listeners.splice(e,1):v.ENABLE_TRACKING}}},v.ENABLE_TRACKING&&v.MEMORY_LEAK_WATCHER.add(this._event,u.create())),this._event}fire(e){this._last=e;for(const t of this._listeners)t.callback(e)}dispose(){this._disposed||(this._disposed=!0,this._listeners.length>0&&(v.ENABLE_TRACKING&&queueMicrotask((()=>{var e;for(const t of this._listeners)console.warn("dockview: stacktrace",null===(e=t.stacktrace)||void 0===e?void 0:e.print())})),this._listeners=[]),v.ENABLE_TRACKING&&this._event&&v.MEMORY_LEAK_WATCHER.delete(this._event))}}function g(e,t,i,n){return e.addEventListener(t,i,n),{dispose:()=>{e.removeEventListener(t,i,n)}}}v.ENABLE_TRACKING=!1,v.MEMORY_LEAK_WATCHER=new class{constructor(){this.events=new Map}get size(){return this.events.size}add(e,t){this.events.set(e,t)}delete(e){this.events.delete(e)}clear(){this.events.clear()}};class w{constructor(){this._onFired=new v,this._currentFireCount=0,this._queued=!1,this.onEvent=e=>{const t=this._currentFireCount;return this._onFired.event((()=>{this._currentFireCount>t&&e()}))}}fire(){this._currentFireCount++,this._queued||(this._queued=!0,queueMicrotask((()=>{this._queued=!1,this._onFired.fire()})))}dispose(){this._onFired.dispose()}}!function(e){e.NONE={dispose:()=>{}},e.from=function(e){return{dispose:()=>{e()}}}}(l||(l={}));class f{get isDisposed(){return this._isDisposed}constructor(){this._isDisposed=!1;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._disposables=t}addDisposables(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>this._disposables.push(e)))}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposables.forEach((e=>e.dispose())),this._disposables=[])}}class _{constructor(){this._disposable=l.NONE}set value(e){this._disposable&&this._disposable.dispose(),this._disposable=e}dispose(){this._disposable&&(this._disposable.dispose(),this._disposable=l.NONE)}}class D extends f{constructor(e){super(),this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._value=null,this.addDisposables(this._onDidChange,b(e,(e=>{const t=e.target.scrollWidth>e.target.clientWidth,i=e.target.scrollHeight>e.target.clientHeight;this._value={hasScrollX:t,hasScrollY:i},this._onDidChange.fire(this._value)})))}}function b(e,t){const i=new ResizeObserver((e=>{requestAnimationFrame((()=>{const i=e[0];t(i)}))}));return i.observe(e),{dispose:()=>{i.unobserve(e),i.disconnect()}}}const y=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of i)e.classList.contains(s)&&e.classList.remove(s)},C=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of i)e.classList.contains(s)||e.classList.add(s)},x=(e,t,i)=>{const n=e.classList.contains(t);i&&!n&&e.classList.add(t),!i&&n&&e.classList.remove(t)};function S(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function A(e){return new z(e)}class z extends f{constructor(e){super(),this._onDidFocus=new v,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new v,this.onDidBlur=this._onDidBlur.event,this.addDisposables(this._onDidFocus,this._onDidBlur);let t=S(document.activeElement,e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,window.setTimeout((()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{S(document.activeElement,e)!==t&&(t?s():n())},this.addDisposables(g(e,"focus",n,!0)),this.addDisposables(g(e,"blur",s,!0))}refreshState(){this._refreshStateHandler()}}const E="dv-quasiPreventDefault";function P(e){return e[E]}function O(e){const{left:t,top:i,width:n,height:s}=e.getBoundingClientRect();return{left:t+window.scrollX,top:i+window.scrollY,width:n,height:s}}function G(e){void 0===e&&(e=document);const t=function(e){const t=[];return function i(n){if(n.nodeType===Node.ELEMENT_NODE){e.includes(n.tagName)&&t.push(n),n.shadowRoot&&i(n.shadowRoot);for(const e of n.children)i(e)}}(document.documentElement),t}(["IFRAME","WEBVIEW"]),i=new WeakMap;for(const n of t)i.set(n,n.style.pointerEvents),n.style.pointerEvents="none";return{release:()=>{var e;for(const n of t)n.style.pointerEvents=null!==(e=i.get(n))&&void 0!==e?e:"auto";t.splice(0,t.length)}}}class I{constructor(e){this.element=e,this._classNames=[]}setClassNames(e){for(const t of this._classNames)x(this.element,t,!1);this._classNames=e.split(" ").filter((e=>e.trim().length>0));for(const t of this._classNames)x(this.element,t,!0)}}function V(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function N(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function k(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function L(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}function T(e,t){const i=e.findIndex((e=>e===t));return i>-1&&(e.splice(i,1),!0)}const R=(e,t,i)=>t>i?t:Math.min(i,Math.max(e,t)),M=()=>{let e=1;return{next:()=>(e++).toString()}},W=(e,t)=>{const i=[];if("number"!=typeof t&&(t=e,e=0),e<=t)for(let n=e;n<t;n++)i.push(n);else for(let n=e;n>t;n--)i.push(n);return i};class H{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return void 0===this._cachedVisibleSize}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}setVisible(e,t){var i;e!==this.visible&&(e?(this.size=R(null!==(i=this._cachedVisibleSize)&&void 0!==i?i:0,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}dispose(){return this.disposable.dispose(),this.view}}var j,B,F,U;!function(e){e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(j||(j={})),function(e){e[e.MAXIMUM=0]="MAXIMUM",e[e.MINIMUM=1]="MINIMUM",e[e.DISABLED=2]="DISABLED",e[e.ENABLED=3]="ENABLED"}(B||(B={})),function(e){e.Low="low",e.High="high",e.Normal="normal"}(F||(F={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(U||(U={}));class J{get contentSize(){return this._contentSize}get size(){return this._size}set size(e){this._size=e}get orthogonalSize(){return this._orthogonalSize}set orthogonalSize(e){this._orthogonalSize=e}get length(){return this.viewItems.length}get proportions(){return this._proportions?[...this._proportions]:void 0}get orientation(){return this._orientation}set orientation(e){this._orientation=e;const t=this.size;this.size=this.orthogonalSize,this.orthogonalSize=t,y(this.element,"dv-horizontal","dv-vertical"),this.element.classList.add(this.orientation==j.HORIZONTAL?"dv-horizontal":"dv-vertical")}get minimumSize(){return this.viewItems.reduce(((e,t)=>e+t.minimumSize),0)}get maximumSize(){return 0===this.length?Number.POSITIVE_INFINITY:this.viewItems.reduce(((e,t)=>e+t.maximumSize),0)}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}get disabled(){return this._disabled}set disabled(e){this._disabled=e,x(this.element,"dv-splitview-disabled",e)}get margin(){return this._margin}set margin(e){this._margin=e,x(this.element,"dv-splitview-has-margin",0!==e)}constructor(e,t){var i,n,s=this;this.container=e,this.viewItems=[],this.sashes=[],this._size=0,this._orthogonalSize=0,this._contentSize=0,this._proportions=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this._disabled=!1,this._margin=0,this._onDidSashEnd=new v,this.onDidSashEnd=this._onDidSashEnd.event,this._onDidAddView=new v,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new v,this.onDidRemoveView=this._onDidRemoveView.event,this.resize=function(e,t,i,n,o,r,a,h,d){if(void 0===i&&(i=s.viewItems.map((e=>e.size))),void 0===r&&(r=Number.NEGATIVE_INFINITY),void 0===a&&(a=Number.POSITIVE_INFINITY),e<0||e>s.viewItems.length)return 0;const l=W(e,-1),p=W(e+1,s.viewItems.length);if(o)for(const s of o)k(l,s),k(p,s);if(n)for(const s of n)L(l,s),L(p,s);const c=l.map((e=>s.viewItems[e])),u=l.map((e=>i[e])),m=p.map((e=>s.viewItems[e])),v=p.map((e=>i[e])),g=l.reduce(((e,t)=>e+s.viewItems[t].minimumSize-i[t]),0),w=l.reduce(((e,t)=>e+s.viewItems[t].maximumSize-i[t]),0),f=0===p.length?Number.POSITIVE_INFINITY:p.reduce(((e,t)=>e+i[t]-s.viewItems[t].minimumSize),0),_=0===p.length?Number.NEGATIVE_INFINITY:p.reduce(((e,t)=>e+i[t]-s.viewItems[t].maximumSize),0),D=Math.max(g,_),b=Math.min(f,w);let y=!1;if(h){const e=s.viewItems[h.index],i=t>=h.limitDelta;y=i!==e.visible,e.setVisible(i,h.size)}if(!y&&d){const e=s.viewItems[d.index],i=t<d.limitDelta;y=i!==e.visible,e.setVisible(i,d.size)}if(y)return s.resize(e,t,i,n,o,r,a);let C=0,x=R(t,D,b);for(let s=0;s<c.length;s++){const e=c[s],t=R(u[s]+x,e.minimumSize,e.maximumSize),i=t-u[s];C+=i,x-=i,e.size=t}let S=C;for(let s=0;s<m.length;s++){const e=m[s],t=R(v[s]-S,e.minimumSize,e.maximumSize);S+=t-v[s],e.size=t}return t},this._orientation=null!==(i=t.orientation)&&void 0!==i?i:j.VERTICAL,this.element=this.createContainer(),this.margin=null!==(n=t.margin)&&void 0!==n?n:0,this.proportionalLayout=void 0===t.proportionalLayout||!!t.proportionalLayout,this.viewContainer=this.createViewContainer(),this.sashContainer=this.createSashContainer(),this.element.appendChild(this.sashContainer),this.element.appendChild(this.viewContainer),this.container.appendChild(this.element),this.style(t.styles),t.descriptor&&(this._size=t.descriptor.size,t.descriptor.views.forEach(((e,t)=>{const i=void 0===e.visible||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.addView(n,i,t,!0)})),this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.saveProportions())}style(e){"transparent"===(null==e?void 0:e.separatorBorder)?(y(this.element,"dv-separator-border"),this.element.style.removeProperty("--dv-separator-border")):(C(this.element,"dv-separator-border"),(null==e?void 0:e.separatorBorder)&&this.element.style.setProperty("--dv-separator-border",e.separatorBorder))}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const i=this.viewItems[e];i.setVisible(t,i.size),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}resizeView(e,t){if(e<0||e>=this.viewItems.length)return;const i=W(this.viewItems.length).filter((t=>t!==e)),n=[...i.filter((e=>this.viewItems[e].priority===F.Low)),e],s=i.filter((e=>this.viewItems[e].priority===F.High)),o=this.viewItems[e];t=Math.round(t),t=R(t,o.minimumSize,Math.min(o.maximumSize,this._size)),o.size=t,this.relayout(n,s)}getViews(){return this.viewItems.map((e=>e.view))}onDidChange(e,t){const i=this.viewItems.indexOf(e);if(i<0||i>=this.viewItems.length)return;t="number"==typeof t?t:e.size,t=R(t,e.minimumSize,e.maximumSize),e.size=t;const n=W(this.viewItems.length).filter((e=>e!==i)),s=[...n.filter((e=>this.viewItems[e].priority===F.Low)),i],o=n.filter((e=>this.viewItems[e].priority===F.High));this.relayout([...s,i],o)}addView(e,t,i,n){void 0===t&&(t={type:"distribute"}),void 0===i&&(i=this.viewItems.length);const s=document.createElement("div");let o;s.className="dv-view",s.appendChild(e.element),o="number"==typeof t?t:"split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize;const r=e.onDidChange((e=>this.onDidChange(a,e.size))),a=new H(s,e,o,{dispose:()=>{r.dispose(),this.viewContainer.removeChild(s)}});if(i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i)),this.viewItems.splice(i,0,a),this.viewItems.length>1){const e=document.createElement("div");e.className="dv-sash";const t=t=>{for(const e of this.viewItems)e.enabled=!1;const i=G(),n=this._orientation===j.HORIZONTAL?t.clientX:t.clientY,s=function(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i;return-1}(this.sashes,(t=>t.container===e)),o=this.viewItems.map((e=>e.size));let r,a;const h=W(s,-1),d=W(s+1,this.viewItems.length),l=h.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-o[t])),0),p=h.reduce(((e,t)=>e+(this.viewItems[t].viewMaximumSize-o[t])),0),c=0===d.length?Number.POSITIVE_INFINITY:d.reduce(((e,t)=>e+(o[t]-this.viewItems[t].minimumSize)),0),u=0===d.length?Number.NEGATIVE_INFINITY:d.reduce(((e,t)=>e+(o[t]-this.viewItems[t].viewMaximumSize)),0),m=Math.max(l,u),v=Math.min(c,p),g=this.findFirstSnapIndex(h),w=this.findFirstSnapIndex(d);if("number"==typeof g){const e=this.viewItems[g],t=Math.floor(e.viewMinimumSize/2);r={index:g,limitDelta:e.visible?m-t:m+t,size:e.size}}if("number"==typeof w){const e=this.viewItems[w],t=Math.floor(e.viewMinimumSize/2);a={index:w,limitDelta:e.visible?v+t:v-t,size:e.size}}const f=e=>{const t=(this._orientation===j.HORIZONTAL?e.clientX:e.clientY)-n;this.resize(s,t,o,void 0,void 0,m,v,r,a),this.distributeEmptySpace(),this.layoutViews()},_=()=>{for(const e of this.viewItems)e.enabled=!0;i.release(),this.saveProportions(),document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",_),document.removeEventListener("pointercancel",_),this._onDidSashEnd.fire(void 0)};document.addEventListener("pointermove",f),document.addEventListener("pointerup",_),document.addEventListener("pointercancel",_)};e.addEventListener("pointerdown",t);const i={container:e,disposable:()=>{e.removeEventListener("pointerdown",t),this.sashContainer.removeChild(e)}};this.sashContainer.appendChild(e),this.sashes.push(i)}n||this.relayout([i]),n||"number"==typeof t||"distribute"!==t.type||this.distributeViewSizes(),this._onDidAddView.fire(e)}distributeViewSizes(){const e=[];let t=0;for(const r of this.viewItems)r.maximumSize-r.minimumSize>0&&(e.push(r),t+=r.size);const i=Math.floor(t/e.length);for(const r of e)r.size=R(i,r.minimumSize,r.maximumSize);const n=W(this.viewItems.length),s=n.filter((e=>this.viewItems[e].priority===F.Low)),o=n.filter((e=>this.viewItems[e].priority===F.High));this.relayout(s,o)}removeView(e,t,i){void 0===i&&(i=!1);const n=this.viewItems.splice(e,1)[0];if(n.dispose(),this.viewItems.length>=1){const t=Math.max(e-1,0);this.sashes.splice(t,1)[0].disposable()}return i||this.relayout(),t&&"distribute"===t.type&&this.distributeViewSizes(),this._onDidRemoveView.fire(n.view),n.view}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}moveView(e,t){const i=this.getViewCachedVisibleSize(e),n=void 0===i?this.getViewSize(e):U.Invisible(i),s=this.removeView(e,void 0,!0);this.addView(s,n,t)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.orthogonalSize=t,this.proportions){let t=0;for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"==typeof s?t+=s:e-=n.size}for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"==typeof s&&t>0&&(n.size=R(Math.round(s*e/t),n.minimumSize,n.maximumSize))}}else{const t=W(this.viewItems.length),n=t.filter((e=>this.viewItems[e].priority===F.Low)),s=t.filter((e=>this.viewItems[e].priority===F.High));this.resize(this.viewItems.length-1,e-i,void 0,n,s)}this.distributeEmptySpace(),this.layoutViews()}relayout(e,t){const i=this.viewItems.reduce(((e,t)=>e+t.size),0);this.resize(this.viewItems.length-1,this._size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}distributeEmptySpace(e){const t=this.viewItems.reduce(((e,t)=>e+t.size),0);let i=this.size-t;const n=W(this.viewItems.length-1,-1),s=n.filter((e=>this.viewItems[e].priority===F.Low)),o=n.filter((e=>this.viewItems[e].priority===F.High));for(const r of o)k(n,r);for(const r of s)L(n,r);"number"==typeof e&&L(n,e);for(let r=0;0!==i&&r<n.length;r++){const e=this.viewItems[n[r]],t=R(e.size+i,e.minimumSize,e.maximumSize);i-=t-e.size,e.size=t}}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this._proportions=this.viewItems.map((e=>e.visible?e.size/this._contentSize:void 0)))}layoutViews(){if(this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.updateSashEnablement(),0===this.viewItems.length)return;const e=this.viewItems.filter((e=>e.visible)),t=Math.max(0,e.length-1),i=this.margin*t/Math.max(1,e.length);let n=0;const s=[],o=this.viewItems.reduce(((e,t,i)=>{const n=t.visible?1:0;return 0===i?e.push(n):e.push(e[i-1]+n),e}),[]);this.viewItems.forEach(((e,r)=>{n+=this.viewItems[r].size,s.push(n);const a=e.visible?e.size-i:0,h=Math.max(0,o[r]-1),d=0===r||0===h?0:s[r-1]+h/t*i;if(r<this.viewItems.length-1){const t=e.visible?d+a-2+this.margin/2:d;this._orientation===j.HORIZONTAL&&(this.sashes[r].container.style.left=`${t}px`,this.sashes[r].container.style.top="0px"),this._orientation===j.VERTICAL&&(this.sashes[r].container.style.left="0px",this.sashes[r].container.style.top=`${t}px`)}this._orientation===j.HORIZONTAL&&(e.container.style.width=`${a}px`,e.container.style.left=`${d}px`,e.container.style.top="",e.container.style.height=""),this._orientation===j.VERTICAL&&(e.container.style.height=`${a}px`,e.container.style.top=`${d}px`,e.container.style.width="",e.container.style.left=""),e.view.layout(e.size-i,this._orthogonalSize)}))}findFirstSnapIndex(e){for(const t of e){const e=this.viewItems[t];if(e.visible&&e.snap)return t}for(const t of e){const e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}updateSashEnablement(){let e=!1;const t=this.viewItems.map((t=>e=t.size-t.minimumSize>0||e));e=!1;const i=this.viewItems.map((t=>e=t.maximumSize-t.size>0||e)),n=[...this.viewItems].reverse();e=!1;const s=n.map((t=>e=t.size-t.minimumSize>0||e)).reverse();e=!1;const o=n.map((t=>e=t.maximumSize-t.size>0||e)).reverse();let r=0;for(let a=0;a<this.sashes.length;a++){const e=this.sashes[a];r+=this.viewItems[a].size;const n=!(t[a]&&o[a+1]),h=!(i[a]&&s[a+1]);if(n&&h){const i=W(a,-1),n=W(a+1,this.viewItems.length),o=this.findFirstSnapIndex(i),h=this.findFirstSnapIndex(n),d="number"==typeof o&&!this.viewItems[o].visible,l="number"==typeof h&&!this.viewItems[h].visible;d&&s[a]&&(r>0||this.startSnappingEnabled)?this.updateSash(e,B.MINIMUM):l&&t[a]&&(r<this._contentSize||this.endSnappingEnabled)?this.updateSash(e,B.MAXIMUM):this.updateSash(e,B.DISABLED)}else n&&!h?this.updateSash(e,B.MINIMUM):!n&&h?this.updateSash(e,B.MAXIMUM):this.updateSash(e,B.ENABLED)}}updateSash(e,t){x(e.container,"dv-disabled",t===B.DISABLED),x(e.container,"dv-enabled",t===B.ENABLED),x(e.container,"dv-maximum",t===B.MAXIMUM),x(e.container,"dv-minimum",t===B.MINIMUM)}createViewContainer(){const e=document.createElement("div");return e.className="dv-view-container",e}createSashContainer(){const e=document.createElement("div");return e.className="dv-sash-container",e}createContainer(){const e=document.createElement("div"),t=this._orientation===j.HORIZONTAL?"dv-horizontal":"dv-vertical";return e.className=`dv-split-view-container ${t}`,e}dispose(){this._onDidSashEnd.dispose(),this._onDidAddView.dispose(),this._onDidRemoveView.dispose();for(let e=0;e<this.element.children.length;e++)if(this.element.children.item(e)===this.element){this.element.removeChild(this.element);break}for(const e of this.viewItems)e.dispose();this.element.remove()}}const $=(()=>{const e={orientation:void 0,descriptor:void 0,proportionalLayout:void 0,styles:void 0,margin:void 0,disableAutoResizing:void 0,className:void 0};return Object.keys(e)})();class Z extends f{get onDidAddView(){return this.splitview.onDidAddView}get onDidRemoveView(){return this.splitview.onDidRemoveView}get minimumSize(){return this.splitview.minimumSize}get maximumSize(){return this.splitview.maximumSize}get orientation(){return this.splitview.orientation}get size(){return this.splitview.size}get orthogonalSize(){return this.splitview.orthogonalSize}constructor(e,t){var i;super(),this.paneItems=[],this.skipAnimation=!1,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._orientation=null!==(i=t.orientation)&&void 0!==i?i:j.VERTICAL,this.element=document.createElement("div"),this.element.className="dv-pane-container",e.appendChild(this.element),this.splitview=new J(this.element,{orientation:this._orientation,proportionalLayout:!1,descriptor:t.descriptor}),this.getPanes().forEach((e=>{const t=new f(e.onDidChangeExpansionState((()=>{this.setupAnimation(),this._onDidChange.fire(void 0)}))),i={pane:e,disposable:{dispose:()=>{t.dispose()}}};this.paneItems.push(i),e.orthogonalSize=this.splitview.orthogonalSize})),this.addDisposables(this._onDidChange,this.splitview.onDidSashEnd((()=>{this._onDidChange.fire(void 0)})),this.splitview.onDidAddView((()=>{this._onDidChange.fire()})),this.splitview.onDidRemoveView((()=>{this._onDidChange.fire()})))}setViewVisible(e,t){this.splitview.setViewVisible(e,t)}addPane(e,t,i,n){void 0===i&&(i=this.splitview.length),void 0===n&&(n=!1);const s=e.onDidChangeExpansionState((()=>{this.setupAnimation(),this._onDidChange.fire(void 0)})),o={pane:e,disposable:{dispose:()=>{s.dispose()}}};this.paneItems.splice(i,0,o),e.orthogonalSize=this.splitview.orthogonalSize,this.splitview.addView(e,t,i,n)}getViewSize(e){return this.splitview.getViewSize(e)}getPanes(){return this.splitview.getViews()}removePane(e,t){void 0===t&&(t={skipDispose:!1});const i=this.paneItems.splice(e,1)[0];return this.splitview.removeView(e),t.skipDispose||(i.disposable.dispose(),i.pane.dispose()),i}moveView(e,t){if(e===t)return;const i=this.removePane(e,{skipDispose:!0});this.skipAnimation=!0;try{this.addPane(i.pane,i.pane.size,t,!1)}finally{this.skipAnimation=!1}}layout(e,t){this.splitview.layout(e,t)}setupAnimation(){this.skipAnimation||(this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),C(this.element,"dv-animated"),this.animationTimer=setTimeout((()=>{this.animationTimer=void 0,y(this.element,"dv-animated")}),200))}dispose(){super.dispose(),this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),this.paneItems.forEach((e=>{e.disposable.dispose(),e.pane.dispose()})),this.paneItems=[],this.splitview.dispose(),this.element.remove()}}class X{get minimumWidth(){return this.view.minimumWidth}get maximumWidth(){return this.view.maximumWidth}get minimumHeight(){return this.view.minimumHeight}get maximumHeight(){return this.view.maximumHeight}get priority(){return this.view.priority}get snap(){return this.view.snap}get minimumSize(){return this.orientation===j.HORIZONTAL?this.minimumHeight:this.minimumWidth}get maximumSize(){return this.orientation===j.HORIZONTAL?this.maximumHeight:this.maximumWidth}get minimumOrthogonalSize(){return this.orientation===j.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return this.orientation===j.HORIZONTAL?this.maximumWidth:this.maximumHeight}get orthogonalSize(){return this._orthogonalSize}get size(){return this._size}get element(){return this.view.element}get width(){return this.orientation===j.HORIZONTAL?this.orthogonalSize:this.size}get height(){return this.orientation===j.HORIZONTAL?this.size:this.orthogonalSize}constructor(e,t,i,n){void 0===n&&(n=0),this.view=e,this.orientation=t,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._orthogonalSize=i,this._size=n,this._disposable=this.view.onDidChange((e=>{e?this._onDidChange.fire({size:this.orientation===j.VERTICAL?e.width:e.height,orthogonalSize:this.orientation===j.VERTICAL?e.height:e.width}):this._onDidChange.fire({})}))}setVisible(e){this.view.setVisible&&this.view.setVisible(e)}layout(e,t){this._size=e,this._orthogonalSize=t,this.view.layout(this.width,this.height)}dispose(){this._onDidChange.dispose(),this._disposable.dispose()}}class Y extends f{get width(){return this.orientation===j.HORIZONTAL?this.size:this.orthogonalSize}get height(){return this.orientation===j.HORIZONTAL?this.orthogonalSize:this.size}get minimumSize(){return 0===this.children.length?0:Math.max(...this.children.map(((e,t)=>this.splitview.isViewVisible(t)?e.minimumOrthogonalSize:0)))}get maximumSize(){return Math.min(...this.children.map(((e,t)=>this.splitview.isViewVisible(t)?e.maximumOrthogonalSize:Number.POSITIVE_INFINITY)))}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get orthogonalSize(){return this._orthogonalSize}get size(){return this._size}get minimumWidth(){return this.orientation===j.HORIZONTAL?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return this.orientation===j.HORIZONTAL?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return this.orientation===j.HORIZONTAL?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return this.orientation===j.HORIZONTAL?this.maximumSize:this.maximumOrthogonalSize}get priority(){if(0===this.children.length)return F.Normal;const e=this.children.map((e=>void 0===e.priority?F.Normal:e.priority));return e.some((e=>e===F.High))?F.High:e.some((e=>e===F.Low))?F.Low:F.Normal}get disabled(){return this.splitview.disabled}set disabled(e){this.splitview.disabled=e}get margin(){return this.splitview.margin}set margin(e){this.splitview.margin=e,this.children.forEach((t=>{t instanceof Y&&(t.margin=e)}))}constructor(e,t,i,n,s,o,r,a){if(super(),this.orientation=e,this.proportionalLayout=t,this.styles=i,this._childrenDisposable=l.NONE,this.children=[],this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._onDidVisibilityChange=new v,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._orthogonalSize=s,this._size=n,this.element=document.createElement("div"),this.element.className="dv-branch-node",a){const e={views:a.map((e=>({view:e.node,size:e.node.size,visible:!(e.node instanceof X&&void 0!==e.visible)||e.visible}))),size:this.orthogonalSize};this.children=a.map((e=>e.node)),this.splitview=new J(this.element,{orientation:this.orientation,descriptor:e,proportionalLayout:t,styles:i,margin:r})}else this.splitview=new J(this.element,{orientation:this.orientation,proportionalLayout:t,styles:i,margin:r}),this.splitview.layout(this.size,this.orthogonalSize);this.disabled=o,this.addDisposables(this._onDidChange,this._onDidVisibilityChange,this.splitview.onDidSashEnd((()=>{this._onDidChange.fire({})}))),this.setupChildrenEvents()}setVisible(e){}isChildVisible(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.isViewVisible(e)}setChildVisible(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");if(this.splitview.isViewVisible(e)===t)return;const i=0===this.splitview.contentSize;this.splitview.setViewVisible(e,t);const n=0===this.splitview.contentSize;(t&&i||!t&&n)&&this._onDidVisibilityChange.fire({visible:t})}moveChild(e,t){if(e===t)return;if(e<0||e>=this.children.length)throw new Error("Invalid from index");e<t&&t--,this.splitview.moveView(e,t);const i=this._removeChild(e);this._addChild(i,t)}getChildSize(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewSize(e)}resizeChild(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");this.splitview.resizeView(e,t)}layout(e,t){this._size=t,this._orthogonalSize=e,this.splitview.layout(t,e)}addChild(e,t,i,n){if(i<0||i>this.children.length)throw new Error("Invalid index");this.splitview.addView(e,t,i,n),this._addChild(e,i)}getChildCachedVisibleSize(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewCachedVisibleSize(e)}removeChild(e,t){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.removeView(e,t),this._removeChild(e)}_addChild(e,t){this.children.splice(t,0,e),this.setupChildrenEvents()}_removeChild(e){const[t]=this.children.splice(e,1);return this.setupChildrenEvents(),t}setupChildrenEvents(){this._childrenDisposable.dispose(),this._childrenDisposable=new f(d.any(...this.children.map((e=>e.onDidChange)))((e=>{this._onDidChange.fire({size:e.orthogonalSize})})),...this.children.map(((e,t)=>e instanceof Y?e.onDidVisibilityChange((e=>{let{visible:i}=e;this.setChildVisible(t,i)})):l.NONE)))}dispose(){this._childrenDisposable.dispose(),this.splitview.dispose(),this.children.forEach((e=>e.dispose())),super.dispose()}}function q(e,t){if(e instanceof X)return e;if(e instanceof Y)return q(e.children[t?e.children.length-1:0],t);throw new Error("invalid node")}function K(e,t,i){if(e instanceof Y){const n=new Y(te(e.orientation),e.proportionalLayout,e.styles,t,i,e.disabled,e.margin);let s=0;for(let o=e.children.length-1;o>=0;o--){const r=e.children[o],a=r instanceof Y?r.orthogonalSize:r.size;let h=0===e.size?0:Math.round(t*a/e.size);s+=h,0===o&&(h+=t-s),n.addChild(K(r,i,h),h,0,!0)}return n}return new X(e.view,te(e.orientation),i)}function Q(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");if(/\bdv-grid-view\b/.test(t.className))return[];const i=function(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");let i=t.firstElementChild,n=0;for(;i!==e&&i!==t.lastElementChild&&i;)i=i.nextElementSibling,n++;return n}(t);return[...Q(t.parentElement.parentElement.parentElement),i]}function ee(e,t,i){const n=function(e,t){return t.length%2==0?te(e):e}(e,t),s=function(e){return"top"===e||"bottom"===e?j.VERTICAL:j.HORIZONTAL}(i);if(n===s){const[e,n]=V(t);let s=n;return"right"!==i&&"bottom"!==i||(s+=1),[...e,s]}{const e="right"===i||"bottom"===i?1:0;return[...t,e]}}const te=e=>e===j.HORIZONTAL?j.VERTICAL:j.HORIZONTAL;const ie=(e,t)=>{const i=t===j.VERTICAL?e.box.width:e.box.height;return function(e){return!!e.children}(e)?{type:"branch",data:e.children.map((e=>ie(e,te(t)))),size:i}:"number"==typeof e.cachedVisibleSize?{type:"leaf",data:e.view.toJSON(),size:e.cachedVisibleSize,visible:!1}:{type:"leaf",data:e.view.toJSON(),size:i}};class ne{get length(){return this._root?this._root.children.length:0}get orientation(){return this.root.orientation}set orientation(e){if(this.root.orientation===e)return;const{size:t,orthogonalSize:i}=this.root;this.root=K(this.root,i,t),this.root.layout(t,i)}get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get locked(){return this._locked}set locked(e){this._locked=e;const t=[this.root];for(;t.length>0;){const i=t.pop();i instanceof Y&&(i.disabled=e,t.push(...i.children))}}get margin(){return this._margin}set margin(e){this._margin=e,this.root.margin=e}maximizedView(){var e;return null===(e=this._maximizedNode)||void 0===e?void 0:e.leaf.view}hasMaximizedView(){return void 0!==this._maximizedNode}maximizeView(e){var t;const i=Q(e.element),[n,s]=this.getNode(i);if(!(s instanceof X))return;if((null===(t=this._maximizedNode)||void 0===t?void 0:t.leaf)===s)return;this.hasMaximizedView()&&this.exitMaximizedView(),ie(this.getView(),this.orientation);const o=[];!function e(t,i){for(let n=0;n<t.children.length;n++){const s=t.children[n];s instanceof X?s!==i&&(t.isChildVisible(n)?t.setChildVisible(n,!1):o.push(s)):e(s,i)}}(this.root,s),this._maximizedNode={leaf:s,hiddenOnMaximize:o},this._onDidMaximizedNodeChange.fire({view:s.view,isMaximized:!0})}exitMaximizedView(){if(!this._maximizedNode)return;const e=this._maximizedNode.hiddenOnMaximize;!function t(i){for(let n=i.children.length-1;n>=0;n--){const s=i.children[n];s instanceof X?e.includes(s)||i.setChildVisible(n,!0):t(s)}}(this.root);const t=this._maximizedNode.leaf;this._maximizedNode=void 0,this._onDidMaximizedNodeChange.fire({view:t.view,isMaximized:!1})}serialize(){const e=this.maximizedView();let t;e&&(t=Q(e.element)),this.hasMaximizedView()&&this.exitMaximizedView();const i={root:ie(this.getView(),this.orientation),width:this.width,height:this.height,orientation:this.orientation};return t&&(i.maximizedNode={location:t}),e&&this.maximizeView(e),i}dispose(){this.disposable.dispose(),this._onDidChange.dispose(),this._onDidMaximizedNodeChange.dispose(),this._onDidViewVisibilityChange.dispose(),this.root.dispose(),this._maximizedNode=void 0,this.element.remove()}clear(){const e=this.root.orientation;this.root=new Y(e,this.proportionalLayout,this.styles,this.root.size,this.root.orthogonalSize,this.locked,this.margin)}deserialize(e,t){const i=e.orientation,n=i===j.VERTICAL?e.height:e.width;if(this._deserialize(e.root,i,t,n),this.layout(e.width,e.height),e.maximizedNode){const t=e.maximizedNode.location,[i,n]=this.getNode(t);if(!(n instanceof X))return;this.maximizeView(n.view)}}_deserialize(e,t,i,n){this.root=this._deserializeNode(e,t,i,n)}_deserializeNode(e,t,i,n){var s;let o;if("branch"===e.type){const s=e.data.map((n=>({node:this._deserializeNode(n,te(t),i,e.size),visible:n.visible})));o=new Y(t,this.proportionalLayout,this.styles,e.size,n,this.locked,this.margin,s)}else{const r=i.fromJSON(e);"boolean"==typeof e.visible&&(null===(s=r.setVisible)||void 0===s||s.call(r,e.visible)),o=new X(r,t,n,e.size)}return o}get root(){return this._root}set root(e){const t=this._root;t&&(t.dispose(),this._maximizedNode=void 0,this.element.removeChild(t.element)),this._root=e,this.element.appendChild(this._root.element),this.disposable.value=this._root.onDidChange((e=>{this._onDidChange.fire(e)}))}insertOrthogonalSplitviewAtRoot(){if(!this._root)return;const e=this.root;if(e.element.remove(),this._root=new Y(te(e.orientation),this.proportionalLayout,this.styles,this.root.orthogonalSize,this.root.size,this.locked,this.margin),0===e.children.length);else if(1===e.children.length){const t=e.children[0];e.removeChild(0).dispose(),e.dispose(),this._root.addChild(K(t,t.orthogonalSize,t.size),U.Distribute,0)}else this._root.addChild(e,U.Distribute,0);this.element.appendChild(this._root.element),this.disposable.value=this._root.onDidChange((e=>{this._onDidChange.fire(e)}))}next(e){return this.progmaticSelect(e)}previous(e){return this.progmaticSelect(e,!0)}getView(e){const t=e?this.getNode(e)[1]:this.root;return this._getViews(t,this.orientation)}_getViews(e,t,i){const n={height:e.height,width:e.width};if(e instanceof X)return{box:n,view:e.view,cachedVisibleSize:i};const s=[];for(let o=0;o<e.children.length;o++){const i=e.children[o],n=e.getChildCachedVisibleSize(o);s.push(this._getViews(i,te(t),n))}return{box:n,children:s}}progmaticSelect(e,t){void 0===t&&(t=!1);const[i,n]=this.getNode(e);if(!(n instanceof X))throw new Error("invalid location");for(let s=i.length-1;s>-1;s--){const n=i[s],o=e[s]||0;if(t?o-1>-1:o+1<n.children.length)return q(n.children[t?o-1:o+1],t)}return q(this.root,t)}constructor(e,t,i,n,s){this.proportionalLayout=e,this.styles=t,this._locked=!1,this._margin=0,this._maximizedNode=void 0,this.disposable=new _,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._onDidViewVisibilityChange=new v,this.onDidViewVisibilityChange=this._onDidViewVisibilityChange.event,this._onDidMaximizedNodeChange=new v,this.onDidMaximizedNodeChange=this._onDidMaximizedNodeChange.event,this.element=document.createElement("div"),this.element.className="dv-grid-view",this._locked=null!=n&&n,this._margin=null!=s?s:0,this.root=new Y(i,e,t,0,0,this.locked,this.margin)}isViewVisible(e){const[t,i]=V(e),[,n]=this.getNode(t);if(!(n instanceof Y))throw new Error("Invalid from location");return n.isChildVisible(i)}setViewVisible(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,n]=V(e),[,s]=this.getNode(i);if(!(s instanceof Y))throw new Error("Invalid from location");this._onDidViewVisibilityChange.fire(),s.setChildVisible(n,t)}moveView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView();const[,n]=this.getNode(e);if(!(n instanceof Y))throw new Error("Invalid location");n.moveChild(t,i)}addView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView();const[n,s]=V(i),[o,r]=this.getNode(n);if(r instanceof Y){const i=new X(e,te(r.orientation),r.orthogonalSize);r.addChild(i,t,s)}else{const[i,...a]=[...o].reverse(),[h,...d]=[...n].reverse();let l=0;const p=i.getChildCachedVisibleSize(h);"number"==typeof p&&(l=U.Invisible(p));i.removeChild(h).dispose();const c=new Y(r.orientation,this.proportionalLayout,this.styles,r.size,r.orthogonalSize,this.locked,this.margin);i.addChild(c,r.size,h);const u=new X(r.view,i.orientation,r.size);c.addChild(u,l,0),"number"!=typeof t&&"split"===t.type&&(t={type:"split",index:0});const m=new X(e,i.orientation,r.size);c.addChild(m,t,s)}}remove(e,t){const i=Q(e.element);return this.removeView(i,t)}removeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,n]=V(e),[s,o]=this.getNode(i);if(!(o instanceof Y))throw new Error("Invalid location");const r=o.children[n];if(!(r instanceof X))throw new Error("Invalid location");if(o.removeChild(n,t),r.dispose(),1!==o.children.length)return r.view;const a=o.children[0];if(0===s.length)return a instanceof X||(o.removeChild(0,t),this.root=a),r.view;const[h,...d]=[...s].reverse(),[l,...p]=[...i].reverse(),c=o.isChildVisible(0);o.removeChild(0,t);const u=h.children.map(((e,t)=>h.getChildSize(t)));if(h.removeChild(l,t).dispose(),a instanceof Y){u.splice(l,1,...a.children.map((e=>e.size)));for(let e=0;e<a.children.length;e++){const t=a.children[e];h.addChild(t,t.size,l+e)}for(;a.children.length>0;)a.removeChild(0)}else{const e=new X(a.view,te(a.orientation),a.size),t=c?a.orthogonalSize:U.Invisible(a.orthogonalSize);h.addChild(e,t,l)}a.dispose();for(let m=0;m<u.length;m++)h.resizeChild(m,u[m]);return r.view}layout(e,t){const[i,n]=this.root.orientation===j.HORIZONTAL?[t,e]:[e,t];this.root.layout(i,n)}getNode(e,t,i){if(void 0===t&&(t=this.root),void 0===i&&(i=[]),0===e.length)return[i,t];if(!(t instanceof Y))throw new Error("Invalid location");const[n,...s]=e;if(n<0||n>=t.children.length)throw new Error("Invalid location");const o=t.children[n];return i.push(t),this.getNode(s,o,i)}}const se=(()=>{const e={disableAutoResizing:void 0,proportionalLayout:void 0,orientation:void 0,hideBorders:void 0,className:void 0};return Object.keys(e)})();class oe extends f{get element(){return this._element}get disableResizing(){return this._disableResizing}set disableResizing(e){this._disableResizing=e}constructor(e,t){void 0===t&&(t=!1),super(),this._disableResizing=t,this._element=e,this.addDisposables(b(this._element,(e=>{if(this.isDisposed)return;if(this.disableResizing)return;if(!this._element.offsetParent)return;if(!function(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof DocumentFragment?t.parentNode.host:t.parentNode}return!1}(this._element))return;const{width:t,height:i}=e.contentRect;this.layout(t,i)})))}}const re=M();function ae(e){switch(e){case"left":return"left";case"right":return"right";case"above":return"top";case"below":return"bottom";default:return"center"}}class he extends oe{get id(){return this._id}get size(){return this._groups.size}get groups(){return Array.from(this._groups.values()).map((e=>e.value))}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumHeight(){return this.gridview.minimumHeight}get maximumHeight(){return this.gridview.maximumHeight}get minimumWidth(){return this.gridview.minimumWidth}get maximumWidth(){return this.gridview.maximumWidth}get activeGroup(){return this._activeGroup}get locked(){return this.gridview.locked}set locked(e){this.gridview.locked=e}constructor(e,t){var i;super(document.createElement("div"),t.disableAutoResizing),this._id=re.next(),this._groups=new Map,this._onDidRemove=new v,this.onDidRemove=this._onDidRemove.event,this._onDidAdd=new v,this.onDidAdd=this._onDidAdd.event,this._onDidMaximizedChange=new v,this.onDidMaximizedChange=this._onDidMaximizedChange.event,this._onDidActiveChange=new v,this.onDidActiveChange=this._onDidActiveChange.event,this._bufferOnDidLayoutChange=new w,this.onDidLayoutChange=this._bufferOnDidLayoutChange.onEvent,this._onDidViewVisibilityChangeMicroTaskQueue=new w,this.onDidViewVisibilityChangeMicroTaskQueue=this._onDidViewVisibilityChangeMicroTaskQueue.onEvent,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new I(this.element),this._classNames.setClassNames(null!==(i=t.className)&&void 0!==i?i:""),e.appendChild(this.element),this.gridview=new ne(!!t.proportionalLayout,t.styles,t.orientation,t.locked,t.margin),this.gridview.locked=!!t.locked,this.element.appendChild(this.gridview.element),this.layout(0,0,!0),this.addDisposables(this.gridview.onDidMaximizedNodeChange((e=>{this._onDidMaximizedChange.fire({panel:e.view,isMaximized:e.isMaximized})})),this.gridview.onDidViewVisibilityChange((()=>this._onDidViewVisibilityChangeMicroTaskQueue.fire())),this.onDidViewVisibilityChangeMicroTaskQueue((()=>{this.layout(this.width,this.height,!0)})),l.from((()=>{var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)})),this.gridview.onDidChange((()=>{this._bufferOnDidLayoutChange.fire()})),d.any(this.onDidAdd,this.onDidRemove,this.onDidActiveChange)((()=>{this._bufferOnDidLayoutChange.fire()})),this._onDidMaximizedChange,this._onDidViewVisibilityChangeMicroTaskQueue,this._bufferOnDidLayoutChange)}setVisible(e,t){this.gridview.setViewVisible(Q(e.element),t),this._bufferOnDidLayoutChange.fire()}isVisible(e){return this.gridview.isViewVisible(Q(e.element))}updateOptions(e){var t,i,n,s;e.proportionalLayout,e.orientation&&(this.gridview.orientation=e.orientation),"disableResizing"in e&&(this.disableResizing=null!==(t=e.disableAutoResizing)&&void 0!==t&&t),"locked"in e&&(this.locked=null!==(i=e.locked)&&void 0!==i&&i),"margin"in e&&(this.gridview.margin=null!==(n=e.margin)&&void 0!==n?n:0),"className"in e&&this._classNames.setClassNames(null!==(s=e.className)&&void 0!==s?s:"")}maximizeGroup(e){this.gridview.maximizeView(e),this.doSetGroupActive(e)}isMaximizedGroup(e){return this.gridview.maximizedView()===e}exitMaximizedGroup(){this.gridview.exitMaximizedView()}hasMaximizedGroup(){return this.gridview.hasMaximizedView()}doAddGroup(e,t,i){void 0===t&&(t=[0]),this.gridview.addView(e,null!=i?i:U.Distribute,t),this._onDidAdd.fire(e)}doRemoveGroup(e,t){if(!this._groups.has(e.id))throw new Error("invalid operation");const i=this._groups.get(e.id),n=this.gridview.remove(e,U.Distribute);if(i&&!(null==t?void 0:t.skipDispose)&&(i.disposable.dispose(),i.value.dispose(),this._groups.delete(e.id),this._onDidRemove.fire(e)),!(null==t?void 0:t.skipActive)&&this._activeGroup===e){const e=Array.from(this._groups.values());this.doSetGroupActive(e.length>0?e[0].value:void 0)}return n}getPanel(e){var t;return null===(t=this._groups.get(e))||void 0===t?void 0:t.value}doSetGroupActive(e){this._activeGroup!==e&&(this._activeGroup&&this._activeGroup.setActive(!1),e&&e.setActive(!0),this._activeGroup=e,this._onDidActiveChange.fire(e))}removeGroup(e){this.doRemoveGroup(e)}moveToNext(e){var t;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}const i=Q(e.group.element),n=null===(t=this.gridview.next(i))||void 0===t?void 0:t.view;this.doSetGroupActive(n)}moveToPrevious(e){var t;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}const i=Q(e.group.element),n=null===(t=this.gridview.previous(i))||void 0===t?void 0:t.view;this.doSetGroupActive(n)}layout(e,t,i){(i||e!==this.width||t!==this.height)&&(this.gridview.element.style.height=`${t}px`,this.gridview.element.style.width=`${e}px`,this.gridview.layout(e,t))}dispose(){this._onDidActiveChange.dispose(),this._onDidAdd.dispose(),this._onDidRemove.dispose();for(const e of this.groups)e.dispose();this.gridview.dispose(),super.dispose()}}class de{get minimumSize(){return this.component.minimumSize}get maximumSize(){return this.component.maximumSize}get width(){return this.component.width}get height(){return this.component.height}get length(){return this.component.length}get orientation(){return this.component.orientation}get panels(){return this.component.panels}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidAddView(){return this.component.onDidAddView}get onDidRemoveView(){return this.component.onDidRemoveView}constructor(e){this.component=e}removePanel(e,t){this.component.removePanel(e,t)}focus(){this.component.focus()}getPanel(e){return this.component.getPanel(e)}layout(e,t){return this.component.layout(e,t)}addPanel(e){return this.component.addPanel(e)}movePanel(e,t){this.component.movePanel(e,t)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class le{get minimumSize(){return this.component.minimumSize}get maximumSize(){return this.component.maximumSize}get width(){return this.component.width}get height(){return this.component.height}get panels(){return this.component.panels}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidAddView(){return this.component.onDidAddView}get onDidRemoveView(){return this.component.onDidRemoveView}get onDidDrop(){return this.component.onDidDrop}get onUnhandledDragOverEvent(){return this.component.onUnhandledDragOverEvent}constructor(e){this.component=e}removePanel(e){this.component.removePanel(e)}getPanel(e){return this.component.getPanel(e)}movePanel(e,t){this.component.movePanel(e,t)}focus(){this.component.focus()}layout(e,t){this.component.layout(e,t)}addPanel(e){return this.component.addPanel(e)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class pe{get width(){return this.component.width}get height(){return this.component.height}get minimumHeight(){return this.component.minimumHeight}get maximumHeight(){return this.component.maximumHeight}get minimumWidth(){return this.component.minimumWidth}get maximumWidth(){return this.component.maximumWidth}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidAddPanel(){return this.component.onDidAddGroup}get onDidRemovePanel(){return this.component.onDidRemoveGroup}get onDidActivePanelChange(){return this.component.onDidActiveGroupChange}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get panels(){return this.component.groups}get orientation(){return this.component.orientation}set orientation(e){this.component.updateOptions({orientation:e})}constructor(e){this.component=e}focus(){this.component.focus()}layout(e,t,i){void 0===i&&(i=!1),this.component.layout(e,t,i)}addPanel(e){return this.component.addPanel(e)}removePanel(e,t){this.component.removePanel(e,t)}movePanel(e,t){this.component.movePanel(e,t)}getPanel(e){return this.component.getPanel(e)}fromJSON(e){return this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class ce{get id(){return this.component.id}get width(){return this.component.width}get height(){return this.component.height}get minimumHeight(){return this.component.minimumHeight}get maximumHeight(){return this.component.maximumHeight}get minimumWidth(){return this.component.minimumWidth}get maximumWidth(){return this.component.maximumWidth}get size(){return this.component.size}get totalPanels(){return this.component.totalPanels}get onDidActiveGroupChange(){return this.component.onDidActiveGroupChange}get onDidAddGroup(){return this.component.onDidAddGroup}get onDidRemoveGroup(){return this.component.onDidRemoveGroup}get onDidActivePanelChange(){return this.component.onDidActivePanelChange}get onDidAddPanel(){return this.component.onDidAddPanel}get onDidRemovePanel(){return this.component.onDidRemovePanel}get onDidMovePanel(){return this.component.onDidMovePanel}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidDrop(){return this.component.onDidDrop}get onWillDrop(){return this.component.onWillDrop}get onWillShowOverlay(){return this.component.onWillShowOverlay}get onWillDragGroup(){return this.component.onWillDragGroup}get onWillDragPanel(){return this.component.onWillDragPanel}get onUnhandledDragOverEvent(){return this.component.onUnhandledDragOverEvent}get onDidPopoutGroupSizeChange(){return this.component.onDidPopoutGroupSizeChange}get onDidPopoutGroupPositionChange(){return this.component.onDidPopoutGroupPositionChange}get panels(){return this.component.panels}get groups(){return this.component.groups}get activePanel(){return this.component.activePanel}get activeGroup(){return this.component.activeGroup}constructor(e){this.component=e}focus(){this.component.focus()}getPanel(e){return this.component.getGroupPanel(e)}layout(e,t,i){void 0===i&&(i=!1),this.component.layout(e,t,i)}addPanel(e){return this.component.addPanel(e)}removePanel(e){this.component.removePanel(e)}addGroup(e){return this.component.addGroup(e)}closeAllGroups(){return this.component.closeAllGroups()}removeGroup(e){this.component.removeGroup(e)}getGroup(e){return this.component.getPanel(e)}addFloatingGroup(e,t){return this.component.addFloatingGroup(e,t)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}moveToNext(e){this.component.moveToNext(e)}moveToPrevious(e){this.component.moveToPrevious(e)}maximizeGroup(e){this.component.maximizeGroup(e.group)}hasMaximizedGroup(){return this.component.hasMaximizedGroup()}exitMaximizedGroup(){this.component.exitMaximizedGroup()}get onDidMaximizedGroupChange(){return this.component.onDidMaximizedGroupChange}addPopoutGroup(e,t){return this.component.addPopoutGroup(e,t)}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class ue extends f{constructor(e){super(),this.el=e,this.dataDisposable=new _,this.pointerEventsDisposable=new _,this._onDragStart=new v,this.onDragStart=this._onDragStart.event,this.addDisposables(this._onDragStart,this.dataDisposable,this.pointerEventsDisposable),this.configure()}isCancelled(e){return!1}configure(){this.addDisposables(this._onDragStart,g(this.el,"dragstart",(e=>{if(e.defaultPrevented||this.isCancelled(e))return void e.preventDefault();const t=G();if(this.pointerEventsDisposable.value={dispose:()=>{t.release()}},this.el.classList.add("dv-dragged"),setTimeout((()=>this.el.classList.remove("dv-dragged")),0),this.dataDisposable.value=this.getData(e),this._onDragStart.fire(e),e.dataTransfer){e.dataTransfer.effectAllowed="move";e.dataTransfer.items.length>0||e.dataTransfer.setData("text/plain","")}})),g(this.el,"dragend",(()=>{this.pointerEventsDisposable.dispose(),setTimeout((()=>{this.dataDisposable.dispose()}),0)})))}}class me extends f{constructor(e,t){super(),this.element=e,this.callbacks=t,this.target=null,this.registerListeners()}onDragEnter(e){this.target=e.target,this.callbacks.onDragEnter(e)}onDragOver(e){e.preventDefault(),this.callbacks.onDragOver&&this.callbacks.onDragOver(e)}onDragLeave(e){this.target===e.target&&(this.target=null,this.callbacks.onDragLeave(e))}onDragEnd(e){this.target=null,this.callbacks.onDragEnd(e)}onDrop(e){this.callbacks.onDrop(e)}registerListeners(){this.addDisposables(g(this.element,"dragenter",(e=>{this.onDragEnter(e)}),!0)),this.addDisposables(g(this.element,"dragover",(e=>{this.onDragOver(e)}),!0)),this.addDisposables(g(this.element,"dragleave",(e=>{this.onDragLeave(e)}))),this.addDisposables(g(this.element,"dragend",(e=>{this.onDragEnd(e)}))),this.addDisposables(g(this.element,"drop",(e=>{this.onDrop(e)})))}}class ve extends p{get nativeEvent(){return this.options.nativeEvent}get position(){return this.options.position}constructor(e){super(),this.options=e}}function ge(e){switch(e){case"above":return"top";case"below":return"bottom";case"left":return"left";case"right":return"right";case"within":return"center";default:throw new Error(`invalid direction '${e}'`)}}function we(e){switch(e){case"top":return"above";case"bottom":return"below";case"left":return"left";case"right":return"right";case"center":return"within";default:throw new Error(`invalid position '${e}'`)}}const fe={value:20,type:"percentage"},_e={value:50,type:"percentage"};class De extends f{get disabled(){return this._disabled}set disabled(e){this._disabled=e}get state(){return this._state}constructor(e,t){super(),this.element=e,this.options=t,this._onDrop=new v,this.onDrop=this._onDrop.event,this._onWillShowOverlay=new v,this.onWillShowOverlay=this._onWillShowOverlay.event,this._disabled=!1,this._acceptedTargetZonesSet=new Set(this.options.acceptedTargetZones),this.dnd=new me(this.element,{onDragEnter:()=>{var e,t,i;null===(i=null===(t=(e=this.options).getOverrideTarget)||void 0===t?void 0:t.call(e))||void 0===i||i.getElements()},onDragOver:e=>{var t,i,n,s,o,r,a;De.ACTUAL_TARGET=this;const h=null===(i=(t=this.options).getOverrideTarget)||void 0===i?void 0:i.call(t);if(0===this._acceptedTargetZonesSet.size){if(h)return;return void this.removeDropTarget()}const d=null!==(o=null===(s=(n=this.options).getOverlayOutline)||void 0===s?void 0:s.call(n))&&void 0!==o?o:this.element,l=d.offsetWidth,p=d.offsetHeight;if(0===l||0===p)return;const c=e.currentTarget.getBoundingClientRect(),u=(null!==(r=e.clientX)&&void 0!==r?r:0)-c.left,m=(null!==(a=e.clientY)&&void 0!==a?a:0)-c.top,v=this.calculateQuadrant(this._acceptedTargetZonesSet,u,m,l,p);if(this.isAlreadyUsed(e)||null===v)return void this.removeDropTarget();if(!this.options.canDisplayOverlay(e,v)){if(h)return;return void this.removeDropTarget()}const g=new ve({nativeEvent:e,position:v});this._onWillShowOverlay.fire(g),g.defaultPrevented?this.removeDropTarget():(this.markAsUsed(e),h||this.targetElement||(this.targetElement=document.createElement("div"),this.targetElement.className="dv-drop-target-dropzone",this.overlayElement=document.createElement("div"),this.overlayElement.className="dv-drop-target-selection",this._state="center",this.targetElement.appendChild(this.overlayElement),d.classList.add("dv-drop-target"),d.append(this.targetElement)),this.toggleClasses(v,l,p),this._state=v)},onDragLeave:()=>{var e,t;(null===(t=(e=this.options).getOverrideTarget)||void 0===t?void 0:t.call(e))||this.removeDropTarget()},onDragEnd:e=>{var t,i;const n=null===(i=(t=this.options).getOverrideTarget)||void 0===i?void 0:i.call(t);n&&De.ACTUAL_TARGET===this&&this._state&&(e.stopPropagation(),this._onDrop.fire({position:this._state,nativeEvent:e})),this.removeDropTarget(),null==n||n.clear()},onDrop:e=>{var t,i,n;e.preventDefault();const s=this._state;this.removeDropTarget(),null===(n=null===(i=(t=this.options).getOverrideTarget)||void 0===i?void 0:i.call(t))||void 0===n||n.clear(),s&&(e.stopPropagation(),this._onDrop.fire({position:s,nativeEvent:e}))}}),this.addDisposables(this._onDrop,this._onWillShowOverlay,this.dnd)}setTargetZones(e){this._acceptedTargetZonesSet=new Set(e)}setOverlayModel(e){this.options.overlayModel=e}dispose(){this.removeDropTarget(),super.dispose()}markAsUsed(e){e[De.USED_EVENT_ID]=!0}isAlreadyUsed(e){const t=e[De.USED_EVENT_ID];return"boolean"==typeof t&&t}toggleClasses(e,t,i){var n,s,o,r,a,h,d;const l=null===(s=(n=this.options).getOverrideTarget)||void 0===s?void 0:s.call(n);if(!l&&!this.overlayElement)return;const p=t<100,c=i<100,u="left"===e,m="right"===e,v="top"===e,g="bottom"===e,w=!p&&m,f=!p&&u,_=!c&&v,D=!c&&g;let b=1;const y=null!==(r=null===(o=this.options.overlayModel)||void 0===o?void 0:o.size)&&void 0!==r?r:_e;if("percentage"===y.type?b=R(y.value,0,100)/100:((w||f)&&(b=R(0,y.value,t)/t),(_||D)&&(b=R(0,y.value,i)/i)),l){const n=null!==(d=null===(h=(a=this.options).getOverlayOutline)||void 0===h?void 0:h.call(a))&&void 0!==d?d:this.element,s=n.getBoundingClientRect(),o=l.getElements(void 0,n),r=o.root,c=o.overlay,y=r.getBoundingClientRect(),C=s.top-y.top,S=s.left-y.left,A={top:C,left:S,width:t,height:i};w?(A.left=S+t*(1-b),A.width=t*b):f?A.width=t*b:_?A.height=i*b:D&&(A.top=C+i*(1-b),A.height=i*b),p&&u&&(A.width=4),p&&m&&(A.left=S+t-4,A.width=4);const z=`${Math.round(A.top)}px`,E=`${Math.round(A.left)}px`,P=`${Math.round(A.width)}px`,O=`${Math.round(A.height)}px`;if(c.style.top===z&&c.style.left===E&&c.style.width===P&&c.style.height===O)return;return c.style.top=z,c.style.left=E,c.style.width=P,c.style.height=O,c.style.visibility="visible",c.className="dv-drop-target-anchor"+(this.options.className?` ${this.options.className}`:""),x(c,"dv-drop-target-left",u),x(c,"dv-drop-target-right",m),x(c,"dv-drop-target-top",v),x(c,"dv-drop-target-bottom",g),x(c,"dv-drop-target-center","center"===e),void(o.changed&&(x(c,"dv-drop-target-anchor-container-changed",!0),setTimeout((()=>{x(c,"dv-drop-target-anchor-container-changed",!1)}),10)))}if(!this.overlayElement)return;const C={top:"0px",left:"0px",width:"100%",height:"100%"};w?(C.left=100*(1-b)+"%",C.width=100*b+"%"):f?C.width=100*b+"%":_?C.height=100*b+"%":D&&(C.top=100*(1-b)+"%",C.height=100*b+"%"),this.overlayElement.style.top=C.top,this.overlayElement.style.left=C.left,this.overlayElement.style.width=C.width,this.overlayElement.style.height=C.height,x(this.overlayElement,"dv-drop-target-small-vertical",c),x(this.overlayElement,"dv-drop-target-small-horizontal",p),x(this.overlayElement,"dv-drop-target-left",u),x(this.overlayElement,"dv-drop-target-right",m),x(this.overlayElement,"dv-drop-target-top",v),x(this.overlayElement,"dv-drop-target-bottom",g),x(this.overlayElement,"dv-drop-target-center","center"===e)}calculateQuadrant(e,t,i,n,s){var o,r;const a=null!==(r=null===(o=this.options.overlayModel)||void 0===o?void 0:o.activationSize)&&void 0!==r?r:fe;return"percentage"===a.type?function(e,t,i,n,s,o){const r=100*t/n,a=100*i/s;if(e.has("left")&&r<o)return"left";if(e.has("right")&&r>100-o)return"right";if(e.has("top")&&a<o)return"top";if(e.has("bottom")&&a>100-o)return"bottom";if(!e.has("center"))return null;return"center"}(e,t,i,n,s,a.value):function(e,t,i,n,s,o){if(e.has("left")&&t<o)return"left";if(e.has("right")&&t>n-o)return"right";if(e.has("top")&&i<o)return"top";if(e.has("bottom")&&i>s-o)return"bottom";if(!e.has("center"))return null;return"center"}(e,t,i,n,s,a.value)}removeDropTarget(){var e;this.targetElement&&(this._state=void 0,null===(e=this.targetElement.parentElement)||void 0===e||e.classList.remove("dv-drop-target"),this.targetElement.remove(),this.targetElement=void 0,this.overlayElement=void 0)}}De.USED_EVENT_ID="__dockview_droptarget_event_is_used__";const be=(()=>{const e={disableAutoResizing:void 0,disableDnd:void 0,className:void 0};return Object.keys(e)})();class ye extends c{constructor(e,t,i,n){super(),this.nativeEvent=e,this.position=t,this.getData=i,this.panel=n}}class Ce extends p{constructor(){super()}}class xe extends f{get isFocused(){return this._isFocused}get isActive(){return this._isActive}get isVisible(){return this._isVisible}get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.id=e,this.component=t,this._isFocused=!1,this._isActive=!1,this._isVisible=!0,this._width=0,this._height=0,this._parameters={},this.panelUpdatesDisposable=new _,this._onDidDimensionChange=new v,this.onDidDimensionsChange=this._onDidDimensionChange.event,this._onDidChangeFocus=new v,this.onDidFocusChange=this._onDidChangeFocus.event,this._onWillFocus=new v,this.onWillFocus=this._onWillFocus.event,this._onDidVisibilityChange=new v,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._onWillVisibilityChange=new v,this.onWillVisibilityChange=this._onWillVisibilityChange.event,this._onDidActiveChange=new v,this.onDidActiveChange=this._onDidActiveChange.event,this._onActiveChange=new v,this.onActiveChange=this._onActiveChange.event,this._onDidParametersChange=new v,this.onDidParametersChange=this._onDidParametersChange.event,this.addDisposables(this.onDidFocusChange((e=>{this._isFocused=e.isFocused})),this.onDidActiveChange((e=>{this._isActive=e.isActive})),this.onDidVisibilityChange((e=>{this._isVisible=e.isVisible})),this.onDidDimensionsChange((e=>{this._width=e.width,this._height=e.height})),this.panelUpdatesDisposable,this._onDidDimensionChange,this._onDidChangeFocus,this._onDidVisibilityChange,this._onDidActiveChange,this._onWillFocus,this._onActiveChange,this._onWillFocus,this._onWillVisibilityChange,this._onDidParametersChange)}getParameters(){return this._parameters}initialize(e){this.panelUpdatesDisposable.value=this._onDidParametersChange.event((t=>{this._parameters=t,e.update({params:t})}))}setVisible(e){this._onWillVisibilityChange.fire({isVisible:e})}setActive(){this._onActiveChange.fire()}updateParameters(e){this._onDidParametersChange.fire(e)}}class Se extends xe{constructor(e,t){super(e,t),this._onDidConstraintsChangeInternal=new v,this.onDidConstraintsChangeInternal=this._onDidConstraintsChangeInternal.event,this._onDidConstraintsChange=new v({replay:!0}),this.onDidConstraintsChange=this._onDidConstraintsChange.event,this._onDidSizeChange=new v,this.onDidSizeChange=this._onDidSizeChange.event,this.addDisposables(this._onDidConstraintsChangeInternal,this._onDidConstraintsChange,this._onDidSizeChange)}setConstraints(e){this._onDidConstraintsChangeInternal.fire(e)}setSize(e){this._onDidSizeChange.fire(e)}}class Ae extends Se{set pane(e){this._pane=e}constructor(e,t){super(e,t),this._onDidExpansionChange=new v({replay:!0}),this.onDidExpansionChange=this._onDidExpansionChange.event,this._onMouseEnter=new v({}),this.onMouseEnter=this._onMouseEnter.event,this._onMouseLeave=new v({}),this.onMouseLeave=this._onMouseLeave.event,this.addDisposables(this._onDidExpansionChange,this._onMouseEnter,this._onMouseLeave)}setExpanded(e){var t;null===(t=this._pane)||void 0===t||t.setExpanded(e)}get isExpanded(){var e;return!!(null===(e=this._pane)||void 0===e?void 0:e.isExpanded())}}class ze extends f{get element(){return this._element}get width(){return this._width}get height(){return this._height}get params(){var e;return null===(e=this._params)||void 0===e?void 0:e.params}constructor(e,t,i){super(),this.id=e,this.component=t,this.api=i,this._height=0,this._width=0,this._element=document.createElement("div"),this._element.tabIndex=-1,this._element.style.outline="none",this._element.style.height="100%",this._element.style.width="100%",this._element.style.overflow="hidden";const n=A(this._element);this.addDisposables(this.api,n.onDidFocus((()=>{this.api._onDidChangeFocus.fire({isFocused:!0})})),n.onDidBlur((()=>{this.api._onDidChangeFocus.fire({isFocused:!1})})),n)}focus(){const e=new Ce;this.api._onWillFocus.fire(e),e.defaultPrevented||this._element.focus()}layout(e,t){this._width=e,this._height=t,this.api._onDidDimensionChange.fire({width:e,height:t}),this.part&&this._params&&this.part.update(this._params.params)}init(e){this._params=e,this.part=this.getComponent()}update(e){var t,i;this._params=Object.assign(Object.assign({},this._params),{params:Object.assign(Object.assign({},null===(t=this._params)||void 0===t?void 0:t.params),e.params)});for(const n of Object.keys(e.params))void 0===e.params[n]&&delete this._params.params[n];null===(i=this.part)||void 0===i||i.update({params:this._params.params})}toJSON(){var e,t;const i=null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{};return{id:this.id,component:this.component,params:Object.keys(i).length>0?i:void 0}}dispose(){var e;this.api.dispose(),null===(e=this.part)||void 0===e||e.dispose(),super.dispose()}}class Ee extends ze{set orientation(e){this._orientation=e}get orientation(){return this._orientation}get minimumSize(){return this.headerSize+(this.isExpanded()?this._minimumBodySize:0)}get maximumSize(){return this.headerSize+(this.isExpanded()?this._maximumBodySize:0)}get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}set orthogonalSize(e){this._orthogonalSize=e}get minimumBodySize(){return this._minimumBodySize}set minimumBodySize(e){this._minimumBodySize="number"==typeof e?e:0}get maximumBodySize(){return this._maximumBodySize}set maximumBodySize(e){this._maximumBodySize="number"==typeof e?e:Number.POSITIVE_INFINITY}get headerVisible(){return this._headerVisible}set headerVisible(e){this._headerVisible=e,this.header.style.display=e?"":"none"}constructor(e){super(e.id,e.component,new Ae(e.id,e.component)),this._onDidChangeExpansionState=new v({replay:!0}),this.onDidChangeExpansionState=this._onDidChangeExpansionState.event,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._orthogonalSize=0,this._size=0,this._isExpanded=!1,this.api.pane=this,this.api.initialize(this),this.headerSize=e.headerSize,this.headerComponent=e.headerComponent,this._minimumBodySize=e.minimumBodySize,this._maximumBodySize=e.maximumBodySize,this._isExpanded=e.isExpanded,this._headerVisible=e.isHeaderVisible,this._onDidChangeExpansionState.fire(this.isExpanded()),this._orientation=e.orientation,this.element.classList.add("dv-pane"),this.addDisposables(this.api.onWillVisibilityChange((e=>{const{isVisible:t}=e,{accessor:i}=this._params;i.setVisible(this,t)})),this.api.onDidSizeChange((e=>{this._onDidChange.fire({size:e.size})})),g(this.element,"mouseenter",(e=>{this.api._onMouseEnter.fire(e)})),g(this.element,"mouseleave",(e=>{this.api._onMouseLeave.fire(e)}))),this.addDisposables(this._onDidChangeExpansionState,this.onDidChangeExpansionState((e=>{this.api._onDidExpansionChange.fire({isExpanded:e})})),this.api.onDidFocusChange((e=>{this.header&&(e.isFocused?C(this.header,"focused"):y(this.header,"focused"))}))),this.renderOnce()}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}isExpanded(){return this._isExpanded}setExpanded(e){this._isExpanded!==e&&(this._isExpanded=e,e?(this.animationTimer&&clearTimeout(this.animationTimer),this.body&&this.element.appendChild(this.body)):this.animationTimer=setTimeout((()=>{var e;null===(e=this.body)||void 0===e||e.remove()}),200),this._onDidChange.fire(e?{size:this.width}:{}),this._onDidChangeExpansionState.fire(e))}layout(e,t){this._size=e,this._orthogonalSize=t;const[i,n]=this.orientation===j.HORIZONTAL?[e,t]:[t,e];super.layout(i,n)}init(e){var t,i;super.init(e),"number"==typeof e.minimumBodySize&&(this.minimumBodySize=e.minimumBodySize),"number"==typeof e.maximumBodySize&&(this.maximumBodySize=e.maximumBodySize),this.bodyPart=this.getBodyComponent(),this.headerPart=this.getHeaderComponent(),this.bodyPart.init(Object.assign(Object.assign({},e),{api:this.api})),this.headerPart.init(Object.assign(Object.assign({},e),{api:this.api})),null===(t=this.body)||void 0===t||t.append(this.bodyPart.element),null===(i=this.header)||void 0===i||i.append(this.headerPart.element),"boolean"==typeof e.isExpanded&&this.setExpanded(e.isExpanded)}toJSON(){const e=this._params;return Object.assign(Object.assign({},super.toJSON()),{headerComponent:this.headerComponent,title:e.title})}renderOnce(){this.header=document.createElement("div"),this.header.tabIndex=0,this.header.className="dv-pane-header",this.header.style.height=`${this.headerSize}px`,this.header.style.lineHeight=`${this.headerSize}px`,this.header.style.minHeight=`${this.headerSize}px`,this.header.style.maxHeight=`${this.headerSize}px`,this.element.appendChild(this.header),this.body=document.createElement("div"),this.body.className="dv-pane-body",this.element.appendChild(this.body)}getComponent(){return{update:e=>{var t,i;null===(t=this.bodyPart)||void 0===t||t.update({params:e}),null===(i=this.headerPart)||void 0===i||i.update({params:e})},dispose:()=>{var e,t;null===(e=this.bodyPart)||void 0===e||e.dispose(),null===(t=this.headerPart)||void 0===t||t.dispose()}}}}class Pe extends Ee{constructor(e){super({id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,isHeaderVisible:!0,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this._onDidDrop=new v,this.onDidDrop=this._onDidDrop.event,this._onUnhandledDragOverEvent=new v,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.accessor=e.accessor,this.addDisposables(this._onDidDrop,this._onUnhandledDragOverEvent),e.disableDnd||this.initDragFeatures()}initDragFeatures(){if(!this.header)return;const e=this.id,t=this.accessor.id;this.header.draggable=!0,this.handler=new class extends ue{getData(){return r.getInstance().setData([new o(t,e)],o.prototype),{dispose:()=>{r.getInstance().clearData(o.prototype)}}}}(this.header),this.target=new De(this.element,{acceptedTargetZones:["top","bottom"],overlayModel:{activationSize:{type:"percentage",value:50}},canDisplayOverlay:(e,t)=>{const i=h();if(i&&i.paneId!==this.id&&i.viewId===this.accessor.id)return!0;const n=new ye(e,t,h,this);return this._onUnhandledDragOverEvent.fire(n),n.isAccepted}}),this.addDisposables(this._onDidDrop,this.handler,this.target,this.target.onDrop((e=>{this.onDrop(e)})))}onDrop(e){const t=h();if(!t||t.viewId!==this.accessor.id)return void this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,api:new le(this.accessor),getData:h}));const i=this._params.containerApi,n=t.paneId,s=i.getPanel(n);if(!s)return void this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,getData:h,api:new le(this.accessor)}));const o=i.panels,r=o.indexOf(s);let a=i.panels.indexOf(this);"left"!==e.position&&"top"!==e.position||(a=Math.max(0,a-1)),"right"!==e.position&&"bottom"!==e.position||(r>a&&a++,a=Math.min(o.length-1,a)),i.movePanel(r,a)}}class Oe extends f{get element(){return this._element}constructor(e,t){super(),this.accessor=e,this.group=t,this.disposable=new _,this._onDidFocus=new v,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new v,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dv-content-container",this._element.tabIndex=-1,this.addDisposables(this._onDidFocus,this._onDidBlur);const i=t.dropTargetContainer;this.dropTarget=new De(this.element,{getOverlayOutline:()=>{var t;return"group"===(null===(t=e.options.theme)||void 0===t?void 0:t.dndPanelOverlay)?this.element.parentElement:null},className:"dv-drop-target-content",acceptedTargetZones:["top","bottom","left","right","center"],canDisplayOverlay:(e,t)=>{if("no-drop-target"===this.group.locked||this.group.locked&&"center"===t)return!1;const i=a();return!(!i&&e.shiftKey&&"floating"!==this.group.location.type)&&(!(!i||i.viewId!==this.accessor.id)||this.group.canDisplayOverlay(e,t,"content"))},getOverrideTarget:i?()=>i.model:void 0}),this.addDisposables(this.dropTarget)}show(){this.element.style.display=""}hide(){this.element.style.display="none"}renderPanel(e,t){void 0===t&&(t={asActive:!0});const i=t.asActive||this.panel&&this.group.isPanelActive(this.panel);let n;switch(this.panel&&this.panel.view.content.element.parentElement===this._element&&this._element.removeChild(this.panel.view.content.element),this.panel=e,e.api.renderer){case"onlyWhenVisible":this.group.renderContainer.detatch(e),this.panel&&i&&this._element.appendChild(this.panel.view.content.element),n=this._element;break;case"always":e.view.content.element.parentElement===this._element&&this._element.removeChild(e.view.content.element),n=this.group.renderContainer.attach({panel:e,referenceContainer:this});break;default:throw new Error(`dockview: invalid renderer type '${e.api.renderer}'`)}if(i){const e=A(n),t=new f;t.addDisposables(e,e.onDidFocus((()=>this._onDidFocus.fire())),e.onDidBlur((()=>this._onDidBlur.fire()))),this.disposable.value=t}}openPanel(e){this.panel!==e&&this.renderPanel(e)}layout(e,t){}closePanel(){var e;this.panel&&"onlyWhenVisible"===this.panel.api.renderer&&(null===(e=this.panel.view.content.element.parentElement)||void 0===e||e.removeChild(this.panel.view.content.element)),this.panel=void 0}dispose(){this.disposable.dispose(),super.dispose()}}function Ge(e,t,i){var n,s;C(t,"dv-dragged"),document.body.appendChild(t),e.setDragImage(t,null!==(n=null==i?void 0:i.x)&&void 0!==n?n:0,null!==(s=null==i?void 0:i.y)&&void 0!==s?s:0),setTimeout((()=>{y(t,"dv-dragged"),t.remove()}),0)}class Ie extends ue{constructor(e,t,i,n){super(e),this.accessor=t,this.group=i,this.panel=n,this.panelTransfer=r.getInstance()}getData(e){return this.panelTransfer.setData([new s(this.accessor.id,this.group.id,this.panel.id)],s.prototype),{dispose:()=>{this.panelTransfer.clearData(s.prototype)}}}}class Ve extends f{get element(){return this._element}constructor(e,t,i){super(),this.panel=e,this.accessor=t,this.group=i,this.content=void 0,this._onPointDown=new v,this.onPointerDown=this._onPointDown.event,this._onDropped=new v,this.onDrop=this._onDropped.event,this._onDragStart=new v,this.onDragStart=this._onDragStart.event,this._element=document.createElement("div"),this._element.className="dv-tab",this._element.tabIndex=0,this._element.draggable=!0,x(this.element,"dv-inactive-tab",!0);const n=new Ie(this._element,this.accessor,this.group,this.panel);this.dropTarget=new De(this._element,{acceptedTargetZones:["left","right"],overlayModel:{activationSize:{value:50,type:"percentage"}},canDisplayOverlay:(e,t)=>{if(this.group.locked)return!1;const i=a();return!(!i||this.accessor.id!==i.viewId)||this.group.model.canDisplayOverlay(e,t,"tab")},getOverrideTarget:()=>{var e;return null===(e=i.model.dropTargetContainer)||void 0===e?void 0:e.model}}),this.onWillShowOverlay=this.dropTarget.onWillShowOverlay,this.addDisposables(this._onPointDown,this._onDropped,this._onDragStart,n.onDragStart((e=>{if(e.dataTransfer){const t=getComputedStyle(this.element),i=this.element.cloneNode(!0);Array.from(t).forEach((e=>i.style.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e)))),i.style.position="absolute",Ge(e.dataTransfer,i,{y:-10,x:30})}this._onDragStart.fire(e)})),n,g(this._element,"pointerdown",(e=>{this._onPointDown.fire(e)})),this.dropTarget.onDrop((e=>{this._onDropped.fire(e)})),this.dropTarget)}setActive(e){x(this.element,"dv-active-tab",e),x(this.element,"dv-inactive-tab",!e)}setContent(e){this.content&&this._element.removeChild(this.content.element),this.content=e,this._element.appendChild(this.content.element)}dispose(){super.dispose()}}class Ne extends ue{constructor(e,t,i){super(e),this.accessor=t,this.group=i,this.panelTransfer=r.getInstance(),this.addDisposables(g(e,"pointerdown",(e=>{e.shiftKey&&(e[E]=!0)}),!0))}isCancelled(e){return"floating"===this.group.api.location.type&&!e.shiftKey}getData(e){const t=e.dataTransfer;this.panelTransfer.setData([new s(this.accessor.id,this.group.id,null)],s.prototype);const i=window.getComputedStyle(this.el),n=i.getPropertyValue("--dv-activegroup-visiblepanel-tab-background-color"),o=i.getPropertyValue("--dv-activegroup-visiblepanel-tab-color");if(t){const e=document.createElement("div");e.style.backgroundColor=n,e.style.color=o,e.style.padding="2px 8px",e.style.height="24px",e.style.fontSize="11px",e.style.lineHeight="20px",e.style.borderRadius="12px",e.style.position="absolute",e.style.pointerEvents="none",e.style.top="-9999px",e.textContent=`Multiple Panels (${this.group.size})`,Ge(t,e,{y:-10,x:30})}return{dispose:()=>{this.panelTransfer.clearData(s.prototype)}}}}class ke extends f{get element(){return this._element}constructor(e,t){super(),this.accessor=e,this.group=t,this._onDrop=new v,this.onDrop=this._onDrop.event,this._onDragStart=new v,this.onDragStart=this._onDragStart.event,this._element=document.createElement("div"),this._element.className="dv-void-container",this._element.draggable=!0,this.addDisposables(this._onDrop,this._onDragStart,g(this._element,"pointerdown",(()=>{this.accessor.doSetGroupActive(this.group)})));const i=new Ne(this._element,e,t);this.dropTraget=new De(this._element,{acceptedTargetZones:["center"],canDisplayOverlay:(e,i)=>{const n=a();return!(!n||this.accessor.id!==n.viewId)||t.model.canDisplayOverlay(e,i,"header_space")},getOverrideTarget:()=>{var e;return null===(e=t.model.dropTargetContainer)||void 0===e?void 0:e.model}}),this.onWillShowOverlay=this.dropTraget.onWillShowOverlay,this.addDisposables(i,i.onDragStart((e=>{this._onDragStart.fire(e)})),this.dropTraget.onDrop((e=>{this._onDrop.fire(e)})),this.dropTraget)}}class Le extends f{get element(){return this._element}constructor(e){super(),this.scrollableElement=e,this._scrollLeft=0,this._element=document.createElement("div"),this._element.className="dv-scrollable",this._horizontalScrollbar=document.createElement("div"),this._horizontalScrollbar.className="dv-scrollbar-horizontal",this.element.appendChild(e),this.element.appendChild(this._horizontalScrollbar),this.addDisposables(g(this.element,"wheel",(e=>{this._scrollLeft+=e.deltaY*Le.MouseWheelSpeed,this.calculateScrollbarStyles()})),g(this._horizontalScrollbar,"pointerdown",(e=>{e.preventDefault(),x(this.element,"dv-scrollable-scrolling",!0);const t=e.clientX,i=this._scrollLeft,n=e=>{const n=e.clientX-t,{clientWidth:s}=this.element,{scrollWidth:o}=this.scrollableElement,r=s/o;this._scrollLeft=i+n/r,this.calculateScrollbarStyles()},s=()=>{x(this.element,"dv-scrollable-scrolling",!1),document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",s),document.removeEventListener("pointercancel",s)};document.addEventListener("pointermove",n),document.addEventListener("pointerup",s),document.addEventListener("pointercancel",s)})),g(this.element,"scroll",(()=>{this.calculateScrollbarStyles()})),g(this.scrollableElement,"scroll",(()=>{this._scrollLeft=this.scrollableElement.scrollLeft,this.calculateScrollbarStyles()})),b(this.element,(()=>{x(this.element,"dv-scrollable-resizing",!0),this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout((()=>{clearTimeout(this._animationTimer),x(this.element,"dv-scrollable-resizing",!1)}),500),this.calculateScrollbarStyles()})))}calculateScrollbarStyles(){const{clientWidth:e}=this.element,{scrollWidth:t}=this.scrollableElement;if(t>e){const i=e*(e/t);this._horizontalScrollbar.style.width=`${i}px`,this._scrollLeft=R(this._scrollLeft,0,this.scrollableElement.scrollWidth-e),this.scrollableElement.scrollLeft=this._scrollLeft;const n=this._scrollLeft/(t-e);this._horizontalScrollbar.style.left=(e-i)*n+"px"}else this._horizontalScrollbar.style.width="0px",this._horizontalScrollbar.style.left="0px",this._scrollLeft=0}}Le.MouseWheelSpeed=1;class Te extends f{get showTabsOverflowControl(){return this._showTabsOverflowControl}set showTabsOverflowControl(e){if(this._showTabsOverflowControl!=e&&(this._showTabsOverflowControl=e,e)){const e=new D(this._tabsList);this._observerDisposable.value=new f(e,e.onDidChange((e=>{const t=e.hasScrollX||e.hasScrollY;this.toggleDropdown({reset:!t})})),g(this._tabsList,"scroll",(()=>{this.toggleDropdown({reset:!1})})))}}get element(){return this._element}get panels(){return this._tabs.map((e=>e.value.panel.id))}get size(){return this._tabs.length}get tabs(){return this._tabs.map((e=>e.value))}constructor(e,t,i){if(super(),this.group=e,this.accessor=t,this._observerDisposable=new _,this._tabs=[],this.selectedIndex=-1,this._showTabsOverflowControl=!1,this._onTabDragStart=new v,this.onTabDragStart=this._onTabDragStart.event,this._onDrop=new v,this.onDrop=this._onDrop.event,this._onWillShowOverlay=new v,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onOverflowTabsChange=new v,this.onOverflowTabsChange=this._onOverflowTabsChange.event,this._tabsList=document.createElement("div"),this._tabsList.className="dv-tabs-container dv-horizontal",this.showTabsOverflowControl=i.showTabsOverflowControl,"native"===t.options.scrollbars)this._element=this._tabsList;else{const e=new Le(this._tabsList);this._element=e.element,this.addDisposables(e)}this.addDisposables(this._onOverflowTabsChange,this._observerDisposable,this._onWillShowOverlay,this._onDrop,this._onTabDragStart,g(this.element,"pointerdown",(e=>{if(e.defaultPrevented)return;0===e.button&&this.accessor.doSetGroupActive(this.group)})),l.from((()=>{for(const{value:e,disposable:t}of this._tabs)t.dispose(),e.dispose();this._tabs=[]})))}indexOf(e){return this._tabs.findIndex((t=>t.value.panel.id===e))}isActive(e){return this.selectedIndex>-1&&this._tabs[this.selectedIndex].value===e}setActivePanel(e){let t=0;for(const i of this._tabs){const n=e.id===i.value.panel.id;if(i.value.setActive(n),n){const e=i.value.element,n=e.parentElement;(t<n.scrollLeft||t+e.clientWidth>n.scrollLeft+n.clientWidth)&&(n.scrollLeft=t)}t+=i.value.element.clientWidth}}openPanel(e,t){if(void 0===t&&(t=this._tabs.length),this._tabs.find((t=>t.value.panel.id===e.id)))return;const i=new Ve(e,this.accessor,this.group);i.setContent(e.view.tab);const n=new f(i.onDragStart((t=>{this._onTabDragStart.fire({nativeEvent:t,panel:e})})),i.onPointerDown((t=>{if(t.defaultPrevented)return;const n=!this.accessor.options.disableFloatingGroups,s="floating"===this.group.api.location.type&&1===this.size;if(n&&!s&&t.shiftKey){t.preventDefault();const e=this.accessor.getGroupPanel(i.panel.id),{top:n,left:s}=i.element.getBoundingClientRect(),{top:o,left:r}=this.accessor.element.getBoundingClientRect();this.accessor.addFloatingGroup(e,{x:s-r,y:n-o,inDragMode:!0})}else if(0===t.button)this.group.activePanel!==e&&this.group.model.openPanel(e)})),i.onDrop((e=>{this._onDrop.fire({event:e.nativeEvent,index:this._tabs.findIndex((e=>e.value===i))})})),i.onWillShowOverlay((e=>{this._onWillShowOverlay.fire(new Ue(e,{kind:"tab",panel:this.group.activePanel,api:this.accessor.api,group:this.group,getData:a}))}))),s={value:i,disposable:n};this.addTab(s,t)}delete(e){const t=this.indexOf(e),i=this._tabs.splice(t,1)[0],{value:n,disposable:s}=i;s.dispose(),n.dispose(),n.element.remove()}addTab(e,t){if(void 0===t&&(t=this._tabs.length),t<0||t>this._tabs.length)throw new Error("invalid location");this._tabsList.insertBefore(e.value.element,this._tabsList.children[t]),this._tabs=[...this._tabs.slice(0,t),e,...this._tabs.slice(t)],this.selectedIndex<0&&(this.selectedIndex=t)}toggleDropdown(e){const t=e.reset?[]:this._tabs.filter((e=>!function(e,t){const i=O(e),n=O(t);return!(i.left<n.left||i.left+i.width>n.left+n.width)}(e.value.element,this._tabsList))).map((e=>e.value.panel.id));this._onOverflowTabsChange.fire({tabs:t,reset:e.reset})}}const Re=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"height",e.height),t.setAttributeNS(null,"width",e.width),t.setAttributeNS(null,"viewBox",e.viewbox),t.setAttributeNS(null,"aria-hidden","false"),t.setAttributeNS(null,"focusable","false"),t.classList.add("dv-svg");const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"d",e.path),t.appendChild(i),t},Me=()=>Re({width:"11",height:"11",viewbox:"0 0 15 25",path:"M2.15 24.1L0 21.95L9.9 12.05L0 2.15L2.15 0L14.2 12.05L2.15 24.1Z"});class We extends f{get onTabDragStart(){return this.tabs.onTabDragStart}get panels(){return this.tabs.panels}get size(){return this.tabs.size}get hidden(){return this._hidden}set hidden(e){this._hidden=e,this.element.style.display=e?"none":""}get element(){return this._element}constructor(e,t){super(),this.accessor=e,this.group=t,this._hidden=!1,this.dropdownPart=null,this._overflowTabs=[],this._dropdownDisposable=new _,this._onDrop=new v,this.onDrop=this._onDrop.event,this._onGroupDragStart=new v,this.onGroupDragStart=this._onGroupDragStart.event,this._onWillShowOverlay=new v,this.onWillShowOverlay=this._onWillShowOverlay.event,this._element=document.createElement("div"),this._element.className="dv-tabs-and-actions-container",x(this._element,"dv-full-width-single-tab","fullwidth"===this.accessor.options.singleTabMode),this.rightActionsContainer=document.createElement("div"),this.rightActionsContainer.className="dv-right-actions-container",this.leftActionsContainer=document.createElement("div"),this.leftActionsContainer.className="dv-left-actions-container",this.preActionsContainer=document.createElement("div"),this.preActionsContainer.className="dv-pre-actions-container",this.tabs=new Te(t,e,{showTabsOverflowControl:!e.options.disableTabsOverflowList}),this.voidContainer=new ke(this.accessor,this.group),this._element.appendChild(this.preActionsContainer),this._element.appendChild(this.tabs.element),this._element.appendChild(this.leftActionsContainer),this._element.appendChild(this.voidContainer.element),this._element.appendChild(this.rightActionsContainer),this.addDisposables(this.tabs.onDrop((e=>this._onDrop.fire(e))),this.tabs.onWillShowOverlay((e=>this._onWillShowOverlay.fire(e))),e.onDidOptionsChange((()=>{this.tabs.showTabsOverflowControl=!e.options.disableTabsOverflowList})),this.tabs.onOverflowTabsChange((e=>{this.toggleDropdown(e)})),this.tabs,this._onWillShowOverlay,this._onDrop,this._onGroupDragStart,this.voidContainer,this.voidContainer.onDragStart((e=>{this._onGroupDragStart.fire({nativeEvent:e,group:this.group})})),this.voidContainer.onDrop((e=>{this._onDrop.fire({event:e.nativeEvent,index:this.tabs.size})})),this.voidContainer.onWillShowOverlay((e=>{this._onWillShowOverlay.fire(new Ue(e,{kind:"header_space",panel:this.group.activePanel,api:this.accessor.api,group:this.group,getData:a}))})),g(this.voidContainer.element,"pointerdown",(e=>{if(e.defaultPrevented)return;if(!this.accessor.options.disableFloatingGroups&&e.shiftKey&&"floating"!==this.group.api.location.type){e.preventDefault();const{top:t,left:i}=this.element.getBoundingClientRect(),{top:n,left:s}=this.accessor.element.getBoundingClientRect();this.accessor.addFloatingGroup(this.group,{x:i-s+20,y:t-n+20,inDragMode:!0})}})))}show(){this.hidden||(this.element.style.display="")}hide(){this._element.style.display="none"}setRightActionsElement(e){this.rightActions!==e&&(this.rightActions&&(this.rightActions.remove(),this.rightActions=void 0),e&&(this.rightActionsContainer.appendChild(e),this.rightActions=e))}setLeftActionsElement(e){this.leftActions!==e&&(this.leftActions&&(this.leftActions.remove(),this.leftActions=void 0),e&&(this.leftActionsContainer.appendChild(e),this.leftActions=e))}setPrefixActionsElement(e){this.preActions!==e&&(this.preActions&&(this.preActions.remove(),this.preActions=void 0),e&&(this.preActionsContainer.appendChild(e),this.preActions=e))}isActive(e){return this.tabs.isActive(e)}indexOf(e){return this.tabs.indexOf(e)}setActive(e){}delete(e){this.tabs.delete(e),this.updateClassnames()}setActivePanel(e){this.tabs.setActivePanel(e)}openPanel(e,t){void 0===t&&(t=this.tabs.size),this.tabs.openPanel(e,t),this.updateClassnames()}closePanel(e){this.delete(e.id)}updateClassnames(){x(this._element,"dv-single-tab",1===this.size)}toggleDropdown(e){const t=e.reset?[]:e.tabs;if(this._overflowTabs=t,this._overflowTabs.length>0&&this.dropdownPart)return void this.dropdownPart.update({tabs:t.length});if(0===this._overflowTabs.length)return void this._dropdownDisposable.dispose();const i=document.createElement("div");i.className="dv-tabs-overflow-dropdown-root";const n=function(){const e=document.createElement("div");e.className="dv-tabs-overflow-dropdown-default";const t=document.createElement("span");t.textContent="";const i=Me();return e.appendChild(i),e.appendChild(t),{element:e,update:e=>{t.textContent=`${e.tabs}`}}}();n.update({tabs:t.length}),this.dropdownPart=n,i.appendChild(n.element),this.rightActionsContainer.prepend(i),this._dropdownDisposable.value=new f(l.from((()=>{var e,t;i.remove(),null===(t=null===(e=this.dropdownPart)||void 0===e?void 0:e.dispose)||void 0===t||t.call(e),this.dropdownPart=null})),g(i,"pointerdown",(e=>{e.preventDefault()}),{capture:!0}),g(i,"click",(e=>{const t=document.createElement("div");t.style.overflow="auto",t.className="dv-tabs-overflow-container";for(const i of this.tabs.tabs.filter((e=>this._overflowTabs.includes(e.panel.id)))){const e=this.group.panels.find((e=>e===i.panel)),n=e.view.createTabRenderer("headerOverflow").element,s=document.createElement("div");x(s,"dv-tab",!0),x(s,"dv-active-tab",e.api.isActive),x(s,"dv-inactive-tab",!e.api.isActive),s.addEventListener("mousedown",(()=>{this.accessor.popupService.close(),i.element.scrollIntoView(),i.panel.api.setActive()})),s.appendChild(n),t.appendChild(s)}this.accessor.popupService.openPopover(t,{x:e.clientX,y:e.clientY})})))}}class He extends c{constructor(e,t,i,n,s){super(),this.nativeEvent=e,this.target=t,this.position=i,this.getData=n,this.group=s}}const je=(()=>{const e={disableAutoResizing:void 0,hideBorders:void 0,singleTabMode:void 0,disableFloatingGroups:void 0,floatingGroupBounds:void 0,popoutUrl:void 0,defaultRenderer:void 0,debug:void 0,rootOverlayModel:void 0,locked:void 0,disableDnd:void 0,className:void 0,noPanelsOverlay:void 0,dndEdges:void 0,theme:void 0,disableTabsOverflowList:void 0,scrollbars:void 0};return Object.keys(e)})();class Be extends p{get nativeEvent(){return this.options.nativeEvent}get position(){return this.options.position}get panel(){return this.options.panel}get group(){return this.options.group}get api(){return this.options.api}constructor(e){super(),this.options=e}getData(){return this.options.getData()}}class Fe extends Be{get kind(){return this._kind}constructor(e){super(e),this._kind=e.kind}}class Ue{get kind(){return this.options.kind}get nativeEvent(){return this.event.nativeEvent}get position(){return this.event.position}get defaultPrevented(){return this.event.defaultPrevented}get panel(){return this.options.panel}get api(){return this.options.api}get group(){return this.options.group}preventDefault(){this.event.preventDefault()}getData(){return this.options.getData()}constructor(e,t){this.event=e,this.options=t}}class Je extends f{get element(){throw new Error("dockview: not supported")}get activePanel(){return this._activePanel}get locked(){return this._locked}set locked(e){this._locked=e,x(this.container,"dv-locked-groupview","no-drop-target"===e||e)}get isActive(){return this._isGroupActive}get panels(){return this._panels}get size(){return this._panels.length}get isEmpty(){return 0===this._panels.length}get hasWatermark(){return!(!this.watermark||!this.container.contains(this.watermark.element))}get header(){return this.tabsContainer}get isContentFocused(){return!!document.activeElement&&S(document.activeElement,this.contentContainer.element)}get location(){return this._location}set location(e){switch(this._location=e,x(this.container,"dv-groupview-floating",!1),x(this.container,"dv-groupview-popout",!1),e.type){case"grid":this.contentContainer.dropTarget.setTargetZones(["top","bottom","left","right","center"]);break;case"floating":this.contentContainer.dropTarget.setTargetZones(["center"]),this.contentContainer.dropTarget.setTargetZones(e?["center"]:["top","bottom","left","right","center"]),x(this.container,"dv-groupview-floating",!0);break;case"popout":this.contentContainer.dropTarget.setTargetZones(["center"]),x(this.container,"dv-groupview-popout",!0)}this.groupPanel.api._onDidLocationChange.fire({location:this.location})}constructor(e,t,i,n,s){var o;super(),this.container=e,this.accessor=t,this.id=i,this.options=n,this.groupPanel=s,this._isGroupActive=!1,this._locked=!1,this._location={type:"grid"},this.mostRecentlyUsed=[],this._overwriteRenderContainer=null,this._overwriteDropTargetContainer=null,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._width=0,this._height=0,this._panels=[],this._panelDisposables=new Map,this._onMove=new v,this.onMove=this._onMove.event,this._onDidDrop=new v,this.onDidDrop=this._onDidDrop.event,this._onWillDrop=new v,this.onWillDrop=this._onWillDrop.event,this._onWillShowOverlay=new v,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onTabDragStart=new v,this.onTabDragStart=this._onTabDragStart.event,this._onGroupDragStart=new v,this.onGroupDragStart=this._onGroupDragStart.event,this._onDidAddPanel=new v,this.onDidAddPanel=this._onDidAddPanel.event,this._onDidPanelTitleChange=new v,this.onDidPanelTitleChange=this._onDidPanelTitleChange.event,this._onDidPanelParametersChange=new v,this.onDidPanelParametersChange=this._onDidPanelParametersChange.event,this._onDidRemovePanel=new v,this.onDidRemovePanel=this._onDidRemovePanel.event,this._onDidActivePanelChange=new v,this.onDidActivePanelChange=this._onDidActivePanelChange.event,this._onUnhandledDragOverEvent=new v,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,x(this.container,"dv-groupview",!0),this._api=new ce(this.accessor),this.tabsContainer=new We(this.accessor,this.groupPanel),this.contentContainer=new Oe(this.accessor,this),e.append(this.tabsContainer.element,this.contentContainer.element),this.header.hidden=!!n.hideHeader,this.locked=null!==(o=n.locked)&&void 0!==o&&o,this.addDisposables(this._onTabDragStart,this._onGroupDragStart,this._onWillShowOverlay,this.tabsContainer.onTabDragStart((e=>{this._onTabDragStart.fire(e)})),this.tabsContainer.onGroupDragStart((e=>{this._onGroupDragStart.fire(e)})),this.tabsContainer.onDrop((e=>{this.handleDropEvent("header",e.event,"center",e.index)})),this.contentContainer.onDidFocus((()=>{this.accessor.doSetGroupActive(this.groupPanel)})),this.contentContainer.onDidBlur((()=>{})),this.contentContainer.dropTarget.onDrop((e=>{this.handleDropEvent("content",e.nativeEvent,e.position)})),this.tabsContainer.onWillShowOverlay((e=>{this._onWillShowOverlay.fire(e)})),this.contentContainer.dropTarget.onWillShowOverlay((e=>{this._onWillShowOverlay.fire(new Ue(e,{kind:"content",panel:this.activePanel,api:this._api,group:this.groupPanel,getData:a}))})),this._onMove,this._onDidChange,this._onDidDrop,this._onWillDrop,this._onDidAddPanel,this._onDidRemovePanel,this._onDidActivePanelChange,this._onUnhandledDragOverEvent,this._onDidPanelTitleChange,this._onDidPanelParametersChange)}focusContent(){this.contentContainer.element.focus()}set renderContainer(e){this.panels.forEach((e=>{this.renderContainer.detatch(e)})),this._overwriteRenderContainer=e,this.panels.forEach((e=>{this.rerender(e)}))}get renderContainer(){var e;return null!==(e=this._overwriteRenderContainer)&&void 0!==e?e:this.accessor.overlayRenderContainer}set dropTargetContainer(e){this._overwriteDropTargetContainer=e}get dropTargetContainer(){var e;return null!==(e=this._overwriteDropTargetContainer)&&void 0!==e?e:this.accessor.rootDropTargetContainer}initialize(){this.options.panels&&this.options.panels.forEach((e=>{this.doAddPanel(e)})),this.options.activePanel&&this.openPanel(this.options.activePanel),this.setActive(this.isActive,!0),this.updateContainer(),this.accessor.options.createRightHeaderActionComponent&&(this._rightHeaderActions=this.accessor.options.createRightHeaderActionComponent(this.groupPanel),this.addDisposables(this._rightHeaderActions),this._rightHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setRightActionsElement(this._rightHeaderActions.element)),this.accessor.options.createLeftHeaderActionComponent&&(this._leftHeaderActions=this.accessor.options.createLeftHeaderActionComponent(this.groupPanel),this.addDisposables(this._leftHeaderActions),this._leftHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setLeftActionsElement(this._leftHeaderActions.element)),this.accessor.options.createPrefixHeaderActionComponent&&(this._prefixHeaderActions=this.accessor.options.createPrefixHeaderActionComponent(this.groupPanel),this.addDisposables(this._prefixHeaderActions),this._prefixHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setPrefixActionsElement(this._prefixHeaderActions.element))}rerender(e){this.contentContainer.renderPanel(e,{asActive:!1})}indexOf(e){return this.tabsContainer.indexOf(e.id)}toJSON(){var e;const t={views:this.tabsContainer.panels,activeView:null===(e=this._activePanel)||void 0===e?void 0:e.id,id:this.id};return!1!==this.locked&&(t.locked=this.locked),this.header.hidden&&(t.hideHeader=!0),t}moveToNext(e){e||(e={}),e.panel||(e.panel=this.activePanel);const t=e.panel?this.panels.indexOf(e.panel):-1;let i;if(t<this.panels.length-1)i=t+1;else{if(e.suppressRoll)return;i=0}this.openPanel(this.panels[i])}moveToPrevious(e){if(e||(e={}),e.panel||(e.panel=this.activePanel),!e.panel)return;const t=this.panels.indexOf(e.panel);let i;if(t>0)i=t-1;else{if(e.suppressRoll)return;i=this.panels.length-1}this.openPanel(this.panels[i])}containsPanel(e){return this.panels.includes(e)}init(e){}update(e){}focus(){var e;null===(e=this._activePanel)||void 0===e||e.focus()}openPanel(e,t){void 0===t&&(t={}),("number"!=typeof t.index||t.index>this.panels.length)&&(t.index=this.panels.length);const i=!!t.skipSetActive;e.updateParentGroup(this.groupPanel,{skipSetActive:t.skipSetActive}),this.doAddPanel(e,t.index,{skipSetActive:i}),this._activePanel!==e?(i||this.doSetActivePanel(e),t.skipSetGroupActive||this.accessor.doSetGroupActive(this.groupPanel),t.skipSetActive||this.updateContainer()):this.contentContainer.renderPanel(e,{asActive:!0})}removePanel(e,t){void 0===t&&(t={skipSetActive:!1});const i="string"==typeof e?e:e.id,n=this._panels.find((e=>e.id===i));if(!n)throw new Error("invalid operation");return this._removePanel(n,t)}closeAllPanels(){if(this.panels.length>0){const e=[...this.panels];for(const t of e)this.doClose(t)}else this.accessor.removeGroup(this.groupPanel)}closePanel(e){this.doClose(e)}doClose(e){const t=1===this.panels.length&&1===this.accessor.groups.length;this.accessor.removePanel(e,t&&"emptyGroup"===this.accessor.options.noPanelsOverlay?{removeEmptyGroup:!1}:void 0)}isPanelActive(e){return this._activePanel===e}updateActions(e){this.tabsContainer.setRightActionsElement(e)}setActive(e,t){void 0===t&&(t=!1),(t||this.isActive!==e)&&(this._isGroupActive=e,x(this.container,"dv-active-group",e),x(this.container,"dv-inactive-group",!e),this.tabsContainer.setActive(this.isActive),!this._activePanel&&this.panels.length>0&&this.doSetActivePanel(this.panels[0]),this.updateContainer())}layout(e,t){var i;this._width=e,this._height=t,this.contentContainer.layout(this._width,this._height),(null===(i=this._activePanel)||void 0===i?void 0:i.layout)&&this._activePanel.layout(this._width,this._height)}_removePanel(e,t){const i=this._activePanel===e;if(this.doRemovePanel(e),i&&this.panels.length>0){const e=this.mostRecentlyUsed[0];this.openPanel(e,{skipSetActive:t.skipSetActive,skipSetGroupActive:t.skipSetActiveGroup})}return this._activePanel&&0===this.panels.length&&this.doSetActivePanel(void 0),t.skipSetActive||this.updateContainer(),e}doRemovePanel(e){const t=this.panels.indexOf(e);if(this._activePanel===e&&this.contentContainer.closePanel(),this.tabsContainer.delete(e.id),this._panels.splice(t,1),this.mostRecentlyUsed.includes(e)){const t=this.mostRecentlyUsed.indexOf(e);this.mostRecentlyUsed.splice(t,1)}const i=this._panelDisposables.get(e.id);i&&(i.dispose(),this._panelDisposables.delete(e.id)),this._onDidRemovePanel.fire({panel:e})}doAddPanel(e,t,i){void 0===t&&(t=this.panels.length),void 0===i&&(i={skipSetActive:!1});const n=this._panels.indexOf(e)>-1;this.tabsContainer.show(),this.contentContainer.show(),this.tabsContainer.openPanel(e,t),i.skipSetActive||this.contentContainer.openPanel(e),n||(this.updateMru(e),this.panels.splice(t,0,e),this._panelDisposables.set(e.id,new f(e.api.onDidTitleChange((e=>this._onDidPanelTitleChange.fire(e))),e.api.onDidParametersChange((e=>this._onDidPanelParametersChange.fire(e))))),this._onDidAddPanel.fire({panel:e}))}doSetActivePanel(e){this._activePanel!==e&&(this._activePanel=e,e&&(this.tabsContainer.setActivePanel(e),e.layout(this._width,this._height),this.updateMru(e),this._onDidActivePanelChange.fire({panel:e})))}updateMru(e){this.mostRecentlyUsed.includes(e)&&this.mostRecentlyUsed.splice(this.mostRecentlyUsed.indexOf(e),1),this.mostRecentlyUsed=[e,...this.mostRecentlyUsed]}updateContainer(){var e,t;if(this.panels.forEach((e=>e.runEvents())),this.isEmpty&&!this.watermark){const e=this.accessor.createWatermarkComponent();e.init({containerApi:this._api,group:this.groupPanel}),this.watermark=e,g(this.watermark.element,"pointerdown",(()=>{this.isActive||this.accessor.doSetGroupActive(this.groupPanel)})),this.contentContainer.element.appendChild(this.watermark.element)}!this.isEmpty&&this.watermark&&(this.watermark.element.remove(),null===(t=(e=this.watermark).dispose)||void 0===t||t.call(e),this.watermark=void 0)}canDisplayOverlay(e,t,i){const n=new He(e,i,t,a,this.accessor.getPanel(this.id));return this._onUnhandledDragOverEvent.fire(n),n.isAccepted}handleDropEvent(e,t,i,n){if("no-drop-target"===this.locked)return;const s="number"==typeof n?this.panels[n]:void 0,o=new Fe({nativeEvent:t,position:i,panel:s,getData:()=>a(),kind:function(){switch(e){case"header":return"number"==typeof n?"tab":"header_space";case"content":return"content"}}(),group:this.groupPanel,api:this._api});if(this._onWillDrop.fire(o),o.defaultPrevented)return;const r=a();if(r&&r.viewId===this.accessor.id){if("content"===e&&r.groupId===this.id){if("center"===i)return;if(null===r.panelId)return}if("header"===e&&r.groupId===this.id&&null===r.panelId)return;if(null===r.panelId){const{groupId:e}=r;return void this._onMove.fire({target:i,groupId:e,index:n})}if(-1!==this.tabsContainer.indexOf(r.panelId)&&1===this.tabsContainer.size)return;const{groupId:t,panelId:s}=r;if(this.id===t&&!i){if(this.tabsContainer.indexOf(s)===n)return}this._onMove.fire({target:i,groupId:r.groupId,itemId:r.panelId,index:n})}else this._onDidDrop.fire(new Be({nativeEvent:t,position:i,panel:s,getData:()=>a(),group:this.groupPanel,api:this._api}))}dispose(){var e,t,i;super.dispose(),null===(e=this.watermark)||void 0===e||e.element.remove(),null===(i=null===(t=this.watermark)||void 0===t?void 0:t.dispose)||void 0===i||i.call(t),this.watermark=void 0;for(const n of this.panels)n.dispose();this.tabsContainer.dispose(),this.contentContainer.dispose()}}class $e extends xe{constructor(e,t,i){super(e,t),this._onDidConstraintsChangeInternal=new v,this.onDidConstraintsChangeInternal=this._onDidConstraintsChangeInternal.event,this._onDidConstraintsChange=new v,this.onDidConstraintsChange=this._onDidConstraintsChange.event,this._onDidSizeChange=new v,this.onDidSizeChange=this._onDidSizeChange.event,this.addDisposables(this._onDidConstraintsChangeInternal,this._onDidConstraintsChange,this._onDidSizeChange),i&&this.initialize(i)}setConstraints(e){this._onDidConstraintsChangeInternal.fire(e)}setSize(e){this._onDidSizeChange.fire(e)}}class Ze extends ze{get priority(){return this._priority}get snap(){return this._snap}get minimumWidth(){return this.__minimumWidth()}get minimumHeight(){return this.__minimumHeight()}get maximumHeight(){return this.__maximumHeight()}get maximumWidth(){return this.__maximumWidth()}__minimumWidth(){const e="function"==typeof this._minimumWidth?this._minimumWidth():this._minimumWidth;return e!==this._evaluatedMinimumWidth&&(this._evaluatedMinimumWidth=e,this.updateConstraints()),e}__maximumWidth(){const e="function"==typeof this._maximumWidth?this._maximumWidth():this._maximumWidth;return e!==this._evaluatedMaximumWidth&&(this._evaluatedMaximumWidth=e,this.updateConstraints()),e}__minimumHeight(){const e="function"==typeof this._minimumHeight?this._minimumHeight():this._minimumHeight;return e!==this._evaluatedMinimumHeight&&(this._evaluatedMinimumHeight=e,this.updateConstraints()),e}__maximumHeight(){const e="function"==typeof this._maximumHeight?this._maximumHeight():this._maximumHeight;return e!==this._evaluatedMaximumHeight&&(this._evaluatedMaximumHeight=e,this.updateConstraints()),e}get isActive(){return this.api.isActive}get isVisible(){return this.api.isVisible}constructor(e,t,i,n){super(e,t,null!=n?n:new $e(e,t)),this._evaluatedMinimumWidth=0,this._evaluatedMaximumWidth=Number.MAX_SAFE_INTEGER,this._evaluatedMinimumHeight=0,this._evaluatedMaximumHeight=Number.MAX_SAFE_INTEGER,this._minimumWidth=0,this._minimumHeight=0,this._maximumWidth=Number.MAX_SAFE_INTEGER,this._maximumHeight=Number.MAX_SAFE_INTEGER,this._snap=!1,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,"number"==typeof(null==i?void 0:i.minimumWidth)&&(this._minimumWidth=i.minimumWidth),"number"==typeof(null==i?void 0:i.maximumWidth)&&(this._maximumWidth=i.maximumWidth),"number"==typeof(null==i?void 0:i.minimumHeight)&&(this._minimumHeight=i.minimumHeight),"number"==typeof(null==i?void 0:i.maximumHeight)&&(this._maximumHeight=i.maximumHeight),this.api.initialize(this),this.addDisposables(this.api.onWillVisibilityChange((e=>{const{isVisible:t}=e,{accessor:i}=this._params;i.setVisible(this,t)})),this.api.onActiveChange((()=>{const{accessor:e}=this._params;e.doSetGroupActive(this)})),this.api.onDidConstraintsChangeInternal((e=>{"number"!=typeof e.minimumWidth&&"function"!=typeof e.minimumWidth||(this._minimumWidth=e.minimumWidth),"number"!=typeof e.minimumHeight&&"function"!=typeof e.minimumHeight||(this._minimumHeight=e.minimumHeight),"number"!=typeof e.maximumWidth&&"function"!=typeof e.maximumWidth||(this._maximumWidth=e.maximumWidth),"number"!=typeof e.maximumHeight&&"function"!=typeof e.maximumHeight||(this._maximumHeight=e.maximumHeight)})),this.api.onDidSizeChange((e=>{this._onDidChange.fire({height:e.height,width:e.width})})),this._onDidChange)}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}init(e){e.maximumHeight&&(this._maximumHeight=e.maximumHeight),e.minimumHeight&&(this._minimumHeight=e.minimumHeight),e.maximumWidth&&(this._maximumWidth=e.maximumWidth),e.minimumWidth&&(this._minimumWidth=e.minimumWidth),this._priority=e.priority,this._snap=!!e.snap,super.init(e),"boolean"==typeof e.isVisible&&this.setVisible(e.isVisible)}updateConstraints(){this.api._onDidConstraintsChange.fire({minimumWidth:this._evaluatedMinimumWidth,maximumWidth:this._evaluatedMaximumWidth,minimumHeight:this._evaluatedMinimumHeight,maximumHeight:this._evaluatedMaximumHeight})}toJSON(){const e=super.toJSON(),t=e=>e===Number.MAX_SAFE_INTEGER?void 0:e,i=e=>e<=0?void 0:e;return Object.assign(Object.assign({},e),{minimumHeight:i(this.minimumHeight),maximumHeight:t(this.maximumHeight),minimumWidth:i(this.minimumWidth),maximumWidth:t(this.maximumWidth),snap:this.snap,priority:this.priority})}}const Xe="dockview: DockviewGroupPanelApiImpl not initialized";class Ye extends $e{get location(){if(!this._group)throw new Error(Xe);return this._group.model.location}constructor(e,t){super(e,"__dockviewgroup__"),this.accessor=t,this._onDidLocationChange=new v,this.onDidLocationChange=this._onDidLocationChange.event,this._onDidActivePanelChange=new v,this.onDidActivePanelChange=this._onDidActivePanelChange.event,this.addDisposables(this._onDidLocationChange,this._onDidActivePanelChange)}close(){if(this._group)return this.accessor.removeGroup(this._group)}getWindow(){return"popout"===this.location.type?this.location.getWindow():window}moveTo(e){var t,i,n;if(!this._group)throw new Error(Xe);const s=null!==(t=e.group)&&void 0!==t?t:this.accessor.addGroup({direction:we(null!==(i=e.position)&&void 0!==i?i:"right"),skipSetActive:!0});this.accessor.moveGroupOrPanel({from:{groupId:this._group.id},to:{group:s,position:e.group&&null!==(n=e.position)&&void 0!==n?n:"center",index:e.index}})}maximize(){if(!this._group)throw new Error(Xe);"grid"===this.location.type&&this.accessor.maximizeGroup(this._group)}isMaximized(){if(!this._group)throw new Error(Xe);return this.accessor.isMaximizedGroup(this._group)}exitMaximized(){if(!this._group)throw new Error(Xe);this.isMaximized()&&this.accessor.exitMaximizedGroup()}initialize(e){this._group=e}}class qe extends Ze{get minimumWidth(){var e;const t=null===(e=this.activePanel)||void 0===e?void 0:e.minimumWidth;return"number"==typeof t?t:super.__minimumWidth()}get minimumHeight(){var e;const t=null===(e=this.activePanel)||void 0===e?void 0:e.minimumHeight;return"number"==typeof t?t:super.__minimumHeight()}get maximumWidth(){var e;const t=null===(e=this.activePanel)||void 0===e?void 0:e.maximumWidth;return"number"==typeof t?t:super.__maximumWidth()}get maximumHeight(){var e;const t=null===(e=this.activePanel)||void 0===e?void 0:e.maximumHeight;return"number"==typeof t?t:super.__maximumHeight()}get panels(){return this._model.panels}get activePanel(){return this._model.activePanel}get size(){return this._model.size}get model(){return this._model}get locked(){return this._model.locked}set locked(e){this._model.locked=e}get header(){return this._model.header}constructor(e,t,i){var n,s,o,r,a,h;super(t,"groupview_default",{minimumHeight:null!==(s=null===(n=i.constraints)||void 0===n?void 0:n.minimumHeight)&&void 0!==s?s:100,minimumWidth:null!==(r=null===(o=i.constraints)||void 0===o?void 0:o.maximumHeight)&&void 0!==r?r:100,maximumHeight:null===(a=i.constraints)||void 0===a?void 0:a.maximumHeight,maximumWidth:null===(h=i.constraints)||void 0===h?void 0:h.maximumWidth},new Ye(t,e)),this.api.initialize(this),this._model=new Je(this.element,e,t,i,this),this.addDisposables(this.model.onDidActivePanelChange((e=>{this.api._onDidActivePanelChange.fire(e)})))}focus(){this.api.isActive||this.api.setActive(),super.focus()}initialize(){this._model.initialize()}setActive(e){super.setActive(e),this.model.setActive(e)}layout(e,t){super.layout(e,t),this.model.layout(e,t)}getComponent(){return this._model}toJSON(){return this.model.toJSON()}}const Ke={name:"dark",className:"dockview-theme-dark"},Qe={name:"light",className:"dockview-theme-light"},et={name:"visualStudio",className:"dockview-theme-vs"},tt={name:"abyss",className:"dockview-theme-abyss"},it={name:"dracula",className:"dockview-theme-dracula"},nt={name:"replit",className:"dockview-theme-replit",gap:10},st={name:"abyssSpaced",className:"dockview-theme-abyss-spaced",gap:10,dndOverlayMounting:"absolute",dndPanelOverlay:"group"},ot={name:"lightSpaced",className:"dockview-theme-light-spaced",gap:10,dndOverlayMounting:"absolute",dndPanelOverlay:"group"};class rt extends $e{get location(){return this.group.api.location}get title(){return this.panel.title}get isGroupActive(){return this.group.isActive}get renderer(){return this.panel.renderer}set group(e){const t=this._group;this._group!==e&&(this._group=e,this._onDidGroupChange.fire({}),this.setupGroupEventListeners(t),this._onDidLocationChange.fire({location:this.group.api.location}))}get group(){return this._group}get tabComponent(){return this._tabComponent}constructor(e,t,i,n,s){super(e.id,n),this.panel=e,this.accessor=i,this._onDidTitleChange=new v,this.onDidTitleChange=this._onDidTitleChange.event,this._onDidActiveGroupChange=new v,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._onDidGroupChange=new v,this.onDidGroupChange=this._onDidGroupChange.event,this._onDidRendererChange=new v,this.onDidRendererChange=this._onDidRendererChange.event,this._onDidLocationChange=new v,this.onDidLocationChange=this._onDidLocationChange.event,this.groupEventsDisposable=new _,this._tabComponent=s,this.initialize(e),this._group=t,this.setupGroupEventListeners(),this.addDisposables(this.groupEventsDisposable,this._onDidRendererChange,this._onDidTitleChange,this._onDidGroupChange,this._onDidActiveGroupChange,this._onDidLocationChange)}getWindow(){return this.group.api.getWindow()}moveTo(e){var t,i;this.accessor.moveGroupOrPanel({from:{groupId:this._group.id,panelId:this.panel.id},to:{group:null!==(t=e.group)&&void 0!==t?t:this._group,position:e.group&&null!==(i=e.position)&&void 0!==i?i:"center",index:e.index}})}setTitle(e){this.panel.setTitle(e)}setRenderer(e){this.panel.setRenderer(e)}close(){this.group.model.closePanel(this.panel)}maximize(){this.group.api.maximize()}isMaximized(){return this.group.api.isMaximized()}exitMaximized(){this.group.api.exitMaximized()}setupGroupEventListeners(e){var t;let i=null!==(t=null==e?void 0:e.isActive)&&void 0!==t&&t;this.groupEventsDisposable.value=new f(this.group.api.onDidVisibilityChange((e=>{const t=!e.isVisible&&this.isVisible,i=e.isVisible&&!this.isVisible,n=this.group.model.isPanelActive(this.panel);(t||i&&n)&&this._onDidVisibilityChange.fire(e)})),this.group.api.onDidLocationChange((e=>{this.group===this.panel.group&&this._onDidLocationChange.fire(e)})),this.group.api.onDidActiveChange((()=>{this.group===this.panel.group&&i!==this.isGroupActive&&(i=this.isGroupActive,this._onDidActiveGroupChange.fire({isActive:this.isGroupActive}))})))}}class at extends f{get params(){return this._params}get title(){return this._title}get group(){return this._group}get renderer(){var e;return null!==(e=this._renderer)&&void 0!==e?e:this.accessor.renderer}get minimumWidth(){return this._minimumWidth}get minimumHeight(){return this._minimumHeight}get maximumWidth(){return this._maximumWidth}get maximumHeight(){return this._maximumHeight}constructor(e,t,i,n,s,o,r,a){super(),this.id=e,this.accessor=n,this.containerApi=s,this.view=r,this._renderer=a.renderer,this._group=o,this._minimumWidth=a.minimumWidth,this._minimumHeight=a.minimumHeight,this._maximumWidth=a.maximumWidth,this._maximumHeight=a.maximumHeight,this.api=new rt(this,this._group,n,t,i),this.addDisposables(this.api.onActiveChange((()=>{n.setActivePanel(this)})),this.api.onDidSizeChange((e=>{this.group.api.setSize(e)})),this.api.onDidRendererChange((()=>{this.group.model.rerender(this)})))}init(e){this._params=e.params,this.view.init(Object.assign(Object.assign({},e),{api:this.api,containerApi:this.containerApi})),this.setTitle(e.title)}focus(){const e=new Ce;this.api._onWillFocus.fire(e),e.defaultPrevented||this.api.isActive||this.api.setActive()}toJSON(){return{id:this.id,contentComponent:this.view.contentComponent,tabComponent:this.view.tabComponent,params:Object.keys(this._params||{}).length>0?this._params:void 0,title:this.title,renderer:this._renderer,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,minimumWidth:this._minimumWidth,maximumWidth:this._maximumWidth}}setTitle(e){e!==this.title&&(this._title=e,this.api._onDidTitleChange.fire({title:e}))}setRenderer(e){e!==this.renderer&&(this._renderer=e,this.api._onDidRendererChange.fire({renderer:e}))}update(e){var t;this._params=Object.assign(Object.assign({},null!==(t=this._params)&&void 0!==t?t:{}),e.params);for(const i of Object.keys(e.params))void 0===e.params[i]&&delete this._params[i];this.view.update({params:this._params})}updateParentGroup(e,t){this._group=e,this.api.group=this._group;const i=this._group.model.isPanelActive(this),n=this.group.api.isActive&&i;(null==t?void 0:t.skipSetActive)||this.api.isActive!==n&&this.api._onDidActiveChange.fire({isActive:this.group.api.isActive&&i}),this.api.isVisible!==i&&this.api._onDidVisibilityChange.fire({isVisible:i})}runEvents(){const e=this._group.model.isPanelActive(this),t=this.group.api.isActive&&e;this.api.isActive!==t&&this.api._onDidActiveChange.fire({isActive:this.group.api.isActive&&e}),this.api.isVisible!==e&&this.api._onDidVisibilityChange.fire({isVisible:e})}layout(e,t){this.api._onDidDimensionChange.fire({width:e,height:t}),this.view.layout(e,t)}dispose(){this.api.dispose(),this.view.dispose()}}class ht extends f{get element(){return this._element}constructor(){super(),this._element=document.createElement("div"),this._element.className="dv-default-tab",this._content=document.createElement("div"),this._content.className="dv-default-tab-content",this.action=document.createElement("div"),this.action.className="dv-default-tab-action",this.action.appendChild(Re({width:"11",height:"11",viewbox:"0 0 28 28",path:"M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z"})),this._element.appendChild(this._content),this._element.appendChild(this.action),this.render()}init(e){this._title=e.title,this.addDisposables(e.api.onDidTitleChange((e=>{this._title=e.title,this.render()})),g(this.action,"pointerdown",(e=>{e.preventDefault()})),g(this.action,"click",(t=>{t.defaultPrevented||(t.preventDefault(),e.api.close())}))),this.render()}render(){var e;this._content.textContent!==this._title&&(this._content.textContent=null!==(e=this._title)&&void 0!==e?e:"")}}class dt{get content(){return this._content}get tab(){return this._tab}constructor(e,t,i,n){this.accessor=e,this.id=t,this.contentComponent=i,this.tabComponent=n,this._content=this.createContentComponent(this.id,i),this._tab=this.createTabComponent(this.id,n)}createTabRenderer(e){var t;const i=this.createTabComponent(this.id,this.tabComponent);return this._params&&i.init(Object.assign(Object.assign({},this._params),{tabLocation:e})),this._updateEvent&&(null===(t=i.update)||void 0===t||t.call(i,this._updateEvent)),i}init(e){this._params=e,this.content.init(e),this.tab.init(Object.assign(Object.assign({},e),{tabLocation:"header"}))}layout(e,t){var i,n;null===(n=(i=this.content).layout)||void 0===n||n.call(i,e,t)}update(e){var t,i,n,s;this._updateEvent=e,null===(i=(t=this.content).update)||void 0===i||i.call(t,e),null===(s=(n=this.tab).update)||void 0===s||s.call(n,e)}dispose(){var e,t,i,n;null===(t=(e=this.content).dispose)||void 0===t||t.call(e),null===(n=(i=this.tab).dispose)||void 0===n||n.call(i)}createContentComponent(e,t){return this.accessor.options.createComponent({id:e,name:t})}createTabComponent(e,t){const i=null!=t?t:this.accessor.options.defaultTabComponent;if(i){if(this.accessor.options.createTabComponent){const t=this.accessor.options.createTabComponent({id:e,name:i});return t||new ht}console.warn(`dockview: tabComponent '${t}' was not found. falling back to the default tab.`)}return new ht}}class lt{constructor(e){this.accessor=e}fromJSON(e,t){var i,n;const s=e.id,o=e.params,r=e.title,a=e.view,h=a?a.content.id:null!==(i=e.contentComponent)&&void 0!==i?i:"unknown",d=a?null===(n=a.tab)||void 0===n?void 0:n.id:e.tabComponent,l=new dt(this.accessor,s,h,d),p=new at(s,h,d,this.accessor,new ce(this.accessor),t,l,{renderer:e.renderer,minimumWidth:e.minimumWidth,minimumHeight:e.minimumHeight,maximumWidth:e.maximumWidth,maximumHeight:e.maximumHeight});return p.init({title:null!=r?r:s,params:null!=o?o:{}}),p}}class pt extends f{get element(){return this._element}constructor(){super(),this._element=document.createElement("div"),this._element.className="dv-watermark"}init(e){}}const ct=new class{constructor(){this._orderedList=[]}push(e){this._orderedList=[...this._orderedList.filter((t=>t!==e)),e],this.update()}destroy(e){this._orderedList=this._orderedList.filter((t=>t!==e)),this.update()}update(){for(let e=0;e<this._orderedList.length;e++)this._orderedList[e].setAttribute("aria-level",`${e}`),this._orderedList[e].style.zIndex=`calc(var(--dv-overlay-z-index, 999) + ${2*e})`}};class ut extends f{set minimumInViewportWidth(e){this.options.minimumInViewportWidth=e}set minimumInViewportHeight(e){this.options.minimumInViewportHeight=e}get element(){return this._element}get isVisible(){return this._isVisible}constructor(e){super(),this.options=e,this._element=document.createElement("div"),this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this._onDidChangeEnd=new v,this.onDidChangeEnd=this._onDidChangeEnd.event,this.addDisposables(this._onDidChange,this._onDidChangeEnd),this._element.className="dv-resize-container",this._isVisible=!0,this.setupResize("top"),this.setupResize("bottom"),this.setupResize("left"),this.setupResize("right"),this.setupResize("topleft"),this.setupResize("topright"),this.setupResize("bottomleft"),this.setupResize("bottomright"),this._element.appendChild(this.options.content),this.options.container.appendChild(this._element),this.setBounds(Object.assign(Object.assign(Object.assign(Object.assign({height:this.options.height,width:this.options.width},"top"in this.options&&{top:this.options.top}),"bottom"in this.options&&{bottom:this.options.bottom}),"left"in this.options&&{left:this.options.left}),"right"in this.options&&{right:this.options.right})),ct.push(this._element)}setVisible(e){e!==this.isVisible&&(this._isVisible=e,x(this.element,"dv-hidden",!this.isVisible))}bringToFront(){ct.push(this._element)}setBounds(e){void 0===e&&(e={}),"number"==typeof e.height&&(this._element.style.height=`${e.height}px`),"number"==typeof e.width&&(this._element.style.width=`${e.width}px`),"top"in e&&"number"==typeof e.top&&(this._element.style.top=`${e.top}px`,this._element.style.bottom="auto",this.verticalAlignment="top"),"bottom"in e&&"number"==typeof e.bottom&&(this._element.style.bottom=`${e.bottom}px`,this._element.style.top="auto",this.verticalAlignment="bottom"),"left"in e&&"number"==typeof e.left&&(this._element.style.left=`${e.left}px`,this._element.style.right="auto",this.horiziontalAlignment="left"),"right"in e&&"number"==typeof e.right&&(this._element.style.right=`${e.right}px`,this._element.style.left="auto",this.horiziontalAlignment="right");const t=this.options.container.getBoundingClientRect(),i=this._element.getBoundingClientRect(),n=Math.max(0,this.getMinimumWidth(i.width)),s=Math.max(0,this.getMinimumHeight(i.height));if("top"===this.verticalAlignment){const e=R(i.top-t.top,-s,Math.max(0,t.height-i.height+s));this._element.style.top=`${e}px`,this._element.style.bottom="auto"}if("bottom"===this.verticalAlignment){const e=R(t.bottom-i.bottom,-s,Math.max(0,t.height-i.height+s));this._element.style.bottom=`${e}px`,this._element.style.top="auto"}if("left"===this.horiziontalAlignment){const e=R(i.left-t.left,-n,Math.max(0,t.width-i.width+n));this._element.style.left=`${e}px`,this._element.style.right="auto"}if("right"===this.horiziontalAlignment){const e=R(t.right-i.right,-n,Math.max(0,t.width-i.width+n));this._element.style.right=`${e}px`,this._element.style.left="auto"}this._onDidChange.fire()}toJSON(){const e=this.options.container.getBoundingClientRect(),t=this._element.getBoundingClientRect(),i={};return"top"===this.verticalAlignment?i.top=parseFloat(this._element.style.top):"bottom"===this.verticalAlignment?i.bottom=parseFloat(this._element.style.bottom):i.top=t.top-e.top,"left"===this.horiziontalAlignment?i.left=parseFloat(this._element.style.left):"right"===this.horiziontalAlignment?i.right=parseFloat(this._element.style.right):i.left=t.left-e.left,i.width=t.width,i.height=t.height,i}setupDrag(e,t){void 0===t&&(t={inDragMode:!1});const i=new _,n=()=>{let e=null;const t=G();i.value=new f({dispose:()=>{t.release()}},g(window,"pointermove",(t=>{const i=this.options.container.getBoundingClientRect(),n=t.clientX-i.left,s=t.clientY-i.top;x(this._element,"dv-resize-container-dragging",!0);const o=this._element.getBoundingClientRect();null===e&&(e={x:t.clientX-o.left,y:t.clientY-o.top});const r=Math.max(0,this.getMinimumWidth(o.width)),a=Math.max(0,this.getMinimumHeight(o.height)),h=R(s-e.y,-a,Math.max(0,i.height-o.height+a)),d=R(e.y-s+i.height-o.height,-a,Math.max(0,i.height-o.height+a)),l=R(n-e.x,-r,Math.max(0,i.width-o.width+r)),p=R(e.x-n+i.width-o.width,-r,Math.max(0,i.width-o.width+r)),c={};h<=d?c.top=h:c.bottom=d,l<=p?c.left=l:c.right=p,this.setBounds(c)})),g(window,"pointerup",(()=>{x(this._element,"dv-resize-container-dragging",!1),i.dispose(),this._onDidChangeEnd.fire()})))};this.addDisposables(i,g(e,"pointerdown",(e=>{e.defaultPrevented?e.preventDefault():P(e)||n()})),g(this.options.content,"pointerdown",(e=>{e.defaultPrevented||P(e)||e.shiftKey&&n()})),g(this.options.content,"pointerdown",(()=>{ct.push(this._element)}),!0)),t.inDragMode&&n()}setupResize(e){const t=document.createElement("div");t.className=`dv-resize-handle-${e}`,this._element.appendChild(t);const i=new _;this.addDisposables(i,g(t,"pointerdown",(t=>{t.preventDefault();let n=null;const s=G();i.value=new f(g(window,"pointermove",(t=>{const i=this.options.container.getBoundingClientRect(),s=this._element.getBoundingClientRect(),o=t.clientY-i.top,r=t.clientX-i.left;let a,h,d,l,p,c;null===n&&(n={originalY:o,originalHeight:s.height,originalX:r,originalWidth:s.width});const u=()=>{a=R(o,-Number.MAX_VALUE,n.originalY+n.originalHeight>i.height?this.getMinimumHeight(i.height):Math.max(0,n.originalY+n.originalHeight-ut.MINIMUM_HEIGHT)),d=n.originalY+n.originalHeight-a,h=i.height-a-d},m=()=>{a=n.originalY-n.originalHeight,d=R(o-a,a<0&&"number"==typeof this.options.minimumInViewportHeight?-a+this.options.minimumInViewportHeight:ut.MINIMUM_HEIGHT,Number.MAX_VALUE),h=i.height-a-d},v=()=>{l=R(r,-Number.MAX_VALUE,n.originalX+n.originalWidth>i.width?this.getMinimumWidth(i.width):Math.max(0,n.originalX+n.originalWidth-ut.MINIMUM_WIDTH)),c=n.originalX+n.originalWidth-l,p=i.width-l-c},g=()=>{l=n.originalX-n.originalWidth,c=R(r-l,l<0&&"number"==typeof this.options.minimumInViewportWidth?-l+this.options.minimumInViewportWidth:ut.MINIMUM_WIDTH,Number.MAX_VALUE),p=i.width-l-c};switch(e){case"top":u();break;case"bottom":m();break;case"left":v();break;case"right":g();break;case"topleft":u(),v();break;case"topright":u(),g();break;case"bottomleft":m(),v();break;case"bottomright":m(),g()}const w={};a<=h?w.top=a:w.bottom=h,l<=p?w.left=l:w.right=p,w.height=d,w.width=c,this.setBounds(w)})),{dispose:()=>{s.release()}},g(window,"pointerup",(()=>{i.dispose(),this._onDidChangeEnd.fire()})))})))}getMinimumWidth(e){return"number"==typeof this.options.minimumInViewportWidth?e-this.options.minimumInViewportWidth:0}getMinimumHeight(e){return"number"==typeof this.options.minimumInViewportHeight?e-this.options.minimumInViewportHeight:0}dispose(){ct.destroy(this._element),this._element.remove(),super.dispose()}}ut.MINIMUM_HEIGHT=20,ut.MINIMUM_WIDTH=20;class mt extends f{constructor(e,t){super(),this.group=e,this.overlay=t,this.addDisposables(t)}position(e){this.overlay.setBounds(e)}}const vt=100,gt=100,wt=100,ft=300,_t=300;class Dt extends f{constructor(e,t){super(),this.element=e,this.accessor=t,this.map={},this._disposed=!1,this.addDisposables(l.from((()=>{for(const e of Object.values(this.map))e.disposable.dispose(),e.destroy.dispose();this._disposed=!0})))}detatch(e){if(this.map[e.api.id]){const{disposable:t,destroy:i}=this.map[e.api.id];return t.dispose(),i.dispose(),delete this.map[e.api.id],!0}return!1}attach(e){const{panel:t,referenceContainer:i}=e;if(!this.map[t.api.id]){const e=function(){const e=document.createElement("div");return e.tabIndex=-1,e}();e.className="dv-render-overlay",this.map[t.api.id]={panel:t,disposable:l.NONE,destroy:l.NONE,element:e}}const n=this.map[t.api.id].element;t.view.content.element.parentElement!==n&&n.appendChild(t.view.content.element),n.parentElement!==this.element&&this.element.appendChild(n);const s=()=>{const e=O(i.element),s=O(this.element);n.style.left=e.left-s.left+"px",n.style.top=e.top-s.top+"px",n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,x(n,"dv-render-overlay-float","floating"===t.group.api.location.type)},o=()=>{t.api.isVisible&&s(),n.style.display=t.api.isVisible?"":"none"},r=new _,a=()=>{"floating"===t.api.location.type?queueMicrotask((()=>{const e=this.accessor.floatingGroups.find((e=>e.group===t.api.group));if(!e)return;const i=e.overlay.element,s=()=>{const e=Number(i.getAttribute("aria-level"));n.style.zIndex=`calc(var(--dv-overlay-z-index, 999) + ${2*e+1})`},o=new MutationObserver((()=>{s()}));r.value=l.from((()=>o.disconnect())),o.observe(i,{attributeFilter:["aria-level"],attributes:!0}),s()})):n.style.zIndex=""},h=new f(r,new me(n,{onDragEnd:e=>{i.dropTarget.dnd.onDragEnd(e)},onDragEnter:e=>{i.dropTarget.dnd.onDragEnter(e)},onDragLeave:e=>{i.dropTarget.dnd.onDragLeave(e)},onDrop:e=>{i.dropTarget.dnd.onDrop(e)},onDragOver:e=>{i.dropTarget.dnd.onDragOver(e)}}),t.api.onDidVisibilityChange((()=>{o()})),t.api.onDidDimensionsChange((()=>{t.api.isVisible&&s()})),t.api.onDidLocationChange((()=>{a()})));return this.map[t.api.id].destroy=l.from((()=>{var e;t.view.content.element.parentElement===n&&n.removeChild(t.view.content.element),null===(e=n.parentElement)||void 0===e||e.removeChild(n)})),a(),queueMicrotask((()=>{this.isDisposed||o()})),this.map[t.api.id].disposable.dispose(),this.map[t.api.id].disposable=h,n}}var bt=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{h(n.next(e))}catch(t){o(t)}}function a(e){try{h(n.throw(e))}catch(t){o(t)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}h((n=n.apply(e,t||[])).next())}))};class yt extends f{get window(){var e,t;return null!==(t=null===(e=this._window)||void 0===e?void 0:e.value)&&void 0!==t?t:null}constructor(e,t,i){super(),this.target=e,this.className=t,this.options=i,this._onWillClose=new v,this.onWillClose=this._onWillClose.event,this._onDidClose=new v,this.onDidClose=this._onDidClose.event,this._window=null,this.addDisposables(this._onWillClose,this._onDidClose,{dispose:()=>{this.close()}})}dimensions(){if(!this._window)return null;const e=this._window.value.screenX;return{top:this._window.value.screenY,left:e,width:this._window.value.innerWidth,height:this._window.value.innerHeight}}close(){var e,t;this._window&&(this._onWillClose.fire(),null===(t=(e=this.options).onWillClose)||void 0===t||t.call(e,{id:this.target,window:this._window.value}),this._window.disposable.dispose(),this._window=null,this._onDidClose.fire())}open(){var e,t;return bt(this,void 0,void 0,(function*(){if(this._window)throw new Error("instance of popout window is already open");const i=`${this.options.url}`,n=Object.entries({top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height}).map((e=>{let[t,i]=e;return`${t}=${i}`})).join(","),s=window.open(i,this.target,n);if(!s)return null;const o=new f;this._window={value:s,disposable:o},o.addDisposables(l.from((()=>{s.close()})),g(window,"beforeunload",(()=>{this.close()})));const r=this.createPopoutWindowContainer();return this.className&&r.classList.add(this.className),null===(t=(e=this.options).onDidOpen)||void 0===t||t.call(e,{id:this.target,window:s}),new Promise(((e,t)=>{s.addEventListener("unload",(e=>{})),s.addEventListener("load",(()=>{try{const t=s.document;t.title=document.title,t.body.appendChild(r),function(e,t){const i=Array.from(t);for(const s of i){if(s.href){const t=e.createElement("link");t.href=s.href,t.type=s.type,t.rel="stylesheet",e.head.appendChild(t)}let t=[];try{s.cssRules&&(t=Array.from(s.cssRules).map((e=>e.cssText)))}catch(n){}for(const i of t){const t=e.createElement("style");t.appendChild(e.createTextNode(i)),e.head.appendChild(t)}}}(t,window.document.styleSheets),g(s,"beforeunload",(()=>{this.close()})),e(r)}catch(i){t(i)}}))}))}))}createPopoutWindowContainer(){const e=document.createElement("div");return e.classList.add("dv-popout-window"),e.id="dv-popout-window",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0px",e.style.left="0px",e}}class Ct extends f{constructor(e){super(),this.accessor=e,this.init()}init(){const e=new Set,t=new Set;this.addDisposables(this.accessor.onDidAddPanel((t=>{if(e.has(t.api.id))throw new Error(`dockview: Invalid event sequence. [onDidAddPanel] called for panel ${t.api.id} but panel already exists`);e.add(t.api.id)})),this.accessor.onDidRemovePanel((t=>{if(!e.has(t.api.id))throw new Error(`dockview: Invalid event sequence. [onDidRemovePanel] called for panel ${t.api.id} but panel does not exists`);e.delete(t.api.id)})),this.accessor.onDidAddGroup((e=>{if(t.has(e.api.id))throw new Error(`dockview: Invalid event sequence. [onDidAddGroup] called for group ${e.api.id} but group already exists`);t.add(e.api.id)})),this.accessor.onDidRemoveGroup((e=>{if(!t.has(e.api.id))throw new Error(`dockview: Invalid event sequence. [onDidRemoveGroup] called for group ${e.api.id} but group does not exists`);t.delete(e.api.id)})))}}class xt extends f{constructor(e){super(),this.root=e,this._active=null,this._activeDisposable=new _,this._element=document.createElement("div"),this._element.className="dv-popover-anchor",this._element.style.position="relative",this.root.prepend(this._element),this.addDisposables(l.from((()=>{this.close()})),this._activeDisposable)}openPopover(e,t){this.close();const i=document.createElement("div");i.style.position="absolute",i.style.zIndex="99",i.appendChild(e);const n=this._element.getBoundingClientRect(),s=n.left,o=n.top;i.style.top=t.y-o+"px",i.style.left=t.x-s+"px",this._element.appendChild(i),this._active=i,this._activeDisposable.value=new f(g(window,"pointerdown",(e=>{var t;const n=e.target;if(!(n instanceof HTMLElement))return;let s=n;for(;s&&s!==i;)s=null!==(t=null==s?void 0:s.parentElement)&&void 0!==t?t:null;s||this.close()})))}close(){this._active&&(this._active.remove(),this._activeDisposable.dispose(),this._active=null)}}class St extends f{get disabled(){return this._disabled}set disabled(e){var t;this.disabled!==e&&(this._disabled=e,e&&(null===(t=this.model)||void 0===t||t.clear()))}get model(){if(!this.disabled)return{clear:()=>{var e;this._model&&(null===(e=this._model.root.parentElement)||void 0===e||e.removeChild(this._model.root)),this._model=void 0},exists:()=>!!this._model,getElements:(e,t)=>{const i=this._outline!==t;if(this._outline=t,this._model)return this._model.changed=i,this._model;const n=this.createContainer(),s=this.createAnchor();if(this._model={root:n,overlay:s,changed:i},n.appendChild(s),this.element.appendChild(n),(null==e?void 0:e.target)instanceof HTMLElement){const t=e.target.getBoundingClientRect(),i=this.element.getBoundingClientRect();s.style.left=t.left-i.left+"px",s.style.top=t.top-i.top+"px"}return this._model}}}constructor(e,t){super(),this.element=e,this._disabled=!1,this._disabled=t.disabled,this.addDisposables(l.from((()=>{var e;null===(e=this.model)||void 0===e||e.clear()})))}createContainer(){const e=document.createElement("div");return e.className="dv-drop-target-container",e}createAnchor(){const e=document.createElement("div");return e.className="dv-drop-target-anchor",e.style.visibility="hidden",e}}const At={activationSize:{type:"pixels",value:10},size:{type:"pixels",value:20}};function zt(e){const t=e.from.activePanel;[...e.from.panels].map((t=>{const i=e.from.model.removePanel(t);return e.from.model.renderContainer.detatch(t),i})).forEach((i=>{e.to.model.openPanel(i,{skipSetActive:t!==i,skipSetGroupActive:!0})}))}class Et extends he{get orientation(){return this.gridview.orientation}get totalPanels(){return this.panels.length}get panels(){return this.groups.flatMap((e=>e.panels))}get options(){return this._options}get activePanel(){const e=this.activeGroup;if(e)return e.activePanel}get renderer(){var e;return null!==(e=this.options.defaultRenderer)&&void 0!==e?e:"onlyWhenVisible"}get api(){return this._api}get floatingGroups(){return this._floatingGroups}constructor(e,t){var i,n,s;super(e,{proportionalLayout:!0,orientation:j.HORIZONTAL,styles:t.hideBorders?{separatorBorder:"transparent"}:void 0,disableAutoResizing:t.disableAutoResizing,locked:t.locked,margin:null!==(n=null===(i=t.theme)||void 0===i?void 0:i.gap)&&void 0!==n?n:0,className:t.className}),this.nextGroupId=M(),this._deserializer=new lt(this),this._watermark=null,this._onWillDragPanel=new v,this.onWillDragPanel=this._onWillDragPanel.event,this._onWillDragGroup=new v,this.onWillDragGroup=this._onWillDragGroup.event,this._onDidDrop=new v,this.onDidDrop=this._onDidDrop.event,this._onWillDrop=new v,this.onWillDrop=this._onWillDrop.event,this._onWillShowOverlay=new v,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onUnhandledDragOverEvent=new v,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this._onDidRemovePanel=new v,this.onDidRemovePanel=this._onDidRemovePanel.event,this._onDidAddPanel=new v,this.onDidAddPanel=this._onDidAddPanel.event,this._onDidPopoutGroupSizeChange=new v,this.onDidPopoutGroupSizeChange=this._onDidPopoutGroupSizeChange.event,this._onDidPopoutGroupPositionChange=new v,this.onDidPopoutGroupPositionChange=this._onDidPopoutGroupPositionChange.event,this._onDidLayoutFromJSON=new v,this.onDidLayoutFromJSON=this._onDidLayoutFromJSON.event,this._onDidActivePanelChange=new v,this.onDidActivePanelChange=this._onDidActivePanelChange.event,this._onDidMovePanel=new v,this.onDidMovePanel=this._onDidMovePanel.event,this._onDidMaximizedGroupChange=new v,this.onDidMaximizedGroupChange=this._onDidMaximizedGroupChange.event,this._floatingGroups=[],this._popoutGroups=[],this._onDidRemoveGroup=new v,this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidAddGroup=new v,this.onDidAddGroup=this._onDidAddGroup.event,this._onDidOptionsChange=new v,this.onDidOptionsChange=this._onDidOptionsChange.event,this._onDidActiveGroupChange=new v,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._moving=!1,this._options=t,this.popupService=new xt(this.element),this._themeClassnames=new I(this.element),this._api=new ce(this),this.rootDropTargetContainer=new St(this.element,{disabled:!0}),this.overlayRenderContainer=new Dt(this.gridview.element,this),this._rootDropTarget=new De(this.element,{className:"dv-drop-target-edge",canDisplayOverlay:(e,t)=>{const i=a();if(i)return i.viewId===this.id&&("center"!==t||0===this.gridview.length);if("center"===t&&0!==this.gridview.length)return!1;const n=new He(e,"edge",t,a);return this._onUnhandledDragOverEvent.fire(n),n.isAccepted},acceptedTargetZones:["top","bottom","left","right","center"],overlayModel:null!==(s=t.rootOverlayModel)&&void 0!==s?s:At,getOverrideTarget:()=>{var e;return null===(e=this.rootDropTargetContainer)||void 0===e?void 0:e.model}}),this.updateDropTargetModel(t),x(this.gridview.element,"dv-dockview",!0),x(this.element,"dv-debug",!!t.debug),this.updateTheme(),this.updateWatermark(),t.debug&&this.addDisposables(new Ct(this)),this.addDisposables(this.rootDropTargetContainer,this.overlayRenderContainer,this._onWillDragPanel,this._onWillDragGroup,this._onWillShowOverlay,this._onDidActivePanelChange,this._onDidAddPanel,this._onDidRemovePanel,this._onDidLayoutFromJSON,this._onDidDrop,this._onWillDrop,this._onDidMovePanel,this._onDidAddGroup,this._onDidRemoveGroup,this._onDidActiveGroupChange,this._onUnhandledDragOverEvent,this._onDidMaximizedGroupChange,this._onDidOptionsChange,this._onDidPopoutGroupSizeChange,this._onDidPopoutGroupPositionChange,this.onDidViewVisibilityChangeMicroTaskQueue((()=>{this.updateWatermark()})),this.onDidAdd((e=>{this._moving||this._onDidAddGroup.fire(e)})),this.onDidRemove((e=>{this._moving||this._onDidRemoveGroup.fire(e)})),this.onDidActiveChange((e=>{this._moving||this._onDidActiveGroupChange.fire(e)})),this.onDidMaximizedChange((e=>{this._onDidMaximizedGroupChange.fire({group:e.panel,isMaximized:e.isMaximized})})),d.any(this.onDidAdd,this.onDidRemove)((()=>{this.updateWatermark()})),d.any(this.onDidAddPanel,this.onDidRemovePanel,this.onDidAddGroup,this.onDidRemove,this.onDidMovePanel,this.onDidActivePanelChange,this.onDidPopoutGroupPositionChange,this.onDidPopoutGroupSizeChange)((()=>{this._bufferOnDidLayoutChange.fire()})),l.from((()=>{for(const e of[...this._floatingGroups])e.dispose();for(const e of[...this._popoutGroups])e.disposable.dispose()})),this._rootDropTarget,this._rootDropTarget.onWillShowOverlay((e=>{this.gridview.length>0&&"center"===e.position||this._onWillShowOverlay.fire(new Ue(e,{kind:"edge",panel:void 0,api:this._api,group:void 0,getData:a}))})),this._rootDropTarget.onDrop((e=>{var t;const i=new Fe({nativeEvent:e.nativeEvent,position:e.position,panel:void 0,api:this._api,group:void 0,getData:a,kind:"edge"});if(this._onWillDrop.fire(i),i.defaultPrevented)return;const n=a();n?this.moveGroupOrPanel({from:{groupId:n.groupId,panelId:null!==(t=n.panelId)&&void 0!==t?t:void 0},to:{group:this.orthogonalize(e.position),position:"center"}}):this._onDidDrop.fire(new Be({nativeEvent:e.nativeEvent,position:e.position,panel:void 0,api:this._api,group:void 0,getData:a}))})),this._rootDropTarget)}setVisible(e,t){switch(e.api.location.type){case"grid":super.setVisible(e,t);break;case"floating":{const i=this.floatingGroups.find((t=>t.group===e));i&&(i.overlay.setVisible(t),e.api._onDidVisibilityChange.fire({isVisible:t}));break}case"popout":console.warn("dockview: You cannot hide a group that is in a popout window")}}addPopoutGroup(e,t){var i,n,s,o,r;if(e instanceof at&&1===e.group.size)return this.addPopoutGroup(e.group,t);const a=function(e){function t(e){const t=[];for(let i=0;i<e.classList.length;i++)t.push(e.classList.item(i));return t}let i,n=e;for(;null!==n&&(i=t(n).find((e=>e.startsWith("dockview-theme-"))),"string"!=typeof i);)n=n.parentElement;return i}(this.gridview.element),h=this.element;const d=(null==t?void 0:t.position)?t.position:e instanceof qe?e.element.getBoundingClientRect():e.group?e.group.element.getBoundingClientRect():h.getBoundingClientRect(),p=null!==(n=null===(i=null==t?void 0:t.overridePopoutGroup)||void 0===i?void 0:i.id)&&void 0!==n?n:this.getNextGroupId(),c=new yt(`${this.id}-${p}`,null!=a?a:"",{url:null!==(r=null!==(s=null==t?void 0:t.popoutUrl)&&void 0!==s?s:null===(o=this.options)||void 0===o?void 0:o.popoutUrl)&&void 0!==r?r:"/popout.html",left:window.screenX+d.left,top:window.screenY+d.top,width:d.width,height:d.height,onDidOpen:null==t?void 0:t.onDidOpen,onWillClose:null==t?void 0:t.onWillClose}),u=new f(c,c.onDidClose((()=>{u.dispose()})));return c.open().then((i=>{var n;if(c.isDisposed)return!1;if(null===i)return u.dispose(),!1;const s=document.createElement("div");s.className="dv-overlay-render-container";const o=new Dt(s,this),r=e instanceof at?e.group:e,a=e.api.location.type,h=null!==r.element.parentElement;let d,m;if(h?(null==t?void 0:t.overridePopoutGroup)?d=t.overridePopoutGroup:(d=this.createGroup({id:p}),this._onDidAddGroup.fire(d)):d=r,d.model.renderContainer=o,d.layout(c.window.innerWidth,c.window.innerHeight),!(null==t?void 0:t.overridePopoutGroup)&&h)if(e instanceof at)this.movingLock((()=>{const t=r.model.removePanel(e);d.model.openPanel(t)}));else switch(this.movingLock((()=>zt({from:r,to:d}))),a){case"grid":r.api.setVisible(!1);break;case"floating":case"popout":m=null===(n=this._floatingGroups.find((t=>t.group.api.id===e.api.id)))||void 0===n?void 0:n.overlay.toJSON(),this.removeGroup(r)}i.classList.add("dv-dockview"),i.style.overflow="hidden",i.appendChild(s),i.appendChild(d.element);const w=document.createElement("div"),_=new St(w,{disabled:this.rootDropTargetContainer.disabled});let D;i.appendChild(w),d.model.dropTargetContainer=_,d.model.location={type:"popout",getWindow:()=>c.window,popoutUrl:null==t?void 0:t.popoutUrl},h&&"grid"===e.api.location.type&&e.api.setVisible(!1),this.doSetGroupAndPanelActive(d),u.addDisposables(d.api.onDidActiveChange((e=>{var t;e.isActive&&(null===(t=c.window)||void 0===t||t.focus())})),d.api.onWillFocus((()=>{var e;null===(e=c.window)||void 0===e||e.focus()})));const b=h&&r&&this.getPanel(r.id),y={window:c,popoutGroup:d,referenceGroup:b?r.id:void 0,disposable:{dispose:()=>(u.dispose(),D)}},C=function(e){const t=new v;let i,n=e.screenX,s=e.screenY;const o=()=>{if(e.closed)return;const r=e.screenX,a=e.screenY;r===n&&a===s||(clearTimeout(i),i=setTimeout((()=>{t.fire()}),100),n=r,s=a),requestAnimationFrame(o)};return o(),t}(c.window);return u.addDisposables(C,function(e,t){let i;return new f(g(e,"resize",(()=>{clearTimeout(i),i=setTimeout((()=>{t()}),100)})))}(c.window,(()=>{this._onDidPopoutGroupSizeChange.fire({width:c.window.innerWidth,height:c.window.innerHeight,group:d})})),C.event((()=>{this._onDidPopoutGroupPositionChange.fire({screenX:c.window.screenX,screenY:c.window.screenX,group:d})})),g(c.window,"resize",(()=>{d.layout(c.window.innerWidth,c.window.innerHeight)})),o,l.from((()=>{if(!this.isDisposed)if(h&&this.getPanel(r.id))this.movingLock((()=>zt({from:d,to:r}))),r.api.isVisible||r.api.setVisible(!0),this.getPanel(d.id)&&this.doRemoveGroup(d,{skipPopoutAssociated:!0});else if(this.getPanel(d.id)){d.model.renderContainer=this.overlayRenderContainer,d.model.dropTargetContainer=this.rootDropTargetContainer,D=d;if(!this._popoutGroups.find((e=>e.popoutGroup===d)))return;m?this.addFloatingGroup(d,{height:m.height,width:m.width,position:m}):(this.doRemoveGroup(d,{skipDispose:!0,skipActive:!0,skipPopoutReturn:!0}),d.model.location={type:"grid"},this.movingLock((()=>{this.doAddGroup(d,[0])}))),this.doSetGroupAndPanelActive(d)}}))),this._popoutGroups.push(y),this.updateWatermark(),!0})).catch((e=>(console.error("dockview: failed to create popout window",e),!1)))}addFloatingGroup(e,t){var i,n,s,o,r;let a;if(e instanceof at)a=this.createGroup(),this._onDidAddGroup.fire(a),this.movingLock((()=>this.removePanel(e,{removeEmptyGroup:!0,skipDispose:!0,skipSetActiveGroup:!0}))),this.movingLock((()=>a.model.openPanel(e,{skipSetGroupActive:!0})));else{a=e;const n=null===(i=this._popoutGroups.find((e=>e.popoutGroup===a)))||void 0===i?void 0:i.referenceGroup,s=n?this.getPanel(n):void 0;"boolean"==typeof(null==t?void 0:t.skipRemoveGroup)&&t.skipRemoveGroup||(s?(this.movingLock((()=>zt({from:e,to:s}))),this.doRemoveGroup(e,{skipPopoutReturn:!0,skipPopoutAssociated:!0}),this.doRemoveGroup(s,{skipDispose:!0}),a=s):this.doRemoveGroup(e,{skipDispose:!0,skipPopoutReturn:!0,skipPopoutAssociated:!1}))}const h=function(){if(null==t?void 0:t.position){const e={};return"left"in t.position?e.left=Math.max(t.position.left,0):"right"in t.position?e.right=Math.max(t.position.right,0):e.left=gt,"top"in t.position?e.top=Math.max(t.position.top,0):"bottom"in t.position?e.bottom=Math.max(t.position.bottom,0):e.top=wt,"number"==typeof t.width?e.width=Math.max(t.width,0):e.width=ft,"number"==typeof t.height?e.height=Math.max(t.height,0):e.height=_t,e}return{left:"number"==typeof(null==t?void 0:t.x)?Math.max(t.x,0):gt,top:"number"==typeof(null==t?void 0:t.y)?Math.max(t.y,0):wt,width:"number"==typeof(null==t?void 0:t.width)?Math.max(t.width,0):ft,height:"number"==typeof(null==t?void 0:t.height)?Math.max(t.height,0):_t}}(),d=new ut(Object.assign(Object.assign({container:this.gridview.element,content:a.element},h),{minimumInViewportWidth:"boundedWithinViewport"===this.options.floatingGroupBounds?void 0:null!==(s=null===(n=this.options.floatingGroupBounds)||void 0===n?void 0:n.minimumWidthWithinViewport)&&void 0!==s?s:vt,minimumInViewportHeight:"boundedWithinViewport"===this.options.floatingGroupBounds?void 0:null!==(r=null===(o=this.options.floatingGroupBounds)||void 0===o?void 0:o.minimumHeightWithinViewport)&&void 0!==r?r:vt})),l=a.element.querySelector(".dv-void-container");if(!l)throw new Error("failed to find drag handle");d.setupDrag(l,{inDragMode:"boolean"==typeof(null==t?void 0:t.inDragMode)&&t.inDragMode});const p=new mt(a,d),c=new f(a.api.onDidActiveChange((e=>{e.isActive&&d.bringToFront()})),b(a.element,(e=>{const{width:t,height:i}=e.contentRect;a.layout(t,i)})));p.addDisposables(d.onDidChange((()=>{a.layout(a.width,a.height)})),d.onDidChangeEnd((()=>{this._bufferOnDidLayoutChange.fire()})),a.onDidChange((e=>{d.setBounds({height:null==e?void 0:e.height,width:null==e?void 0:e.width})})),{dispose:()=>{c.dispose(),T(this._floatingGroups,p),a.model.location={type:"grid"},this.updateWatermark()}}),this._floatingGroups.push(p),a.model.location={type:"floating"},(null==t?void 0:t.skipActiveGroup)||this.doSetGroupAndPanelActive(a),this.updateWatermark()}orthogonalize(e,t){switch(e){case"top":case"bottom":this.gridview.orientation===j.HORIZONTAL&&this.gridview.insertOrthogonalSplitviewAtRoot();break;case"left":case"right":this.gridview.orientation===j.VERTICAL&&this.gridview.insertOrthogonalSplitviewAtRoot()}switch(e){case"top":case"left":case"center":return this.createGroupAtLocation([0],void 0,t);case"bottom":case"right":return this.createGroupAtLocation([this.gridview.length],void 0,t);default:throw new Error(`unsupported position ${e}`)}}updateOptions(e){var t,i;if(super.updateOptions(e),"floatingGroupBounds"in e)for(const n of this._floatingGroups){switch(e.floatingGroupBounds){case"boundedWithinViewport":n.overlay.minimumInViewportHeight=void 0,n.overlay.minimumInViewportWidth=void 0;break;case void 0:n.overlay.minimumInViewportHeight=vt,n.overlay.minimumInViewportWidth=vt;break;default:n.overlay.minimumInViewportHeight=null===(t=e.floatingGroupBounds)||void 0===t?void 0:t.minimumHeightWithinViewport,n.overlay.minimumInViewportWidth=null===(i=e.floatingGroupBounds)||void 0===i?void 0:i.minimumWidthWithinViewport}n.overlay.setBounds()}this.updateDropTargetModel(e),this._options=Object.assign(Object.assign({},this.options),e),"theme"in e&&this.updateTheme(),this.layout(this.gridview.width,this.gridview.height,!0)}layout(e,t,i){if(super.layout(e,t,i),this._floatingGroups)for(const n of this._floatingGroups)n.overlay.setBounds()}focus(){var e;null===(e=this.activeGroup)||void 0===e||e.focus()}getGroupPanel(e){return this.panels.find((t=>t.id===e))}setActivePanel(e){e.group.model.openPanel(e),this.doSetGroupAndPanelActive(e.group)}moveToNext(e){var t;if(void 0===e&&(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}if(e.includePanel&&e.group&&e.group.activePanel!==e.group.panels[e.group.panels.length-1])return void e.group.model.moveToNext({suppressRoll:!0});const i=Q(e.group.element),n=null===(t=this.gridview.next(i))||void 0===t?void 0:t.view;this.doSetGroupAndPanelActive(n)}moveToPrevious(e){var t;if(void 0===e&&(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}if(e.includePanel&&e.group&&e.group.activePanel!==e.group.panels[0])return void e.group.model.moveToPrevious({suppressRoll:!0});const i=Q(e.group.element),n=null===(t=this.gridview.previous(i))||void 0===t?void 0:t.view;n&&this.doSetGroupAndPanelActive(n)}toJSON(){var e;const t=this.gridview.serialize(),i=this.panels.reduce(((e,t)=>(e[t.id]=t.toJSON(),e)),{}),n=this._floatingGroups.map((e=>({data:e.group.toJSON(),position:e.overlay.toJSON()}))),s=this._popoutGroups.map((e=>({data:e.popoutGroup.toJSON(),gridReferenceGroup:e.referenceGroup,position:e.window.dimensions(),url:"popout"===e.popoutGroup.api.location.type?e.popoutGroup.api.location.popoutUrl:void 0}))),o={grid:t,panels:i,activeGroup:null===(e=this.activeGroup)||void 0===e?void 0:e.id};return n.length>0&&(o.floatingGroups=n),s.length>0&&(o.popoutGroups=s),o}fromJSON(e){var t,i,n;if(this.clear(),"object"!=typeof e||null===e)throw new Error("serialized layout must be a non-null object");const{grid:s,panels:o,activeGroup:r}=e;if("branch"!==s.root.type||!Array.isArray(s.root.data))throw new Error("root must be of type branch");try{const a=this.width,h=this.height,d=e=>{const{id:t,locked:i,hideHeader:n,views:s,activeView:r}=e;if("string"!=typeof t)throw new Error("group id must be of type string");const a=this.createGroup({id:t,locked:!!i,hideHeader:!!n});this._onDidAddGroup.fire(a);const h=[];for(const d of s){const e=this._deserializer.fromJSON(o[d],a);h.push(e)}for(let o=0;o<s.length;o++){const e=h[o],t="string"==typeof r&&r===e.id;a.model.openPanel(e,{skipSetActive:!t,skipSetGroupActive:!0})}return!a.activePanel&&a.panels.length>0&&a.model.openPanel(a.panels[a.panels.length-1],{skipSetGroupActive:!0}),a};this.gridview.deserialize(s,{fromJSON:e=>d(e.data)}),this.layout(a,h,!0);const l=null!==(t=e.floatingGroups)&&void 0!==t?t:[];for(const e of l){const{data:t,position:i}=e,n=d(t);this.addFloatingGroup(n,{position:i,width:i.width,height:i.height,skipRemoveGroup:!0,inDragMode:!1})}const p=null!==(i=e.popoutGroups)&&void 0!==i?i:[];for(const e of p){const{data:t,position:i,gridReferenceGroup:s,url:o}=e,r=d(t);this.addPopoutGroup(null!==(n=s?this.getPanel(s):void 0)&&void 0!==n?n:r,{position:null!=i?i:void 0,overridePopoutGroup:s?r:void 0,popoutUrl:o})}for(const e of this._floatingGroups)e.overlay.setBounds();if("string"==typeof r){const e=this.getPanel(r);e&&this.doSetGroupAndPanelActive(e)}}catch(a){console.error("dockview: failed to deserialize layout. Reverting changes",a);for(const e of this.groups)for(const t of e.panels)this.removePanel(t,{removeEmptyGroup:!1,skipDispose:!1});for(const e of this.groups)e.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e);for(const e of[...this._floatingGroups])e.dispose();throw this.clear(),a}this.updateWatermark(),this._onDidLayoutFromJSON.fire()}clear(){const e=Array.from(this._groups.values()).map((e=>e.value)),t=!!this.activeGroup;for(const i of e)this.removeGroup(i,{skipActive:!0});t&&this.doSetGroupAndPanelActive(void 0),this.gridview.clear()}closeAllGroups(){for(const e of this._groups.entries()){const[t,i]=e;i.value.model.closeAllPanels()}}addPanel(e){var t,i;if(this.panels.find((t=>t.id===e.id)))throw new Error(`panel with id ${e.id} already exists`);let n;if(e.position&&e.floating)throw new Error("you can only provide one of: position, floating as arguments to .addPanel(...)");const s={width:e.initialWidth,height:e.initialHeight};let o;if(e.position)if(e.position.referencePanel){const t="string"==typeof e.position.referencePanel?this.getGroupPanel(e.position.referencePanel):e.position.referencePanel;if(o=e.position.index,!t)throw new Error(`referencePanel '${e.position.referencePanel}' does not exist`);n=this.findGroup(t)}else{if(!function(e){return!!e.referenceGroup}(e.position)){const t=this.orthogonalize(ge(e.position.direction)),i=this.createPanel(e,t);return t.model.openPanel(i,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o}),e.inactive||this.doSetGroupAndPanelActive(t),t.api.setSize({height:null==s?void 0:s.height,width:null==s?void 0:s.width}),i}if(n="string"==typeof e.position.referenceGroup?null===(t=this._groups.get(e.position.referenceGroup))||void 0===t?void 0:t.value:e.position.referenceGroup,o=e.position.index,!n)throw new Error(`referenceGroup '${e.position.referenceGroup}' does not exist`)}else n=this.activeGroup;let r;if(n){const t=ae((null===(i=e.position)||void 0===i?void 0:i.direction)||"within");if(e.floating){const t=this.createGroup();this._onDidAddGroup.fire(t);const i="object"==typeof e.floating&&null!==e.floating?e.floating:{};this.addFloatingGroup(t,Object.assign(Object.assign({},i),{inDragMode:!1,skipRemoveGroup:!0,skipActiveGroup:!0})),r=this.createPanel(e,t),t.model.openPanel(r,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o})}else if("floating"===n.api.location.type||"center"===t)r=this.createPanel(e,n),n.model.openPanel(r,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o}),n.api.setSize({width:null==s?void 0:s.width,height:null==s?void 0:s.height}),e.inactive||this.doSetGroupAndPanelActive(n);else{const i=Q(n.element),a=ee(this.gridview.orientation,i,t),h=this.createGroupAtLocation(a,this.orientationAtLocation(a)===j.VERTICAL?null==s?void 0:s.height:null==s?void 0:s.width);r=this.createPanel(e,h),h.model.openPanel(r,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o}),e.inactive||this.doSetGroupAndPanelActive(h)}}else if(e.floating){const t=this.createGroup();this._onDidAddGroup.fire(t);const i="object"==typeof e.floating&&null!==e.floating?e.floating:{};this.addFloatingGroup(t,Object.assign(Object.assign({},i),{inDragMode:!1,skipRemoveGroup:!0,skipActiveGroup:!0})),r=this.createPanel(e,t),t.model.openPanel(r,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o})}else{const t=this.createGroupAtLocation([0],this.gridview.orientation===j.VERTICAL?null==s?void 0:s.height:null==s?void 0:s.width);r=this.createPanel(e,t),t.model.openPanel(r,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:o}),e.inactive||this.doSetGroupAndPanelActive(t)}return r}removePanel(e,t){void 0===t&&(t={removeEmptyGroup:!0});const i=e.group;if(!i)throw new Error(`cannot remove panel ${e.id}. it's missing a group.`);i.model.removePanel(e,{skipSetActiveGroup:t.skipSetActiveGroup}),t.skipDispose||(e.group.model.renderContainer.detatch(e),e.dispose()),0===i.size&&t.removeEmptyGroup&&this.removeGroup(i,{skipActive:t.skipSetActiveGroup})}createWatermarkComponent(){return this.options.createWatermarkComponent?this.options.createWatermarkComponent():new pt}updateWatermark(){var e,t,i;if(0===this.groups.filter((e=>"grid"===e.api.location.type&&e.api.isVisible)).length){if(!this._watermark){this._watermark=this.createWatermarkComponent(),this._watermark.init({containerApi:new ce(this)});const e=document.createElement("div");e.className="dv-watermark-container",i="watermark-component",e.setAttribute("data-testid",i),e.appendChild(this._watermark.element),this.gridview.element.appendChild(e)}}else this._watermark&&(this._watermark.element.parentElement.remove(),null===(t=(e=this._watermark).dispose)||void 0===t||t.call(e),this._watermark=null)}addGroup(e){var t;if(e){let i;if(e.referencePanel){const t="string"==typeof e.referencePanel?this.panels.find((t=>t.id===e.referencePanel)):e.referencePanel;if(!t)throw new Error(`reference panel ${e.referencePanel} does not exist`);if(i=this.findGroup(t),!i)throw new Error(`reference group for reference panel ${e.referencePanel} does not exist`)}else{if(!function(e){return!!e.referenceGroup}(e)){const t=this.orthogonalize(ge(e.direction),e);return e.skipSetActive||this.doSetGroupAndPanelActive(t),t}if(i="string"==typeof e.referenceGroup?null===(t=this._groups.get(e.referenceGroup))||void 0===t?void 0:t.value:e.referenceGroup,!i)throw new Error(`reference group ${e.referenceGroup} does not exist`)}const n=ae(e.direction||"within"),s=Q(i.element),o=ee(this.gridview.orientation,s,n),r=this.createGroup(e),a=this.getLocationOrientation(o)===j.VERTICAL?e.initialHeight:e.initialWidth;return this.doAddGroup(r,o,a),e.skipSetActive||this.doSetGroupAndPanelActive(r),r}{const t=this.createGroup(e);return this.doAddGroup(t),this.doSetGroupAndPanelActive(t),t}}getLocationOrientation(e){return e.length%2==0&&this.gridview.orientation===j.HORIZONTAL?j.HORIZONTAL:j.VERTICAL}removeGroup(e,t){this.doRemoveGroup(e,t)}doRemoveGroup(e,t){var i;const n=[...e.panels];if(!(null==t?void 0:t.skipDispose))for(const r of n)this.removePanel(r,{removeEmptyGroup:!1,skipDispose:null!==(i=null==t?void 0:t.skipDispose)&&void 0!==i&&i});const s=this.activePanel;if("floating"===e.api.location.type){const i=this._floatingGroups.find((t=>t.group===e));if(i){if((null==t?void 0:t.skipDispose)||(i.group.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e)),T(this._floatingGroups,i),i.dispose(),!(null==t?void 0:t.skipActive)&&this._activeGroup===e){const e=Array.from(this._groups.values());this.doSetGroupAndPanelActive(e.length>0?e[0].value:void 0)}return i.group}throw new Error("failed to find floating group")}if("popout"===e.api.location.type){const i=this._popoutGroups.find((t=>t.popoutGroup===e));if(i){if(!(null==t?void 0:t.skipDispose)){if(!(null==t?void 0:t.skipPopoutAssociated)){const e=i.referenceGroup?this.getPanel(i.referenceGroup):void 0;e&&0===e.panels.length&&this.removeGroup(e)}i.popoutGroup.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e)}T(this._popoutGroups,i);const n=i.disposable.dispose();if(!(null==t?void 0:t.skipPopoutReturn)&&n&&(this.doAddGroup(n,[0]),this.doSetGroupAndPanelActive(n)),!(null==t?void 0:t.skipActive)&&this._activeGroup===e){const e=Array.from(this._groups.values());this.doSetGroupAndPanelActive(e.length>0?e[0].value:void 0)}return this.updateWatermark(),i.popoutGroup}throw new Error("failed to find popout group")}const o=super.doRemoveGroup(e,t);return(null==t?void 0:t.skipActive)||this.activePanel!==s&&this._onDidActivePanelChange.fire(this.activePanel),o}movingLock(e){const t=this._moving;try{return this._moving=!0,e()}finally{this._moving=t}}moveGroupOrPanel(e){var t;const i=e.to.group,n=e.from.groupId,s=e.from.panelId,o=e.to.position,r=e.to.index,a=n?null===(t=this._groups.get(n))||void 0===t?void 0:t.value:void 0;if(!a)throw new Error(`Failed to find group id ${n}`);if(void 0!==s)if(o&&"center"!==o){const e=Q(i.element),t=ee(this.gridview.orientation,e,o);if(a.size<2){const[e,n]=V(t);if("grid"===a.api.location.type){const t=Q(a.element),[i,o]=V(t);if(N(i,e))return this.gridview.moveView(i,o,n),void this._onDidMovePanel.fire({panel:this.getGroupPanel(s),from:a})}if("popout"===a.api.location.type){const e=this._popoutGroups.find((e=>e.popoutGroup===a)),i=this.movingLock((()=>e.popoutGroup.model.removePanel(e.popoutGroup.panels[0],{skipSetActive:!0,skipSetActiveGroup:!0})));this.doRemoveGroup(a,{skipActive:!0});const n=this.createGroupAtLocation(t);return this.movingLock((()=>n.model.openPanel(i))),this.doSetGroupAndPanelActive(n),void this._onDidMovePanel.fire({panel:this.getGroupPanel(s),from:a})}const r=this.movingLock((()=>this.doRemoveGroup(a,{skipActive:!0,skipDispose:!0}))),h=Q(i.element),d=ee(this.gridview.orientation,h,o);this.movingLock((()=>this.doAddGroup(r,d))),this.doSetGroupAndPanelActive(r),this._onDidMovePanel.fire({panel:this.getGroupPanel(s),from:a})}else{const t=this.movingLock((()=>a.model.removePanel(s,{skipSetActive:!1,skipSetActiveGroup:!0})));if(!t)throw new Error(`No panel with id ${s}`);const i=ee(this.gridview.orientation,e,o),n=this.createGroupAtLocation(i);this.movingLock((()=>n.model.openPanel(t,{skipSetGroupActive:!0}))),this.doSetGroupAndPanelActive(n),this._onDidMovePanel.fire({panel:t,from:a})}}else{const e=this.movingLock((()=>a.model.removePanel(s,{skipSetActive:!1,skipSetActiveGroup:!0})));if(!e)throw new Error(`No panel with id ${s}`);0===a.model.size&&this.doRemoveGroup(a,{skipActive:!0}),this.movingLock((()=>i.model.openPanel(e,{index:r,skipSetGroupActive:!0}))),this.doSetGroupAndPanelActive(i),this._onDidMovePanel.fire({panel:e,from:a})}else this.moveGroup({from:{group:a},to:{group:i,position:o}})}moveGroup(e){const t=e.from.group,i=e.to.group,n=e.to.position;if("center"===n){const e=t.activePanel,n=this.movingLock((()=>[...t.panels].map((e=>t.model.removePanel(e.id,{skipSetActive:!0})))));0===(null==t?void 0:t.model.size)&&this.doRemoveGroup(t,{skipActive:!0}),this.movingLock((()=>{for(const t of n)i.model.openPanel(t,{skipSetActive:t!==e,skipSetGroupActive:!0})})),this.doSetGroupAndPanelActive(i)}else{switch(t.api.location.type){case"grid":this.gridview.removeView(Q(t.element));break;case"floating":{const e=this._floatingGroups.find((e=>e.group===t));if(!e)throw new Error("failed to find floating group");e.dispose();break}case"popout":{const e=this._popoutGroups.find((e=>e.popoutGroup===t));if(!e)throw new Error("failed to find popout group");e.disposable.dispose()}}const e=Q(i.element),s=ee(this.gridview.orientation,e,n);let o;switch(this.gridview.orientation){case j.VERTICAL:o=e.length%2==0?t.api.width:t.api.height;break;case j.HORIZONTAL:o=e.length%2==0?t.api.height:t.api.width}this.gridview.addView(t,o,s)}t.panels.forEach((e=>{this._onDidMovePanel.fire({panel:e,from:t})}))}doSetGroupActive(e){super.doSetGroupActive(e);const t=this.activePanel;this._moving||t===this._onDidActivePanelChange.value||this._onDidActivePanelChange.fire(t)}doSetGroupAndPanelActive(e){super.doSetGroupActive(e);const t=this.activePanel;e&&this.hasMaximizedGroup()&&!this.isMaximizedGroup(e)&&this.exitMaximizedGroup(),this._moving||t===this._onDidActivePanelChange.value||this._onDidActivePanelChange.fire(t)}getNextGroupId(){let e=this.nextGroupId.next();for(;this._groups.has(e);)e=this.nextGroupId.next();return e}createGroup(e){e||(e={});let t=null==e?void 0:e.id;if(t&&this._groups.has(e.id)&&(console.warn(`dockview: Duplicate group id ${null==e?void 0:e.id}. reassigning group id to avoid errors`),t=void 0),!t)for(t=this.nextGroupId.next();this._groups.has(t);)t=this.nextGroupId.next();const i=new qe(this,t,e);if(i.init({params:{},accessor:this}),!this._groups.has(i.id)){const e=new f(i.model.onTabDragStart((e=>{this._onWillDragPanel.fire(e)})),i.model.onGroupDragStart((e=>{this._onWillDragGroup.fire(e)})),i.model.onMove((e=>{const{groupId:t,itemId:n,target:s,index:o}=e;this.moveGroupOrPanel({from:{groupId:t,panelId:n},to:{group:i,position:s,index:o}})})),i.model.onDidDrop((e=>{this._onDidDrop.fire(e)})),i.model.onWillDrop((e=>{this._onWillDrop.fire(e)})),i.model.onWillShowOverlay((e=>{this.options.disableDnd?e.preventDefault():this._onWillShowOverlay.fire(e)})),i.model.onUnhandledDragOverEvent((e=>{this._onUnhandledDragOverEvent.fire(e)})),i.model.onDidAddPanel((e=>{this._moving||this._onDidAddPanel.fire(e.panel)})),i.model.onDidRemovePanel((e=>{this._moving||this._onDidRemovePanel.fire(e.panel)})),i.model.onDidActivePanelChange((e=>{this._moving||e.panel===this.activePanel&&this._onDidActivePanelChange.value!==e.panel&&this._onDidActivePanelChange.fire(e.panel)})),d.any(i.model.onDidPanelTitleChange,i.model.onDidPanelParametersChange)((()=>{this._bufferOnDidLayoutChange.fire()})));this._groups.set(i.id,{value:i,disposable:e})}return i.initialize(),i}createPanel(e,t){var i,n,s;const o=e.component,r=null!==(i=e.tabComponent)&&void 0!==i?i:this.options.defaultTabComponent,a=new dt(this,e.id,o,r),h=new at(e.id,o,r,this,this._api,t,a,{renderer:e.renderer,minimumWidth:e.minimumWidth,minimumHeight:e.minimumHeight,maximumWidth:e.maximumWidth,maximumHeight:e.maximumHeight});return h.init({title:null!==(n=e.title)&&void 0!==n?n:e.id,params:null!==(s=null==e?void 0:e.params)&&void 0!==s?s:{}}),h}createGroupAtLocation(e,t,i){const n=this.createGroup(i);return this.doAddGroup(n,e,t),n}findGroup(e){var t;return null===(t=Array.from(this._groups.values()).find((t=>t.value.model.containsPanel(e))))||void 0===t?void 0:t.value}orientationAtLocation(e){const t=this.gridview.orientation;return e.length%2==1?t:te(t)}updateDropTargetModel(e){"dndEdges"in e&&(this._rootDropTarget.disabled="boolean"==typeof e.dndEdges&&!1===e.dndEdges,"object"==typeof e.dndEdges&&null!==e.dndEdges?this._rootDropTarget.setOverlayModel(e.dndEdges):this._rootDropTarget.setOverlayModel(At)),"rootOverlayModel"in e&&this.updateDropTargetModel({dndEdges:e.dndEdges})}updateTheme(){var e,t;const i=null!==(e=this._options.theme)&&void 0!==e?e:tt;if(this._themeClassnames.setClassNames(i.className),this.gridview.margin=null!==(t=i.gap)&&void 0!==t?t:0,"absolute"===i.dndOverlayMounting)this.rootDropTargetContainer.disabled=!1;else this.rootDropTargetContainer.disabled=!0}}class Pt extends he{get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get options(){return this._options}get deserializer(){return this._deserializer}set deserializer(e){this._deserializer=e}constructor(e,t){var i;super(e,{proportionalLayout:null===(i=t.proportionalLayout)||void 0===i||i,orientation:t.orientation,styles:t.hideBorders?{separatorBorder:"transparent"}:void 0,disableAutoResizing:t.disableAutoResizing,className:t.className}),this._onDidLayoutfromJSON=new v,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidRemoveGroup=new v,this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidAddGroup=new v,this.onDidAddGroup=this._onDidAddGroup.event,this._onDidActiveGroupChange=new v,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._options=t,this.addDisposables(this._onDidAddGroup,this._onDidRemoveGroup,this._onDidActiveGroupChange,this.onDidAdd((e=>{this._onDidAddGroup.fire(e)})),this.onDidRemove((e=>{this._onDidRemoveGroup.fire(e)})),this.onDidActiveChange((e=>{this._onDidActiveGroupChange.fire(e)})))}updateOptions(e){super.updateOptions(e);const t="string"==typeof e.orientation&&this.gridview.orientation!==e.orientation;this._options=Object.assign(Object.assign({},this.options),e),t&&(this.gridview.orientation=e.orientation),this.layout(this.gridview.width,this.gridview.height,!0)}removePanel(e){this.removeGroup(e)}toJSON(){var e;return{grid:this.gridview.serialize(),activePanel:null===(e=this.activeGroup)||void 0===e?void 0:e.id}}setVisible(e,t){this.gridview.setViewVisible(Q(e.element),t)}setActive(e){this._groups.forEach(((t,i)=>{t.value.setActive(e===t.value)}))}focus(){var e;null===(e=this.activeGroup)||void 0===e||e.focus()}fromJSON(e){this.clear();const{grid:t,activePanel:i}=e;try{const e=[],n=this.width,s=this.height;if(this.gridview.deserialize(t,{fromJSON:t=>{const{data:i}=t,n=this.options.createComponent({id:i.id,name:i.component});return e.push((()=>n.init({params:i.params,minimumWidth:i.minimumWidth,maximumWidth:i.maximumWidth,minimumHeight:i.minimumHeight,maximumHeight:i.maximumHeight,priority:i.priority,snap:!!i.snap,accessor:this,isVisible:t.visible}))),this._onDidAddGroup.fire(n),this.registerPanel(n),n}}),this.layout(n,s,!0),e.forEach((e=>e())),"string"==typeof i){const e=this.getPanel(i);e&&this.doSetGroupActive(e)}}catch(n){for(const e of this.groups)e.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e);throw this.clear(),n}this._onDidLayoutfromJSON.fire()}clear(){const e=this.activeGroup,t=Array.from(this._groups.values());for(const i of t)i.disposable.dispose(),this.doRemoveGroup(i.value,{skipActive:!0});e&&this.doSetGroupActive(void 0),this.gridview.clear()}movePanel(e,t){var i;let n;const s=this.gridview.remove(e),o=null===(i=this._groups.get(t.reference))||void 0===i?void 0:i.value;if(!o)throw new Error(`reference group ${t.reference} does not exist`);const r=ae(t.direction);if("center"===r)throw new Error(`${r} not supported as an option`);{const e=Q(o.element);n=ee(this.gridview.orientation,e,r)}this.doAddGroup(s,n,t.size)}addPanel(e){var t,i,n,s;let o=null!==(t=e.location)&&void 0!==t?t:[0];if(null===(i=e.position)||void 0===i?void 0:i.referencePanel){const t=null===(n=this._groups.get(e.position.referencePanel))||void 0===n?void 0:n.value;if(!t)throw new Error(`reference group ${e.position.referencePanel} does not exist`);const i=ae(e.position.direction);if("center"===i)throw new Error(`${i} not supported as an option`);{const e=Q(t.element);o=ee(this.gridview.orientation,e,i)}}const r=this.options.createComponent({id:e.id,name:e.component});return r.init({params:null!==(s=e.params)&&void 0!==s?s:{},minimumWidth:e.minimumWidth,maximumWidth:e.maximumWidth,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,priority:e.priority,snap:!!e.snap,accessor:this,isVisible:!0}),this.registerPanel(r),this.doAddGroup(r,o,e.size),this.doSetGroupActive(r),r}registerPanel(e){const t=new f(e.api.onDidFocusChange((t=>{t.isFocused&&this._groups.forEach((t=>{const i=t.value;i!==e?i.setActive(!1):i.setActive(!0)}))})));this._groups.set(e.id,{value:e,disposable:t})}moveGroup(e,t,i){const n=this.getPanel(t);if(!n)throw new Error("invalid operation");const s=Q(e.element),o=ee(this.gridview.orientation,s,i),[r,a]=V(o),h=Q(n.element),[d,l]=V(h);if(N(d,r))return void this.gridview.moveView(d,l,a);const p=this.doRemoveGroup(n,{skipActive:!0,skipDispose:!0}),c=Q(e.element),u=ee(this.gridview.orientation,c,i);this.doAddGroup(p,u)}removeGroup(e){super.removeGroup(e)}dispose(){super.dispose(),this._onDidLayoutfromJSON.dispose()}}class Ot extends oe{get panels(){return this.splitview.getViews()}get options(){return this._options}get length(){return this._panels.size}get orientation(){return this.splitview.orientation}get splitview(){return this._splitview}set splitview(e){this._splitview&&this._splitview.dispose(),this._splitview=e,this._splitviewChangeDisposable.value=new f(this._splitview.onDidSashEnd((()=>{this._onDidLayoutChange.fire(void 0)})),this._splitview.onDidAddView((e=>this._onDidAddView.fire(e))),this._splitview.onDidRemoveView((e=>this._onDidRemoveView.fire(e))))}get minimumSize(){return this.splitview.minimumSize}get maximumSize(){return this.splitview.maximumSize}get height(){return this.splitview.orientation===j.HORIZONTAL?this.splitview.orthogonalSize:this.splitview.size}get width(){return this.splitview.orientation===j.HORIZONTAL?this.splitview.size:this.splitview.orthogonalSize}constructor(e,t){var i;super(document.createElement("div"),t.disableAutoResizing),this._splitviewChangeDisposable=new _,this._panels=new Map,this._onDidLayoutfromJSON=new v,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidAddView=new v,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new v,this.onDidRemoveView=this._onDidRemoveView.event,this._onDidLayoutChange=new v,this.onDidLayoutChange=this._onDidLayoutChange.event,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new I(this.element),this._classNames.setClassNames(null!==(i=t.className)&&void 0!==i?i:""),e.appendChild(this.element),this._options=t,this.splitview=new J(this.element,t),this.addDisposables(this._onDidAddView,this._onDidLayoutfromJSON,this._onDidRemoveView,this._onDidLayoutChange)}updateOptions(e){var t,i;"className"in e&&this._classNames.setClassNames(null!==(t=e.className)&&void 0!==t?t:""),"disableResizing"in e&&(this.disableResizing=null!==(i=e.disableAutoResizing)&&void 0!==i&&i),"string"==typeof e.orientation&&(this.splitview.orientation=e.orientation),this._options=Object.assign(Object.assign({},this.options),e),this.splitview.layout(this.splitview.size,this.splitview.orthogonalSize)}focus(){var e;null===(e=this._activePanel)||void 0===e||e.focus()}movePanel(e,t){this.splitview.moveView(e,t)}setVisible(e,t){const i=this.panels.indexOf(e);this.splitview.setViewVisible(i,t)}setActive(e,t){this._activePanel=e,this.panels.filter((t=>t!==e)).forEach((e=>{e.api._onDidActiveChange.fire({isActive:!1}),t||e.focus()})),e.api._onDidActiveChange.fire({isActive:!0}),t||e.focus()}removePanel(e,t){const i=this._panels.get(e.id);if(!i)throw new Error(`unknown splitview panel ${e.id}`);i.dispose(),this._panels.delete(e.id);const n=this.panels.findIndex((t=>t===e));this.splitview.removeView(n,t).dispose();const s=this.panels;s.length>0&&this.setActive(s[s.length-1])}getPanel(e){return this.panels.find((t=>t.id===e))}addPanel(e){var t;if(this._panels.has(e.id))throw new Error(`panel ${e.id} already exists`);const i=this.options.createComponent({id:e.id,name:e.component});i.orientation=this.splitview.orientation,i.init({params:null!==(t=e.params)&&void 0!==t?t:{},minimumSize:e.minimumSize,maximumSize:e.maximumSize,snap:e.snap,priority:e.priority,accessor:this});const n="number"==typeof e.size?e.size:U.Distribute,s="number"==typeof e.index?e.index:void 0;return this.splitview.addView(i,n,s),this.doAddView(i),this.setActive(i),i}layout(e,t){const[i,n]=this.splitview.orientation===j.HORIZONTAL?[e,t]:[t,e];this.splitview.layout(i,n)}doAddView(e){const t=e.api.onDidFocusChange((t=>{t.isFocused&&this.setActive(e,!0)}));this._panels.set(e.id,t)}toJSON(){var e;return{views:this.splitview.getViews().map(((e,t)=>({size:this.splitview.getViewSize(t),data:e.toJSON(),snap:!!e.snap,priority:e.priority}))),activeView:null===(e=this._activePanel)||void 0===e?void 0:e.id,size:this.splitview.size,orientation:this.splitview.orientation}}fromJSON(e){this.clear();const{views:t,orientation:i,size:n,activeView:s}=e,o=[],r=this.width,a=this.height;if(this.splitview=new J(this.element,{orientation:i,proportionalLayout:this.options.proportionalLayout,descriptor:{size:n,views:t.map((e=>{const t=e.data;if(this._panels.has(t.id))throw new Error(`panel ${t.id} already exists`);const n=this.options.createComponent({id:t.id,name:t.component});return o.push((()=>{var i;n.init({params:null!==(i=t.params)&&void 0!==i?i:{},minimumSize:t.minimumSize,maximumSize:t.maximumSize,snap:e.snap,priority:e.priority,accessor:this})})),n.orientation=i,this.doAddView(n),setTimeout((()=>{this._onDidAddView.fire(n)}),0),{size:e.size,view:n}}))}}),this.layout(r,a),o.forEach((e=>e())),"string"==typeof s){const e=this.getPanel(s);e&&this.setActive(e)}this._onDidLayoutfromJSON.fire()}clear(){for(const e of this._panels.values())e.dispose();for(this._panels.clear();this.splitview.length>0;){this.splitview.removeView(0,U.Distribute,!0).dispose()}}dispose(){for(const t of this._panels.values())t.dispose();this._panels.clear();const e=this.splitview.getViews();this._splitviewChangeDisposable.dispose(),this.splitview.dispose();for(const t of e)t.dispose();this.element.remove(),super.dispose()}}class Gt extends f{get element(){return this._element}constructor(){super(),this._expandedIcon=Re({width:"11",height:"11",viewbox:"0 0 24 15",path:"M12 14.15L0 2.15L2.15 0L12 9.9L21.85 0.0499992L24 2.2L12 14.15Z"}),this._collapsedIcon=Me(),this.disposable=new _,this.apiRef={api:null},this._element=document.createElement("div"),this.element.className="dv-default-header",this._content=document.createElement("span"),this._expander=document.createElement("div"),this._expander.className="dv-pane-header-icon",this.element.appendChild(this._expander),this.element.appendChild(this._content),this.addDisposables(g(this._element,"click",(()=>{var e;null===(e=this.apiRef.api)||void 0===e||e.setExpanded(!this.apiRef.api.isExpanded)})))}init(e){this.apiRef.api=e.api,this._content.textContent=e.title,this.updateIcon(),this.disposable.value=e.api.onDidExpansionChange((()=>{this.updateIcon()}))}updateIcon(){var e;const t=!!(null===(e=this.apiRef.api)||void 0===e?void 0:e.isExpanded);x(this._expander,"collapsed",!t),t?(this._expander.contains(this._collapsedIcon)&&this._collapsedIcon.remove(),this._expander.contains(this._expandedIcon)||this._expander.appendChild(this._expandedIcon)):(this._expander.contains(this._expandedIcon)&&this._expandedIcon.remove(),this._expander.contains(this._collapsedIcon)||this._expander.appendChild(this._collapsedIcon))}update(e){}dispose(){this.disposable.dispose(),super.dispose()}}const It=M(),Vt=Number.MAX_SAFE_INTEGER;class Nt extends Pe{constructor(e){super({accessor:e.accessor,id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,disableDnd:e.disableDnd,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this.options=e}getBodyComponent(){return this.options.body}getHeaderComponent(){return this.options.header}}class kt extends oe{get id(){return this._id}get panels(){return this.paneview.getPanes()}set paneview(e){this._paneview=e,this._disposable.value=new f(this._paneview.onDidChange((()=>{this._onDidLayoutChange.fire(void 0)})),this._paneview.onDidAddView((e=>this._onDidAddView.fire(e))),this._paneview.onDidRemoveView((e=>this._onDidRemoveView.fire(e))))}get paneview(){return this._paneview}get minimumSize(){return this.paneview.minimumSize}get maximumSize(){return this.paneview.maximumSize}get height(){return this.paneview.orientation===j.HORIZONTAL?this.paneview.orthogonalSize:this.paneview.size}get width(){return this.paneview.orientation===j.HORIZONTAL?this.paneview.size:this.paneview.orthogonalSize}get options(){return this._options}constructor(e,t){var i;super(document.createElement("div"),t.disableAutoResizing),this._id=It.next(),this._disposable=new _,this._viewDisposables=new Map,this._onDidLayoutfromJSON=new v,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidLayoutChange=new v,this.onDidLayoutChange=this._onDidLayoutChange.event,this._onDidDrop=new v,this.onDidDrop=this._onDidDrop.event,this._onDidAddView=new v,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new v,this.onDidRemoveView=this._onDidRemoveView.event,this._onUnhandledDragOverEvent=new v,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.element.style.height="100%",this.element.style.width="100%",this.addDisposables(this._onDidLayoutChange,this._onDidLayoutfromJSON,this._onDidDrop,this._onDidAddView,this._onDidRemoveView,this._onUnhandledDragOverEvent),this._classNames=new I(this.element),this._classNames.setClassNames(null!==(i=t.className)&&void 0!==i?i:""),e.appendChild(this.element),this._options=t,this.paneview=new Z(this.element,{orientation:j.VERTICAL}),this.addDisposables(this._disposable)}setVisible(e,t){const i=this.panels.indexOf(e);this.paneview.setViewVisible(i,t)}focus(){}updateOptions(e){var t,i;"className"in e&&this._classNames.setClassNames(null!==(t=e.className)&&void 0!==t?t:""),"disableResizing"in e&&(this.disableResizing=null!==(i=e.disableAutoResizing)&&void 0!==i&&i),this._options=Object.assign(Object.assign({},this.options),e)}addPanel(e){var t,i;const n=this.options.createComponent({id:e.id,name:e.component});let s;e.headerComponent&&this.options.createHeaderComponent&&(s=this.options.createHeaderComponent({id:e.id,name:e.headerComponent})),s||(s=new Gt);const o=new Nt({id:e.id,component:e.component,headerComponent:e.headerComponent,header:s,body:n,orientation:j.VERTICAL,isExpanded:!!e.isExpanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:null!==(t=e.headerSize)&&void 0!==t?t:22,minimumBodySize:0,maximumBodySize:Vt});this.doAddPanel(o);const r="number"==typeof e.size?e.size:U.Distribute,a="number"==typeof e.index?e.index:void 0;return o.init({params:null!==(i=e.params)&&void 0!==i?i:{},minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize,isExpanded:e.isExpanded,title:e.title,containerApi:new le(this),accessor:this}),this.paneview.addPane(o,r,a),o.orientation=this.paneview.orientation,o}removePanel(e){const t=this.panels.findIndex((t=>t===e));this.paneview.removePane(t),this.doRemovePanel(e)}movePanel(e,t){this.paneview.moveView(e,t)}getPanel(e){return this.panels.find((t=>t.id===e))}layout(e,t){const[i,n]=this.paneview.orientation===j.HORIZONTAL?[e,t]:[t,e];this.paneview.layout(i,n)}toJSON(){const e=e=>e===Number.MAX_SAFE_INTEGER||e===Number.POSITIVE_INFINITY?void 0:e;return{views:this.paneview.getPanes().map(((t,i)=>{return{size:this.paneview.getViewSize(i),data:t.toJSON(),minimumSize:(n=t.minimumBodySize,n<=0?void 0:n),maximumSize:e(t.maximumBodySize),headerSize:t.headerSize,expanded:t.isExpanded()};var n})),size:this.paneview.size}}fromJSON(e){this.clear();const{views:t,size:i}=e,n=[],s=this.width,o=this.height;this.paneview=new Z(this.element,{orientation:j.VERTICAL,descriptor:{size:i,views:t.map((e=>{var t,i,s;const o=e.data,r=this.options.createComponent({id:o.id,name:o.component});let a;o.headerComponent&&this.options.createHeaderComponent&&(a=this.options.createHeaderComponent({id:o.id,name:o.headerComponent})),a||(a=new Gt);const h=new Nt({id:o.id,component:o.component,headerComponent:o.headerComponent,header:a,body:r,orientation:j.VERTICAL,isExpanded:!!e.expanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:null!==(t=e.headerSize)&&void 0!==t?t:22,minimumBodySize:null!==(i=e.minimumSize)&&void 0!==i?i:0,maximumBodySize:null!==(s=e.maximumSize)&&void 0!==s?s:Vt});return this.doAddPanel(h),n.push((()=>{var t;h.init({params:null!==(t=o.params)&&void 0!==t?t:{},minimumBodySize:e.minimumSize,maximumBodySize:e.maximumSize,title:o.title,isExpanded:!!e.expanded,containerApi:new le(this),accessor:this}),h.orientation=this.paneview.orientation})),setTimeout((()=>{this._onDidAddView.fire(h)}),0),{size:e.size,view:h}}))}}),this.layout(s,o),n.forEach((e=>e())),this._onDidLayoutfromJSON.fire()}clear(){for(const[e,t]of this._viewDisposables.entries())t.dispose();this._viewDisposables.clear(),this.paneview.dispose()}doAddPanel(e){const t=new f(e.onDidDrop((e=>{this._onDidDrop.fire(e)})),e.onUnhandledDragOverEvent((e=>{this._onUnhandledDragOverEvent.fire(e)})));this._viewDisposables.set(e.id,t)}doRemovePanel(e){const t=this._viewDisposables.get(e.id);t&&(t.dispose(),this._viewDisposables.delete(e.id))}dispose(){super.dispose();for(const[e,t]of this._viewDisposables.entries())t.dispose();this._viewDisposables.clear(),this.element.remove(),this.paneview.dispose()}}class Lt extends ze{get priority(){return this._priority}set orientation(e){this._orientation=e}get orientation(){return this._orientation}get minimumSize(){const e="function"==typeof this._minimumSize?this._minimumSize():this._minimumSize;return e!==this._evaluatedMinimumSize&&(this._evaluatedMinimumSize=e,this.updateConstraints()),e}get maximumSize(){const e="function"==typeof this._maximumSize?this._maximumSize():this._maximumSize;return e!==this._evaluatedMaximumSize&&(this._evaluatedMaximumSize=e,this.updateConstraints()),e}get snap(){return this._snap}constructor(e,t){super(e,t,new Se(e,t)),this._evaluatedMinimumSize=0,this._evaluatedMaximumSize=Number.POSITIVE_INFINITY,this._minimumSize=0,this._maximumSize=Number.POSITIVE_INFINITY,this._snap=!1,this._onDidChange=new v,this.onDidChange=this._onDidChange.event,this.api.initialize(this),this.addDisposables(this._onDidChange,this.api.onWillVisibilityChange((e=>{const{isVisible:t}=e,{accessor:i}=this._params;i.setVisible(this,t)})),this.api.onActiveChange((()=>{const{accessor:e}=this._params;e.setActive(this)})),this.api.onDidConstraintsChangeInternal((e=>{"number"!=typeof e.minimumSize&&"function"!=typeof e.minimumSize||(this._minimumSize=e.minimumSize),"number"!=typeof e.maximumSize&&"function"!=typeof e.maximumSize||(this._maximumSize=e.maximumSize),this.updateConstraints()})),this.api.onDidSizeChange((e=>{this._onDidChange.fire({size:e.size})})))}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}layout(e,t){const[i,n]=this.orientation===j.HORIZONTAL?[e,t]:[t,e];super.layout(i,n)}init(e){super.init(e),this._priority=e.priority,e.minimumSize&&(this._minimumSize=e.minimumSize),e.maximumSize&&(this._maximumSize=e.maximumSize),e.snap&&(this._snap=e.snap)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{minimumSize:(e=this.minimumSize,e<=0?void 0:e),maximumSize:(e=>e===Number.MAX_SAFE_INTEGER||e===Number.POSITIVE_INFINITY?void 0:e)(this.maximumSize)});var e}updateConstraints(){this.api._onDidConstraintsChange.fire({maximumSize:this._evaluatedMaximumSize,minimumSize:this._evaluatedMinimumSize})}}function Tt(e,t){return new Et(e,t).api}function Rt(e,t){const i=new Ot(e,t);return new de(i)}function Mt(e,t){const i=new Pt(e,t);return new pe(i)}function Wt(e,t){const i=new kt(e,t);return new le(i)}},6376:(e,t,i)=>{"use strict";i.d(t,{Pg:()=>D,O4:()=>n.O4,tu:()=>w,$R:()=>x,g1:()=>n.g1,i5:()=>n.i5,Vm:()=>A,TU:()=>y,M:()=>n.M,UM:()=>n.UM,Zc:()=>n.Zc,Hx:()=>n.Hx,MV:()=>n.MV,Qp:()=>n.Qp,Lt:()=>n.Lt,TR:()=>n.TR,ZS:()=>n.ZS});var n=i(4284),s=i(6204),o=i(2457);const r=(e,t)=>{const[i,n]=s.useState(),o=s.useRef(e.componentProps);return s.useImperativeHandle(t,(()=>({update:e=>{o.current=Object.assign(Object.assign({},o.current),e),n(Date.now())}})),[]),s.createElement(e.component,o.current)};r.displayName="DockviewReactJsBridge";const a=(()=>{let e=1;return{next:()=>`dockview_react_portal_key_${(e++).toString()}`}})(),h=s.createContext({});class d{constructor(e,t,i,n,s){this.parent=e,this.portalStore=t,this.component=i,this.parameters=n,this.context=s,this._initialProps={},this.disposed=!1,this.createPortal()}update(e){if(this.disposed)throw new Error("invalid operation: resource is already disposed");this.componentInstance?this.componentInstance.update(e):this._initialProps=Object.assign(Object.assign({},this._initialProps),e)}createPortal(){if(this.disposed)throw new Error("invalid operation: resource is already disposed");if("function"!=typeof(e=this.component)&&!(null==e?void 0:e.$$typeof))throw new Error("Dockview: Only React.memo(...), React.ForwardRef(...) and functional components are accepted as components");var e;const t=s.createElement(s.forwardRef(r),{component:this.component,componentProps:this.parameters,ref:e=>{this.componentInstance=e,Object.keys(this._initialProps).length>0&&(this.componentInstance.update(this._initialProps),this._initialProps={})}}),i=this.context?s.createElement(h.Provider,{value:this.context},t):t,n=o.createPortal(i,this.parent,a.next());this.ref={portal:n,disposable:this.portalStore.addPortal(n)}}dispose(){var e;null===(e=this.ref)||void 0===e||e.disposable.dispose(),this.disposed=!0}}const l=()=>{const[e,t]=s.useState([]);s.useDebugValue(`Portal count: ${e.length}`);return[e,s.useCallback((e=>{t((t=>[...t,e]));let i=!1;return n.GW.from((()=>{if(i)throw new Error("invalid operation: resource already disposed");i=!0,t((t=>t.filter((t=>t!==e))))}))}),[])]};class p{get element(){return this._element}constructor(e,t,i){this.id=e,this.component=t,this.reactPortalStore=i,this._onDidFocus=new n.O4,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new n.O4,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new d(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi})}update(e){var t;null===(t=this.part)||void 0===t||t.update({params:e.params})}layout(e,t){}dispose(){var e;this._onDidFocus.dispose(),this._onDidBlur.dispose(),null===(e=this.part)||void 0===e||e.dispose()}}class c{get element(){return this._element}constructor(e,t,i){this.id=e,this.component=t,this.reactPortalStore=i,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new d(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi,tabLocation:e.tabLocation})}update(e){var t;null===(t=this.part)||void 0===t||t.update({params:e.params})}layout(e,t){}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}class u{get element(){return this._element}constructor(e,t,i){this.id=e,this.component=t,this.reactPortalStore=i,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new d(this.element,this.reactPortalStore,this.component,{group:e.group,containerApi:e.containerApi})}focus(){}update(e){var t,i,n;this.parameters&&(this.parameters.params=e.params),null===(t=this.part)||void 0===t||t.update({params:null!==(n=null===(i=this.parameters)||void 0===i?void 0:i.params)&&void 0!==n?n:{}})}layout(e,t){}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}class m{get element(){return this._element}get part(){return this._part}constructor(e,t,i){this.component=e,this.reactPortalStore=t,this._group=i,this.mutableDisposable=new n.Gi,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.mutableDisposable.value=new n.KU(this._group.model.onDidAddPanel((()=>{this.updatePanels()})),this._group.model.onDidRemovePanel((()=>{this.updatePanels()})),this._group.model.onDidActivePanelChange((()=>{this.updateActivePanel()})),e.api.onDidActiveChange((()=>{this.updateGroupActive()}))),this._part=new d(this.element,this.reactPortalStore,this.component,{api:e.api,containerApi:e.containerApi,panels:this._group.model.panels,activePanel:this._group.model.activePanel,isGroupActive:this._group.api.isActive,group:this._group})}dispose(){var e;this.mutableDisposable.dispose(),null===(e=this._part)||void 0===e||e.dispose()}update(e){var t;null===(t=this._part)||void 0===t||t.update(e.params)}updatePanels(){this.update({params:{panels:this._group.model.panels}})}updateActivePanel(){this.update({params:{activePanel:this._group.model.activePanel}})}updateGroupActive(){this.update({params:{isGroupActive:this._group.api.isActive}})}}function v(e,t){return e?i=>new m(e,t,i):void 0}const g="props.defaultTabComponent";const w=s.forwardRef(((e,t)=>{const i=s.useRef(null),o=s.useRef(),[r,a]=l();s.useImperativeHandle(t,(()=>i.current),[]);const h=s.useRef({});return s.useEffect((()=>{const t={};n.gq.forEach((i=>{const n=i,s=e[n];n in e&&s!==h.current[n]&&(t[n]=s)})),o.current&&o.current.updateOptions(t),h.current=e}),n.gq.map((t=>e[t]))),s.useEffect((()=>{var t;if(!i.current)return;const s=null!==(t=e.tabComponents)&&void 0!==t?t:{};e.defaultTabComponent&&(s[g]=e.defaultTabComponent);const r={createLeftHeaderActionComponent:v(e.leftHeaderActionsComponent,{addPortal:a}),createRightHeaderActionComponent:v(e.rightHeaderActionsComponent,{addPortal:a}),createPrefixHeaderActionComponent:v(e.prefixHeaderActionsComponent,{addPortal:a}),createComponent:t=>new p(t.id,e.components[t.name],{addPortal:a}),createTabComponent:e=>new c(e.id,s[e.name],{addPortal:a}),createWatermarkComponent:e.watermarkComponent?()=>new u("watermark",e.watermarkComponent,{addPortal:a}):void 0,defaultTabComponent:e.defaultTabComponent?g:void 0},h=(0,n.lT)(i.current,Object.assign(Object.assign({},function(e){return n.gq.reduce(((t,i)=>(i in e&&(t[i]=e[i]),t)),{})}(e)),r)),{clientWidth:d,clientHeight:l}=i.current;return h.layout(d,l),e.onReady&&e.onReady({api:h}),o.current=h,()=>{h.dispose()}}),[]),s.useEffect((()=>{if(!o.current)return()=>{};const t=o.current.onDidDrop((t=>{e.onDidDrop&&e.onDidDrop(t)}));return()=>{t.dispose()}}),[e.onDidDrop]),s.useEffect((()=>{if(!o.current)return()=>{};const t=o.current.onWillDrop((t=>{e.onWillDrop&&e.onWillDrop(t)}));return()=>{t.dispose()}}),[e.onWillDrop]),s.useEffect((()=>{o.current&&o.current.updateOptions({createComponent:t=>new p(t.id,e.components[t.name],{addPortal:a})})}),[e.components]),s.useEffect((()=>{var t;if(!o.current)return;const i=null!==(t=e.tabComponents)&&void 0!==t?t:{};e.defaultTabComponent&&(i[g]=e.defaultTabComponent),o.current.updateOptions({defaultTabComponent:e.defaultTabComponent?g:void 0,createTabComponent:e=>new c(e.id,i[e.name],{addPortal:a})})}),[e.tabComponents,e.defaultTabComponent]),s.useEffect((()=>{o.current&&o.current.updateOptions({createWatermarkComponent:e.watermarkComponent?()=>new u("watermark",e.watermarkComponent,{addPortal:a}):void 0})}),[e.watermarkComponent]),s.useEffect((()=>{o.current&&o.current.updateOptions({createRightHeaderActionComponent:v(e.rightHeaderActionsComponent,{addPortal:a})})}),[e.rightHeaderActionsComponent]),s.useEffect((()=>{o.current&&o.current.updateOptions({createLeftHeaderActionComponent:v(e.leftHeaderActionsComponent,{addPortal:a})})}),[e.leftHeaderActionsComponent]),s.useEffect((()=>{o.current&&o.current.updateOptions({createPrefixHeaderActionComponent:v(e.prefixHeaderActionsComponent,{addPortal:a})})}),[e.prefixHeaderActionsComponent]),s.createElement("div",{style:{height:"100%",width:"100%"},ref:i},r)}));w.displayName="DockviewComponent";const f=()=>s.createElement("svg",{height:"11",width:"11",viewBox:"0 0 28 28","aria-hidden":"false",focusable:!1,className:"dv-svg"},s.createElement("path",{d:"M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z"}));var _=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};const D=e=>{var{api:t,containerApi:i,params:n,hideClose:o,closeActionOverride:r,onPointerDown:a,onPointerUp:h,onPointerLeave:d,tabLocation:l}=e,p=_(e,["api","containerApi","params","hideClose","closeActionOverride","onPointerDown","onPointerUp","onPointerLeave","tabLocation"]);const c=function(e){const[t,i]=s.useState(e.title);return s.useEffect((()=>{const t=e.onDidTitleChange((e=>{i(e.title)}));return()=>{t.dispose()}}),[e]),t}(t),u=s.useRef(!1),m=s.useCallback((e=>{e.preventDefault(),r?r():t.close()}),[t,r]),v=s.useCallback((e=>{e.preventDefault()}),[]),g=s.useCallback((e=>{u.current=1===e.button,null==a||a(e)}),[a]),w=s.useCallback((e=>{u&&1===e.button&&!o&&(u.current=!1,m(e)),null==h||h(e)}),[h,m,o]),D=s.useCallback((e=>{u.current=!1,null==d||d(e)}),[d]);return s.createElement("div",Object.assign({"data-testid":"dockview-dv-default-tab"},p,{onPointerDown:g,onPointerUp:w,onPointerLeave:D,className:"dv-default-tab"}),s.createElement("span",{className:"dv-default-tab-content"},c),!o&&"headerOverflow"!==l&&s.createElement("div",{className:"dv-default-tab-action",onPointerDown:v,onClick:m},s.createElement(f,null)))};class b extends n.hJ{constructor(e,t,i,n){super(e,t),this.reactComponent=i,this.reactPortalStore=n}getComponent(){var e,t;return new d(this.element,this.reactPortalStore,this.reactComponent,{params:null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{},api:this.api,containerApi:new n.fX(this._params.accessor)})}}const y=s.forwardRef(((e,t)=>{const i=s.useRef(null),o=s.useRef(),[r,a]=l();s.useImperativeHandle(t,(()=>i.current),[]);const h=s.useRef({});return s.useEffect((()=>{const t={};n.mH.forEach((i=>{const n=i,s=e[n];n in e&&s!==h.current[n]&&(t[n]=s)})),o.current&&o.current.updateOptions(t),h.current=e}),n.mH.map((t=>e[t]))),s.useEffect((()=>{if(!i.current)return()=>{};const t={createComponent:t=>new b(t.id,t.name,e.components[t.name],{addPortal:a})},s=(0,n.cO)(i.current,Object.assign(Object.assign({},function(e){return n.mH.reduce(((t,i)=>(i in e&&(t[i]=e[i]),t)),{})}(e)),t)),{clientWidth:r,clientHeight:h}=i.current;return s.layout(r,h),e.onReady&&e.onReady({api:s}),o.current=s,()=>{s.dispose()}}),[]),s.useEffect((()=>{o.current&&o.current.updateOptions({createComponent:t=>new b(t.id,t.name,e.components[t.name],{addPortal:a})})}),[e.components]),s.createElement("div",{style:{height:"100%",width:"100%"},ref:i},r)}));y.displayName="SplitviewComponent";class C extends n.Tg{constructor(e,t,i,n){super(e,t),this.reactComponent=i,this.reactPortalStore=n}getComponent(){var e,t;return new d(this.element,this.reactPortalStore,this.reactComponent,{params:null!==(t=null===(e=this._params)||void 0===e?void 0:e.params)&&void 0!==t?t:{},api:this.api,containerApi:new n.Tn(this._params.accessor)})}}const x=s.forwardRef(((e,t)=>{const i=s.useRef(null),o=s.useRef(),[r,a]=l();s.useImperativeHandle(t,(()=>i.current),[]);const h=s.useRef({});return s.useEffect((()=>{const t={};n.kQ.forEach((i=>{const n=i,s=e[n];n in e&&s!==h.current[n]&&(t[n]=s)})),o.current&&o.current.updateOptions(t),h.current=e}),n.kQ.map((t=>e[t]))),s.useEffect((()=>{if(!i.current)return()=>{};const t={createComponent:t=>new C(t.id,t.name,e.components[t.name],{addPortal:a})},s=(0,n.rc)(i.current,Object.assign(Object.assign({},function(e){return n.kQ.reduce(((t,i)=>(i in e&&(t[i]=e[i]),t)),{})}(e)),t)),{clientWidth:r,clientHeight:h}=i.current;return s.layout(r,h),e.onReady&&e.onReady({api:s}),o.current=s,()=>{s.dispose()}}),[]),s.useEffect((()=>{o.current&&o.current.updateOptions({createComponent:t=>new C(t.id,t.name,e.components[t.name],{addPortal:a})})}),[e.components]),s.createElement("div",{style:{height:"100%",width:"100%"},ref:i},r)}));x.displayName="GridviewComponent";class S{get element(){return this._element}constructor(e,t,i){this.id=e,this.component=t,this.reactPortalStore=i,this._element=document.createElement("div"),this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new d(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,title:e.title,containerApi:e.containerApi})}toJSON(){return{id:this.id}}update(e){var t;null===(t=this.part)||void 0===t||t.update(e.params)}dispose(){var e;null===(e=this.part)||void 0===e||e.dispose()}}const A=s.forwardRef(((e,t)=>{const i=s.useRef(null),o=s.useRef(),[r,a]=l();s.useImperativeHandle(t,(()=>i.current),[]);const h=s.useRef({});return s.useEffect((()=>{const t={};n.jl.forEach((i=>{const n=i,s=e[n];n in e&&s!==h.current[n]&&(t[n]=s)})),o.current&&o.current.updateOptions(t),h.current=e}),n.jl.map((t=>e[t]))),s.useEffect((()=>{var t;if(!i.current)return()=>{};const s=null!==(t=e.headerComponents)&&void 0!==t?t:{},r={createComponent:t=>new S(t.id,e.components[t.name],{addPortal:a}),createHeaderComponent:e=>new S(e.id,s[e.name],{addPortal:a})},h=(0,n.iz)(i.current,Object.assign(Object.assign({},function(e){return n.jl.reduce(((t,i)=>(i in e&&(t[i]=e[i]),t)),{})}(e)),r)),{clientWidth:d,clientHeight:l}=i.current;return h.layout(d,l),e.onReady&&e.onReady({api:h}),o.current=h,()=>{h.dispose()}}),[]),s.useEffect((()=>{o.current&&o.current.updateOptions({createComponent:t=>new S(t.id,e.components[t.name],{addPortal:a})})}),[e.components]),s.useEffect((()=>{var t;if(!o.current)return;const i=null!==(t=e.headerComponents)&&void 0!==t?t:{};o.current.updateOptions({createHeaderComponent:e=>new S(e.id,i[e.name],{addPortal:a})})}),[e.headerComponents]),s.useEffect((()=>{if(!o.current)return()=>{};const t=o.current.onDidDrop((t=>{e.onDidDrop&&e.onDidDrop(t)}));return()=>{t.dispose()}}),[e.onDidDrop]),s.createElement("div",{style:{height:"100%",width:"100%"},ref:i},r)}));A.displayName="PaneviewComponent"},4537:(e,t,i)=>{"use strict";i.d(t,{M:()=>a});var n=i(6204),s=i(5186),o=i(3188);const r=()=>{return e={width:"16",height:"16",viewbox:"0 0 50 58",path:"M22.5581 50.9938V30.1717L4.65116 19.869V31.7386L12.8536 36.4939V45.4198L22.5581 50.9938ZM27.2093 51.1162L37.0931 45.4226V36.2851L45.3488 31.501V19.7801L27.2093 30.2529V51.1162ZM42.9633 15.7867L33.4288 10.2615L25.0571 15.1193L16.6219 10.2567L7.00237 15.8557L24.9542 26.1842L42.9633 15.7867ZM0 43.4008V14.5498L24.9974 0L50 14.4887V43.3552L24.9969 57.7584L0 43.4008Z"},(0,o.jsx)("svg",{height:e.height,width:e.width,viewBox:e.viewbox,focusable:!1,className:"dv-svg",children:(0,o.jsx)("path",{d:e.path})});var e},a=e=>{const t=n.useMemo((()=>e.id?`https://codesandbox.io/s/github/mathuo/dockview/tree/master/packages/docs/sandboxes/${e.id}`:""),[e.id]);return(0,o.jsxs)(o.Fragment,{children:[!e.hideThemePicker&&(0,o.jsx)(s.JE,{}),(0,o.jsxs)("span",{className:"codesandbox-button",style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("span",{className:"codesandbox-button-pretext",children:"Open in "}),(0,o.jsxs)("a",{href:t,target:"_blank",rel:"noopener",className:"codesandbox-button-content",children:[(0,o.jsx)("span",{style:{fontWeight:"bold",paddingRight:"4px"},children:"CodeSandbox"}),(0,o.jsx)(r,{})]})]})]})}},5186:(e,t,i)=>{"use strict";i.d(t,{Qj:()=>v,JE:()=>u});var n=i(6204),s=i(4537),o=i(6261),r=i(3188);const a=()=>(0,r.jsxs)("div",{className:"lds-ellipsis",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]});var h=i(4940);const d=e=>(0,r.jsx)("img",{style:{marginRight:"0px 4px"},height:e.height,width:e.width,src:(0,o.Z)("img/react-icon.svg")}),l=e=>(0,r.jsx)("img",{style:{marginRight:"0px 4px"},height:e.height,width:e.width,src:(0,o.Z)("img/js-icon.svg")}),p=["dockview-theme-abyss","dockview-theme-dark","dockview-theme-light","dockview-theme-vs","dockview-theme-dracula","dockview-theme-replit","dockview-theme-kraken"];function c(e,t){const[i,s]=n.useState(localStorage.getItem(e));return n.useEffect((()=>{const t=t=>{s(localStorage.getItem(e))};return window.addEventListener("storage",t),s(localStorage.getItem(e)),()=>{window.removeEventListener("storage",t)}}),[e]),null===i?t:i}const u=()=>{const[e,t]=n.useState(localStorage.getItem("dv-theme-class-name")||p[0]);return n.useEffect((()=>{localStorage.setItem("dv-theme-class-name",e),window.dispatchEvent(new StorageEvent("storage"))}),[e]),(0,r.jsxs)("div",{style:{height:"20px",display:"flex",alignItems:"center",padding:"0px 0px 0px 4px"},children:[(0,r.jsx)("span",{style:{paddingRight:"4px"},children:"Theme: "}),(0,r.jsx)("select",{style:{backgroundColor:"inherit",color:"inherit"},onChange:e=>t(e.target.value),value:e,children:p.map((e=>(0,r.jsx)("option",{value:e,children:e},e)))})]})};const m=e=>{const t=n.useRef(null),[i,o]=n.useState("React"),[h,p]=n.useState(!1),u=c("dv-theme-class-name","dockview-theme-abyss");n.useEffect((()=>{p(!0),setTimeout((()=>{p(!1)}),500)}),[i]),n.useEffect((()=>{if(t.current&&"Javascript"===i){const i=e.typescript(t.current);return()=>{i.dispose()}}}),[e.typescript,i]);const m=n.useMemo((()=>"Javascript"===i?`javascript/${e.sandboxId}`:e.sandboxId),[e.sandboxId,i]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:t,style:{position:"relative",height:e.height?`${e.height}px`:"300px"},children:[h&&(0,r.jsx)("div",{style:{background:"rgba(30,30,30)",position:"absolute",zIndex:9999,top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(a,{})}),"React"===i&&(0,r.jsx)(e.react,{theme:u})]}),(0,r.jsxs)("div",{style:{margin:"2px 0px",padding:"2px 0px",display:"flex",alignItems:"center",fontSize:"14px",height:"24px"},children:[(0,r.jsxs)("div",{className:"framework-button",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[e.typescript&&("React"===i?(0,r.jsx)(d,{height:16,width:16}):(0,r.jsx)(l,{height:16,width:16})),e.typescript&&(0,r.jsxs)("select",{style:{border:"none",fontWeight:"bold",backgroundColor:"inherit",cursor:"inherit",color:"inherit",height:"24px"},onChange:e=>{const t=e.target;o(t.value)},children:[(0,r.jsx)("option",{value:"React",children:"React"}),(0,r.jsx)("option",{value:"Javascript",children:"Javascript"})]})]}),(0,r.jsx)("span",{style:{flexGrow:1}}),(0,r.jsx)(s.M,{id:m,hideThemePicker:e.hideThemePicker})]})]})},v=e=>(0,r.jsx)(h.Z,{children:()=>(0,r.jsx)(m,{...e})})},5945:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(6204),s=i(4537),o=i(4940),r=i(3188);const a=e=>{const t=n.useMemo((()=>n.lazy((()=>i(3086)(`./${e.framework}/${e.id}/src/app`)))),[e.framework,e.id]);return(0,r.jsx)(o.Z,{children:()=>(0,r.jsx)(n.Suspense,{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,r.jsx)("div",{style:{height:e.height??"500px",flexGrow:1,display:"flex",flexDirection:"column"},children:(0,r.jsx)(t,{theme:e.theme})}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)("span",{style:{width:"220px"},children:(0,r.jsx)(s.M,{id:`${e.framework}/${e.id}`,hideThemePicker:!0})})})]})})})}},4923:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});var n=i(6376);const s=[{id:n.Hx,key:"**[Dark](/demo?theme=dark)**",text:""},{id:n.Qp,key:"**[Light](/demo?theme=light)**",text:""},{id:n.ZS,key:"**[Visual Studio](/demo?theme=visualStudio)**",text:"Based on [Visual Studio](https://visualstudio.microsoft.com)"},{id:n.UM,key:"**[Abyss](/demo?theme=abyss)**",text:"Based on [Visual Studio Code](https://code.visualstudio.com/docs/getstarted/themes) abyss theme"},{id:n.MV,key:"**[Dracula](/demo?theme=dracula)**",text:"Based on [Visual Studio Code](https://code.visualstudio.com/docs/getstarted/themes) dracula theme"},{id:n.TR,key:"**[Replit](/demo?theme=replit)**",text:"Based on  [Replit](https://replit.com)"},{id:n.Lt,key:"**[Light Spaced](/demo?theme=lightSpaced)**",text:""},{id:n.Zc,key:"**[Abyss Spaced](/demo?theme=abyssSpaced)**",text:""}]},5711:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i(6204),s=i(6223),o=i(4923),r=i(5945),a=i(4940),h=i(6376),d=i(2262),l=i(3188);const p=e=>{const t=new URLSearchParams(window.location.search);t.set("theme",e.name);const i=window.location.pathname+"?"+t.toString();window.history.pushState({path:i},"",i)},c=()=>{const[e,t]=n.useState(h.UM);return n.useEffect((()=>{const e=new URLSearchParams(window.location.search).get("theme"),i=o.c.find((t=>t.id.name===e))?.id??h.UM;t(i),p(i)}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{height:"40px",display:"flex",alignItems:"center",padding:"0px 15px"},children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)("div",{style:{paddingRight:8,color:"var(--ifm-color-primary)",fontSize:"0.9em"},children:"Theme: "}),(0,l.jsx)(m,{value:e.name,options:o.c.map((e=>e.id.name)),onChanged:e=>{const i=o.c.find((t=>t.id.name===e))?.id??h.UM;t(i),p(i)}})]})}),(0,l.jsx)(r.Z,{theme:e,framework:"react",height:"100%",id:"dockview/demo-dockview"})]})};function u(){return(0,l.jsx)(s.Z,{noFooter:!0,children:(0,l.jsx)("div",{style:{height:"calc(100% - var(--ifm-navbar-height))",flexGrow:1,padding:"10px",display:"flex",flexDirection:"column"},children:(0,l.jsx)(a.Z,{children:()=>(0,l.jsx)(c,{})})})})}const m=e=>{const t=n.useRef(null);return(0,l.jsx)("div",{ref:t,children:(0,l.jsxs)(d.h_,{onOpenChange:i=>{i&&t.current&&requestAnimationFrame((()=>{const i=t.current.querySelector(`[data-dropdown-menu-value="${e.value}"]`);i&&i.focus()}))},children:[(0,l.jsx)(d.$F,{asChild:!0,children:(0,l.jsx)("div",{className:"framework-menu-item-select",children:e.value})}),(0,l.jsx)(d.AW,{side:"bottom",align:"end",sideOffset:10,className:"DropdownMenuContent",children:e.options.map((t=>(0,l.jsx)(d.Xi,{"data-dropdown-menu-value":t,onClick:()=>e.onChanged(t),className:"DropdownMenuItem",children:(0,l.jsxs)("div",{className:"framework-menu-item",children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)("span",{children:t===e.value?"\u2713":""})]})})))})]})})}},3086:(e,t,i)=>{var n={"./javascript/fullwidthtab-dockview/src/app":[1800,532,1800],"./react/dockview/constraints/src/app":[9920,9920],"./react/dockview/demo-dockview/src/app":[2060,532,4152],"./react/dockview/dnd-events/src/app":[9944,9944],"./react/dockview/dnd-external/src/app":[8888,8888],"./react/dockview/floating-groups/src/app":[9518,9582],"./react/dockview/group-actions/src/app":[9980,532,9980],"./react/dockview/layout/src/app":[601,601],"./react/dockview/locked/src/app":[4156,4156],"./react/dockview/maximize-group/src/app":[7729,7729],"./react/dockview/popout-group/src/app":[9502,8678,6835,9502],"./react/dockview/render-mode/src/app":[7787,532,7787],"./react/dockview/resize-container/src/app":[5093,5093],"./react/dockview/resize/src/app":[6149,532,6149],"./react/dockview/scrollbars/src/app":[8029,532,8029],"./react/dockview/tabview/src/app":[8774,8774],"./react/dockview/update-parameters/src/app":[3215,3215],"./react/dockview/update-title/src/app":[9070,9070],"./react/dockview/watermark/src/app":[4074,4074],"./react/gridview/simple/src/app":[3075,3075],"./react/paneview/simple/src/app":[9887,9887],"./react/splitview/simple/src/app":[505,505]};function s(e){if(!i.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i(s)))}s.keys=()=>Object.keys(n),s.id=3086,e.exports=s}}]);
//# sourceMappingURL=4f320539.ae266d78.js.map