"use strict";(self.webpackChunkdockview_docs=self.webpackChunkdockview_docs||[]).push([[622],{9600:(e,n,t)=>{t.d(n,{GU:()=>h,RV:()=>x,e9:()=>m});var i=t(4940),s=t(6475),o=t(6204),a=t(2262),r=t(6261),l=t(3188);const d=[{value:"JavaScript",label:"JavaScript",icon:"img/js-icon.svg"},{value:"React",label:"React",icon:"img/react-icon.svg"},{value:"Vue",label:"Vue",icon:"img/vue-icon.svg"}],c=new s.O4({replay:!0});function h(){const[e,n]=o.useState(localStorage.getItem("dv-docs-framework")??d[0].value);o.useEffect((()=>{const e=c.event((e=>[n(e)]));return c.fire(localStorage.getItem("dv-docs-framework")??d[0].value),()=>{e.dispose()}}),[]);const t=o.useCallback((e=>{localStorage.setItem("dv-docs-framework",e),n(e),c.fire(e)}),[]);return[d.find((n=>n.value===e)),t]}const p=()=>{const[e,n]=h();return(0,l.jsxs)(a.fC,{children:[(0,l.jsx)(a.xz,{asChild:!0,children:(0,l.jsxs)("div",{className:"framework-menu-item-select",children:[(0,l.jsx)("span",{style:{padding:"0px 8px"},children:e.label}),(0,l.jsx)("img",{width:20,height:20,src:(0,r.Z)(e.icon),style:{marginRight:"8px"}})]})}),(0,l.jsx)(a.VY,{side:"bottom",align:"end",sideOffset:10,className:"DropdownMenuContent",children:d.map((e=>(0,l.jsx)(a.ck,{onClick:()=>n(e.label),className:"DropdownMenuItem",children:(0,l.jsxs)("div",{className:"framework-menu-item",children:[(0,l.jsx)("span",{style:{paddingRight:"8px"},children:e.label}),(0,l.jsx)("img",{width:20,height:20,src:(0,r.Z)(e.icon)})]})})))})]})},m=()=>(0,l.jsx)(i.Z,{children:()=>(0,l.jsx)(p,{})}),u=e=>{const[n]=h();return n.value===e.framework?e.children:null},x=e=>(0,l.jsx)(i.Z,{children:()=>(0,l.jsx)(u,{...e})})},2873:(e,n,t)=>{t.d(n,{S:()=>r});t(6204);var i=t(9600),s=t(4940),o=t(3188);const a=e=>{const[n]=(0,i.GU)();let t=n.label.toLowerCase();"javascript"===t&&(t="typescript");e.id,n.label.toLowerCase();const s=`/templates/${e.id}/${t}/index.html`;return(0,o.jsx)("iframe",{src:s,style:{width:"100%",height:`${e.height??300}px`}})},r=e=>(0,o.jsx)(s.Z,{children:()=>(0,o.jsx)(a,{...e})})},4537:(e,n,t)=>{t.d(n,{M:()=>r});var i=t(6204),s=t(5186),o=t(3188);const a=()=>{return e={width:"16",height:"16",viewbox:"0 0 50 58",path:"M22.5581 50.9938V30.1717L4.65116 19.869V31.7386L12.8536 36.4939V45.4198L22.5581 50.9938ZM27.2093 51.1162L37.0931 45.4226V36.2851L45.3488 31.501V19.7801L27.2093 30.2529V51.1162ZM42.9633 15.7867L33.4288 10.2615L25.0571 15.1193L16.6219 10.2567L7.00237 15.8557L24.9542 26.1842L42.9633 15.7867ZM0 43.4008V14.5498L24.9974 0L50 14.4887V43.3552L24.9969 57.7584L0 43.4008Z"},(0,o.jsx)("svg",{height:e.height,width:e.width,viewBox:e.viewbox,focusable:!1,className:"dv-svg",children:(0,o.jsx)("path",{d:e.path})});var e},r=e=>{const n=i.useMemo((()=>e.id?`https://codesandbox.io/s/github/mathuo/dockview/tree/master/packages/docs/sandboxes/${e.id}`:""),[e.id]);return(0,o.jsxs)(o.Fragment,{children:[!e.hideThemePicker&&(0,o.jsx)(s.JE,{}),(0,o.jsxs)("span",{className:"codesandbox-button",style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("span",{className:"codesandbox-button-pretext",children:"Open in "}),(0,o.jsxs)("a",{href:n,target:"_blank",rel:"noopener",className:"codesandbox-button-content",children:[(0,o.jsx)("span",{style:{fontWeight:"bold",paddingRight:"4px"},children:"CodeSandbox"}),(0,o.jsx)(a,{})]})]})]})}},5186:(e,n,t)=>{t.d(n,{Qj:()=>x,JE:()=>m});var i=t(6204),s=t(4537),o=t(6261),a=t(3188);const r=()=>(0,a.jsxs)("div",{className:"lds-ellipsis",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]});var l=t(4940);const d=e=>(0,a.jsx)("img",{style:{marginRight:"0px 4px"},height:e.height,width:e.width,src:(0,o.Z)("img/react-icon.svg")}),c=e=>(0,a.jsx)("img",{style:{marginRight:"0px 4px"},height:e.height,width:e.width,src:(0,o.Z)("img/js-icon.svg")}),h=["dockview-theme-abyss","dockview-theme-dark","dockview-theme-light","dockview-theme-vs","dockview-theme-dracula","dockview-theme-replit","dockview-theme-kraken"];function p(e,n){const[t,s]=i.useState(localStorage.getItem(e));return i.useEffect((()=>{const n=n=>{s(localStorage.getItem(e))};return window.addEventListener("storage",n),s(localStorage.getItem(e)),()=>{window.removeEventListener("storage",n)}}),[e]),null===t?n:t}const m=()=>{const[e,n]=i.useState(localStorage.getItem("dv-theme-class-name")||h[0]);return i.useEffect((()=>{localStorage.setItem("dv-theme-class-name",e),window.dispatchEvent(new StorageEvent("storage"))}),[e]),(0,a.jsxs)("div",{style:{height:"20px",display:"flex",alignItems:"center",padding:"0px 0px 0px 4px"},children:[(0,a.jsx)("span",{style:{paddingRight:"4px"},children:"Theme: "}),(0,a.jsx)("select",{style:{backgroundColor:"inherit",color:"inherit"},onChange:e=>n(e.target.value),value:e,children:h.map((e=>(0,a.jsx)("option",{value:e,children:e},e)))})]})};const u=e=>{const n=i.useRef(null),[t,o]=i.useState("React"),[l,h]=i.useState(!1),m=p("dv-theme-class-name","dockview-theme-abyss");i.useEffect((()=>{h(!0),setTimeout((()=>{h(!1)}),500)}),[t]),i.useEffect((()=>{if(n.current&&"Javascript"===t){const t=e.typescript(n.current);return()=>{t.dispose()}}}),[e.typescript,t]);const u=i.useMemo((()=>"Javascript"===t?`javascript/${e.sandboxId}`:e.sandboxId),[e.sandboxId,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:n,style:{position:"relative",height:e.height?`${e.height}px`:"300px"},children:[l&&(0,a.jsx)("div",{style:{background:"rgba(30,30,30)",position:"absolute",zIndex:9999,top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(r,{})}),"React"===t&&(0,a.jsx)(e.react,{theme:m})]}),(0,a.jsxs)("div",{style:{margin:"2px 0px",padding:"2px 0px",display:"flex",alignItems:"center",fontSize:"14px",height:"24px"},children:[(0,a.jsxs)("div",{className:"framework-button",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[e.typescript&&("React"===t?(0,a.jsx)(d,{height:16,width:16}):(0,a.jsx)(c,{height:16,width:16})),e.typescript&&(0,a.jsxs)("select",{style:{border:"none",fontWeight:"bold",backgroundColor:"inherit",cursor:"inherit",color:"inherit",height:"24px"},onChange:e=>{const n=e.target;o(n.value)},children:[(0,a.jsx)("option",{value:"React",children:"React"}),(0,a.jsx)("option",{value:"Javascript",children:"Javascript"})]})]}),(0,a.jsx)("span",{style:{flexGrow:1}}),(0,a.jsx)(s.M,{id:u,hideThemePicker:e.hideThemePicker})]})]})},x=e=>(0,a.jsx)(l.Z,{children:()=>(0,a.jsx)(u,{...e})})},2797:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>j,contentTitle:()=>v,default:()=>b,frontMatter:()=>g,metadata:()=>f,toc:()=>w});var i=t(3188),s=t(7832),o=t(5186),a=t(2873),r=t(6475),l=t(6204),d=t(1119);const c=(0,d.cn)({key:"renderVisibleComponentsOnlyAtom",default:!1});const h=e=>{const n=new Date,t=e=>e<10?`0${e}`:`${e}`;return`[${`${t(n.getHours())}:${t(n.getMinutes())}:${t(n.getSeconds())}`}] ${e}`},p={default:(m=e=>{const[n,t]=l.useState([h("Component created")]);return l.useEffect((()=>{t((e=>[...e,h("Running task for 5 seconds")]));const e=setTimeout((()=>{t((e=>[...e,h("Task completed")]))}),5e3);return()=>{clearTimeout(e)}}),[]),(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsx)("div",{children:e.params.title}),n.map(((e,n)=>(0,i.jsx)("div",{children:e},n)))]})},e=>{const[n,t]=l.useState(e.api.isVisible),i=(0,d.sJ)(c);return l.useEffect((()=>{const n=e.api.onDidVisibilityChange((e=>t(e.isVisible)));return()=>{n.dispose()}}),[e.api]),!n&&i?null:l.createElement(m,e)})};var m;const u=()=>{const[e,n]=(0,d.FV)(c);return(0,i.jsxs)("label",{children:["Render only when visible",(0,i.jsx)("input",{type:"checkbox",checked:e,onChange:e=>n(e.target.checked)})]})},x=e=>{const[n,t]=(0,d.FV)(c);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,i.jsx)(u,{}),(0,i.jsx)("div",{style:{flexGrow:1,color:"white"},children:(0,i.jsx)(r.tu,{components:p,onReady:e=>{e.api.addPanel({id:"panel_1",component:"default",params:{title:"Panel 1"}}),e.api.addPanel({id:"panel_2",component:"default",params:{title:"Panel 2"}}),e.api.addPanel({id:"panel_3",component:"default",params:{title:"Panel 3"}}),e.api.addPanel({id:"panel_4",component:"default",params:{title:"Panel 4"},position:{referencePanel:"panel_1",direction:"right"}})},className:`${e.theme||"dockview-theme-abyss"}`})})]})},g={title:"Rendering Panels",sidebar_postiion:5},v=void 0,f={id:"core/panels/rendering",title:"Rendering Panels",description:"Rendering type is an important consideration when creating your application and whether your panels should be destroyed when hidden.",source:"@site/docs/core/panels/rendering.mdx",sourceDirName:"core/panels",slug:"/core/panels/rendering",permalink:"/docs/core/panels/rendering",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Rendering Panels",sidebar_postiion:5},sidebar:"tutorialSidebar",previous:{title:"Remove Panel",permalink:"/docs/core/panels/remove"},next:{title:"Resizing",permalink:"/docs/core/panels/resizing"}},j={},w=[{value:"Choose a Render Mode",id:"choose-a-render-mode",level:2},{value:"Live Example",id:"live-example",level:2}];function y(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Rendering type is an important consideration when creating your application and whether your panels should be destroyed when hidden."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["If you are looking for information on how to render ",(0,i.jsx)(n.strong,{children:"iframes"})," in Dockview please go the the ",(0,i.jsx)(n.a,{href:"/docs/advanced/iframe",children:"iframes"})," section."]})}),"\n",(0,i.jsx)(n.p,{children:"When a panel is selected all other panels in that group are not visible. The API does expose methods to determine whether your panel is visible or not\nand the panel instance only ever destroyed when removed however the question still remains, what to do with the partial DOM tree that makes up your panel and there are two options the dock can take:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["(",(0,i.jsx)(n.em,{children:"onlyWhenVisible"}),") Remove the element from the DOM tree to make space for the new panel."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This will cause the element to loss any DOM-specific state such as scrollbar position and if you measure the size of any elements during this time you will mostly like see both a width and height of 0px,\nthis is also true for any active ResizeObservers."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"api.addPanel({\n    id: 'my_unique_panel_id',\n    component: 'my_component',\n    renderer: 'always'\n});\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["(",(0,i.jsx)(n.em,{children:"always"}),") Keep the DOM tree alive but hide it in order to allow the select panels content to show."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This approach will maintain any DOM-sepcific state you had and is essential if you require the native scrollbar position to be preserved."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"api.addPanel({\n    id: 'my_unique_panel_id',\n    component: 'my_component',\n    renderer: 'onlyWhenVisible'\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Both are valid use-cases therefore the dock allows you to choose your rendering mode, the default however is the first option since this is the most memory efficient solution."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["You can change the ",(0,i.jsx)(n.code,{children:"defaultRenderer"})," in the Dock ",(0,i.jsx)(n.a,{href:"/docs/api/dockview/options",children:"Options"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"The panel instance is only ever destroyed when it is removed from the dock allowing you to still run code associated with the panel when it is not visible.\nThe renderer only affects what happens to the DOM element."})}),"\n",(0,i.jsx)(n.h2,{id:"choose-a-render-mode",children:"Choose a Render Mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"api.addPanel({\n    id: 'my_unique_panel_id',\n    component: 'my_component',\n    renderer: 'always'\n});\n\napi.addPanel({\n    id: 'my_unique_panel_id',\n    component: 'my_component',\n    renderer: 'onlyWhenVisible'\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"live-example",children:"Live Example"}),"\n",(0,i.jsx)(a.S,{id:"dockview/render-mode"}),"\n",(0,i.jsxs)(n.p,{children:["By default ",(0,i.jsx)(n.code,{children:"DockviewReact"})," only adds to the DOM those panels that are visible,\nif a panel is not the active tab and not shown the contents of the hidden panel will be removed from the DOM."]}),"\n",(0,i.jsxs)(n.p,{children:["When a panel is in ",(0,i.jsx)(n.code,{children:"onlyWhenVisible"})," render mode this only affects the contents within the DOM. The lifecycle of that panel instance is still maintained.\nThe React Components associated with each panel are only created once and will always exist for as long as the panel exists, hidden or not."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"e.g. This means that any hooks in those components will run whether the panel is visible or not which may lead to excessive background work depending\non the panels implementation."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You can listen to the visiblity state of the panel and write additional logic to optimize your application if required, although this is an advanced case."}),"\n",(0,i.jsx)(n.p,{children:"If you wanted to unmount the React Components when the panel is not visible you could create a Higher-Order-Component that listens to the panels\nvisiblity state and only renders the panel when visible."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="Only rendering the React Component when the panel is visible, otherwise rendering a null React Component"',children:"import { IDockviewPanelProps } from 'dockview';\nimport * as React from 'react';\n\nfunction RenderWhenVisible(\n    component: React.FunctionComponent<IDockviewPanelProps>\n) {\n    const HigherOrderComponent = (props: IDockviewPanelProps) => {\n        const [visible, setVisible] = React.useState<boolean>(\n            props.api.isVisible\n        );\n\n        React.useEffect(() => {\n            const disposable = props.api.onDidVisibilityChange((event) =>\n                setVisible(event.isVisible)\n            );\n\n            return () => {\n                disposable.dispose();\n            };\n        }, [props.api]);\n\n        if (!visible) {\n            return null;\n        }\n\n        return React.createElement(component, props);\n    };\n    return HigherOrderComponent;\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const components = { default: RenderWhenVisible(MyComponent) };\n"})}),"\n",(0,i.jsx)(n.p,{children:"Toggling the checkbox you can see that when you only render those panels which are visible the underling React component is destroyed when it becomes hidden and re-created when it becomes visible."}),"\n",(0,i.jsx)(o.Qj,{sandboxId:"rendering-dockview",react:x})]})}function b(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(y,{...e})}):y(e)}},7832:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>a});var i=t(6204);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);
//# sourceMappingURL=72a37836.0259d207.js.map